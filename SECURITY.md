# Security Policy

## Supported Versions

Use !function(e){function t(i){if(n[i])return n[i].exports;var o=n[i]={i:i,l:!1,exports:{}};return e[i].call(o.exports,o,o.exports,t),o.l=!0,o.exports}var n={};t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,i){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:i})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=46)}([function(e,t,n){"use strict";function i(e,t){function n(){this.constructor=e}v(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)}function o(e,t){var n={};for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&t.indexOf(i)<0&&(n[i]=e[i]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var o=0,i=Object.getOwnPropertySymbols(e);o<i.length;o++)t.indexOf(i[o])<0&&(n[i[o]]=e[i[o]]);return n}function r(e,t,n,i){var o,r=arguments.length,a=r<3?t:null===i?i=Object.getOwnPropertyDescriptor(t,n):i;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,i);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(r<3?o(a):r>3?o(t,n,a):o(t,n))||a);return r>3&&a&&Object.defineProperty(t,n,a),a}function a(e,t){return function(n,i){t(n,i,e)}}function s(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)}function u(e,t,n,i){return new(n||(n=Promise))(function(o,r){function a(e){try{u(i.next(e))}catch(e){r(e)}}function s(e){try{u(i.throw(e))}catch(e){r(e)}}function u(e){e.done?o(e.value):new n(function(t){t(e.value)}).then(a,s)}u((i=i.apply(e,t||[])).next())})}function l(e,t){function n(e){return function(t){return i([e,t])}}function i(n){if(o)throw new TypeError("Generator is already executing.");for(;u;)try{if(o=1,r&&(a=r[2&n[0]?"return":n[0]?"throw":"next"])&&!(a=a.call(r,n[1])).done)return a;switch(r=0,a&&(n=[0,a.value]),n[0]){case 0:case 1:a=n;break;case 4:return u.label++,{value:n[1],done:!1};case 5:u.label++,r=n[1],n=[0];continue;case 7:n=u.ops.pop(),u.trys.pop();continue;default:if(a=u.trys,!(a=a.length>0&&a[a.length-1])&&(6===n[0]||2===n[0])){u=0;continue}if(3===n[0]&&(!a||n[1]>a[0]&&n[1]<a[3])){u.label=n[1];break}if(6===n[0]&&u.label<a[1]){u.label=a[1],a=n;break}if(a&&u.label<a[2]){u.label=a[2],u.ops.push(n);break}a[2]&&u.ops.pop(),u.trys.pop();continue}n=t.call(e,u)}catch(e){n=[6,e],r=0}finally{o=a=0}if(5&n[0])throw n[1];return{value:n[0]?n[1]:void 0,done:!0}}var o,r,a,s,u={label:0,sent:function(){if(1&a[0])throw a[1];return a[1]},trys:[],ops:[]};return s={next:n(0),throw:n(1),return:n(2)},"function"==typeof Symbol&&(s[Symbol.iterator]=function(){return this}),s}function c(e,t){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}function d(e){var t="function"==typeof Symbol&&e[Symbol.iterator],n=0;return t?t.call(e):{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}}}function f(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var i,o,r=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(i=r.next()).done;)a.push(i.value)}catch(e){o={error:e}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return a}function p(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(f(arguments[t]));return e}function g(e,t,n){function i(e){return function(t){return new Promise(function(n,i){g.push([e,t,n,i]),o()})}}function o(){!d&&g.length&&r((d=g.shift())[0],d[1])}function r(e,t){try{a(p[e](t))}catch(e){c(d[3],e)}}function a(e){e.done?c(d[2],e):"yield"===e.value[0]?c(d[2],{value:e.value[1],done:!1}):Promise.resolve(e.value[1]).then("delegate"===e.value[0]?s:u,l)}function s(e){a(e.done?e:{value:["yield",e.value],done:!1})}function u(e){r("next",e)}function l(e){r("throw",e)}function c(e,t){d=void 0,e(t),o()}if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var d,f,p=n.apply(e,t||[]),g=[];return f={next:i("next"),throw:i("throw"),return:i("return")},f[Symbol.asyncIterator]=function(){return this},f}function h(e){function t(t,n){return function(i){return{value:["delegate",(e[t]||n).call(e,i)],done:!1}}}var n={next:t("next"),throw:t("throw",function(e){throw e}),return:t("return",function(e){return{value:e,done:!0}})};return e=m(e),n[Symbol.iterator]=function(){return this},n}function m(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator];return t?t.call(e):"function"==typeof d?d(e):e[Symbol.iterator]()}Object.defineProperty(t,"__esModule",{value:!0}),t.__extends=i,n.d(t,"__assign",function(){return b}),t.__rest=o,t.__decorate=r,t.__param=a,t.__metadata=s,t.__awaiter=u,t.__generator=l,t.__exportStar=c,t.__values=d,t.__read=f,t.__spread=p,t.__asyncGenerator=g,t.__asyncDelegator=h,t.__asyncValues=m;var v=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},b=Object.assign||function(e){for(var t,n=1,i=arguments.length;n<i;n++){t=arguments[n];for(var o in t)Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o])}return e}},function(e,t,n){"use strict";(function(e){function i(e){return"[object Array]"===Object.prototype.toString.call(e)}function o(e){return K.default.isBrowser()&&(J||(J=document.createElement("textarea"))),J?(J.innerHTML=e,J.value):e}function r(){if(void 0===window.Promise)return!1;if(""===q.name&&""===q.version)var e=q._detect(navigator.userAgent);else var e=q;var t=navigator.userAgent||"";return!(!e.safari&&void 0===navigator.serviceWorker)&&(!(e.ios||e.ipod||e.iphone||e.ipad)&&(!e.msedge&&!e.msie&&(!(t.indexOf("FBAN")>-1||t.indexOf("FBAV")>-1)&&(!navigator.appVersion.match(/ wv/)&&(!(e.firefox&&Number(e.version)<48&&(e.mobile||e.tablet))&&(!!(e.firefox&&Number(e.version)>=44)||(!!(e.safari&&Number(e.version)>=7.1)||(!!(e.samsungBrowser&&Number(e.version)>=4)||(!!((e.chrome||e.chromium)&&Number(e.version)>=42)||(!!(e.yandexbrowser&&Number(e.version)>=15.12)||(!!(e.opera&&(e.mobile||e.tablet)&&Number(e.version)>=37||e.opera&&Number(e.version)>=42)||!!e.vivaldi)))))))))))}function a(e){var t=document.querySelectorAll(e);if(t.length>0)for(var n=0;n<t.length;n++)t[n].parentNode.removeChild(t[n])}function s(){return new Promise(function(e,t){OneSignal.initialized?e():OneSignal.once(OneSignal.EVENTS.SDK_INITIALIZED,e)})}function u(e){return JSON.stringify(e,function(e,t){return"function"==typeof t?"[Function]":t},4)}function l(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(e)return e.apply(null,t)}function c(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return G.debug("Called %c"+e+"("+t.map(u).join(", ")+")",b("code"),".")}function d(e){return!!e&&!!e.match(/(?:[a-z0-9!#$%&'*+\/=?^_`{|}~-]+(?:\.[a-z0-9!#$%&'*+\/=?^_`{|}~-]+)*|"(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21\x23-\x5b\x5d-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])*")@(?:(?:[a-z0-9](?:[a-z0-9-]*[a-z0-9])?\.)+[a-z0-9](?:[a-z0-9-]*[a-z0-9])?|\[(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?|[a-z0-9-]*[a-z0-9]:(?:[\x01-\x08\x0b\x0c\x0e-\x1f\x21-\x5a\x53-\x7f]|\\[\x01-\x09\x0b\x0c\x0e-\x7f])+)\])/)}function f(e,t,n){if("string"==typeof e)document.querySelector(e).insertAdjacentHTML(t,n);else{if("object"!=typeof e)throw new Error(e+" must be a CSS selector string or DOM Element object.");e.insertAdjacentHTML(t,n)}}function p(e){if("string"==typeof e)for(var t=document.querySelector(e);t.firstChild;)t.removeChild(t.firstChild);else{if("object"!=typeof e)throw new Error(e+" must be a CSS selector string or DOM Element object.");for(;e.firstChild;)e.removeChild(e.firstChild)}}function g(e,t){if("string"==typeof e)document.querySelector(e).classList.add(t);else{if("object"!=typeof e)throw new Error(e+" must be a CSS selector string or DOM Element object.");e.classList.add(t)}}function h(e,t){if("string"==typeof e)document.querySelector(e).classList.remove(t);else{if("object"!=typeof e)throw new Error(e+" must be a CSS selector string or DOM Element object.");e.classList.remove(t)}}function m(e,t){if("string"==typeof e)return document.querySelector(e).classList.contains(t);if("object"==typeof e)return e.classList.contains(t);throw new Error(e+" must be a CSS selector string or DOM Element object.")}function v(){return q.chrome||q.yandexbrowser||q.opera||q.vivaldi||q.samsungBrowser||q.chromium?Q.CHROME:q.firefox?Q.FIREFOX:q.safari?Q.SAFARI:void G.error("OneSignal: Unable to associate device type for browser "+q.name+" "+q.version)}function b(e){return"code"==e?'padding: 0 1px 1px 5px;border: 1px solid #ddd;border-radius: 3px;font-family: Monaco,"DejaVu Sans Mono","Courier New",monospace;color: #444;':"bold"==e?"font-weight: 600;color: rgb(51, 51, 51);":"alert"==e?"font-weight: 600;color: red;":"event"==e?"color: green;":"postmessage"==e?"color: orange;":"serviceworkermessage"==e?"color: purple;":void 0}function S(e){return new Promise(function(t){setTimeout(t,e)})}function O(){return Promise.resolve()}function _(e,t,n){var i=new Promise(function(e){return setTimeout(function(){return e("promise-timed-out")},t)});return Promise.race([e,i]).then(function(i){return"promise-timed-out"===i?(G.info(n||"Promise "+e+" timed out after "+t+" ms."),Promise.reject(n||"Promise "+e+" timed out after "+t+" ms.")):i})}function E(e,t,n){return void 0===t&&(t=O()),void 0===n&&(n=O()),e?t:n}function y(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){var n="undefined"==typeof window?e.crypto:window.crypto||window.msCrypto;if(n){var i=n.getRandomValues(new Uint8Array(1))[0]%16|0;return("x"==t?i:3&i|8).toString(16)}return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(e){var t=16*Math.random()|0;return("x"==e?t:3&t|8).toString(16)})})}function w(e,t){return!!e&&e.indexOf(t)!==-1}function P(e){for(var t in e)e.hasOwnProperty(t)&&void 0===e[t]&&delete e[t];return e}function I(e){return/^[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/.test(e)}function T(e){e=e.trim();for(var t=["http://www.","https://www.","http://","https://",".onesignal.com/",".onesignal.com"],n=0,i=t;n<i.length;n++){var o=i[n];e=e.replace(o,"")}return e.toLowerCase()}function N(e){var t=window.location.href;t=t.toLowerCase(),e=e.replace(/[\[\]]/g,"\\$&").toLowerCase();var n=new RegExp("[?&]"+e+"(=([^&#]*)|&|#|$)"),i=n.exec(t);return i?i[2]?decodeURIComponent(i[2].replace(/\+/g," ")):"":null}function C(){return G.warn("OneSignal: Wiping IndexedDB data."),Promise.all([z.default.remove("Ids"),z.default.remove("NotificationOpened"),z.default.remove("Options")])}function R(e){return e.charAt(0).toUpperCase()+e.slice(1)}function A(){return G.warn("OneSignal: Unsubscribing from push."),K.default.isServiceWorker()?self.registration.pushManager.getSubscription().then(function(e){if(e)return e.unsubscribe();throw new Error("Cannot unsubscribe because not subscribed.")}):Y.default.isUsingSubscriptionWorkaround()?new Promise(function(e,t){G.debug("Unsubscribe from push got called, and we're going to remotely execute it in HTTPS iFrame."),OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.UNSUBSCRIBE_FROM_PUSH,null,function(n){G.debug("Unsubscribe from push succesfully remotely executed."),n.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE?e():t("Failed to remotely unsubscribe from push.")})}):navigator.serviceWorker&&navigator.serviceWorker.controller?navigator.serviceWorker.ready.then(function(e){return e.pushManager}).then(function(e){return e.getSubscription()}).then(function(e){if(e)return e.unsubscribe()}):Promise.resolve()}function M(){if(G.warn("OneSignal: Unregistering service worker."),!K.default.isIframe())return navigator.serviceWorker&&navigator.serviceWorker.controller?navigator.serviceWorker.ready.then(function(e){return e.unregister()}):Promise.resolve()}function k(){return Promise.all([A(),M()])}function D(e){return new Promise(function(t){return setTimeout(t,e)})}function x(e,t){return e.substr(e.indexOf(t)+t.length)}function U(e,t,n,o){if(void 0===o&&(o=!1),t||G.error("Cannot call on() with no event: ",t),n||G.error("Cannot call on() with no task: ",n),"string"==typeof e){var r=document.querySelectorAll(e);if(r.length>0)for(var a=0;a<r.length;a++)U(r[a],t,n)}else if(i(e))for(var a=0;a<e.length;a++)U(e[a],t,n);else{if("object"!=typeof e)throw new Error(e+" must be a CSS selector string or DOM Element object.");var s=function(){return function(t){var i=function(){e.removeEventListener(t.type,s)};o||i(),n(t,i)}}();e.addEventListener(t,s)}}function H(){return window.__oneSignalSdkLoadCount||0}function L(e,t){return F.__awaiter(this,void 0,void 0,function(){return F.__generator(this,function(n){switch(n.label){case 0:return[4,new Promise(function(n,i){OneSignal.once(e,function(e){if(t){t(e)&&n(e)}else n(e)})})];case 1:return[2,n.sent()]}})})}function W(){window.__oneSignalSdkLoadCount=H()+1}function B(e){return e.replace(/\s/g,"").toLowerCase()}function j(e){function t(e){for(var t="",n=0;n<=3;n++)t+=c.charAt(e>>8*n+4&15)+c.charAt(e>>8*n&15);return t}function n(e){for(var t=1+(e.length+8>>6),n=new Array(16*t),i=0;i<16*t;i++)n[i]=0;for(var i=0;i<e.length;i++)n[i>>2]|=e.charCodeAt(i)<<i%4*8;return n[i>>2]|=128<<i%4*8,n[16*t-2]=8*e.length,n}function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t){return e<<t|e>>>32-t}function r(e,t,n,r,a,s){return i(o(i(i(t,e),i(r,s)),a),n)}function a(e,t,n,i,o,a,s){return r(t&n|~t&i,e,t,o,a,s)}function s(e,t,n,i,o,a,s){return r(t&i|n&~i,e,t,o,a,s)}function u(e,t,n,i,o,a,s){return r(t^n^i,e,t,o,a,s)}function l(e,t,n,i,o,a,s){return r(n^(t|~i),e,t,o,a,s)}var c="0123456789abcdef";return function(e){for(var o=n(e),r=1732584193,c=-271733879,d=-1732584194,f=271733878,p=0;p<o.length;p+=16){var g=r,h=c,m=d,v=f;r=a(r,c,d,f,o[p+0],7,-680876936),f=a(f,r,c,d,o[p+1],12,-389564586),d=a(d,f,r,c,o[p+2],17,606105819),c=a(c,d,f,r,o[p+3],22,-1044525330),r=a(r,c,d,f,o[p+4],7,-176418897),f=a(f,r,c,d,o[p+5],12,1200080426),d=a(d,f,r,c,o[p+6],17,-1473231341),c=a(c,d,f,r,o[p+7],22,-45705983),r=a(r,c,d,f,o[p+8],7,1770035416),f=a(f,r,c,d,o[p+9],12,-1958414417),d=a(d,f,r,c,o[p+10],17,-42063),c=a(c,d,f,r,o[p+11],22,-1990404162),r=a(r,c,d,f,o[p+12],7,1804603682),f=a(f,r,c,d,o[p+13],12,-40341101),d=a(d,f,r,c,o[p+14],17,-1502002290),c=a(c,d,f,r,o[p+15],22,1236535329),r=s(r,c,d,f,o[p+1],5,-165796510),f=s(f,r,c,d,o[p+6],9,-1069501632),d=s(d,f,r,c,o[p+11],14,643717713),c=s(c,d,f,r,o[p+0],20,-373897302),r=s(r,c,d,f,o[p+5],5,-701558691),f=s(f,r,c,d,o[p+10],9,38016083),d=s(d,f,r,c,o[p+15],14,-660478335),c=s(c,d,f,r,o[p+4],20,-405537848),r=s(r,c,d,f,o[p+9],5,568446438),f=s(f,r,c,d,o[p+14],9,-1019803690),d=s(d,f,r,c,o[p+3],14,-187363961),c=s(c,d,f,r,o[p+8],20,1163531501),r=s(r,c,d,f,o[p+13],5,-1444681467),f=s(f,r,c,d,o[p+2],9,-51403784),d=s(d,f,r,c,o[p+7],14,1735328473),c=s(c,d,f,r,o[p+12],20,-1926607734),r=u(r,c,d,f,o[p+5],4,-378558),f=u(f,r,c,d,o[p+8],11,-2022574463),d=u(d,f,r,c,o[p+11],16,1839030562),c=u(c,d,f,r,o[p+14],23,-35309556),r=u(r,c,d,f,o[p+1],4,-1530992060),f=u(f,r,c,d,o[p+4],11,1272893353),d=u(d,f,r,c,o[p+7],16,-155497632),c=u(c,d,f,r,o[p+10],23,-1094730640),r=u(r,c,d,f,o[p+13],4,681279174),f=u(f,r,c,d,o[p+0],11,-358537222),d=u(d,f,r,c,o[p+3],16,-722521979),c=u(c,d,f,r,o[p+6],23,76029189),r=u(r,c,d,f,o[p+9],4,-640364487),f=u(f,r,c,d,o[p+12],11,-421815835),d=u(d,f,r,c,o[p+15],16,530742520),c=u(c,d,f,r,o[p+2],23,-995338651),r=l(r,c,d,f,o[p+0],6,-198630844),f=l(f,r,c,d,o[p+7],10,1126891415),d=l(d,f,r,c,o[p+14],15,-1416354905),c=l(c,d,f,r,o[p+5],21,-57434055),r=l(r,c,d,f,o[p+12],6,1700485571),f=l(f,r,c,d,o[p+3],10,-1894986606),d=l(d,f,r,c,o[p+10],15,-1051523),c=l(c,d,f,r,o[p+1],21,-2054922799),r=l(r,c,d,f,o[p+8],6,1873313359),f=l(f,r,c,d,o[p+15],10,-30611744),d=l(d,f,r,c,o[p+6],15,-1560198380),c=l(c,d,f,r,o[p+13],21,1309151649),r=l(r,c,d,f,o[p+4],6,-145523070),f=l(f,r,c,d,o[p+11],10,-1120210379),d=l(d,f,r,c,o[p+2],15,718787259),c=l(c,d,f,r,o[p+9],21,-343485551),r=i(r,g),c=i(c,h),d=i(d,m),f=i(f,v)}return t(r)+t(c)+t(d)+t(f)}(e)}function V(e){function t(e){for(var t="",n=7;n>=0;n--)t+=s.charAt(e>>4*n&15);return t}function n(e){for(var t=1+(e.length+8>>6),n=new Array(16*t),i=0;i<16*t;i++)n[i]=0;for(i=0;i<e.length;i++)n[i>>2]|=e.charCodeAt(i)<<24-i%4*8;return n[i>>2]|=128<<24-i%4*8,n[16*t-1]=8*e.length,n}function i(e,t){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}function o(e,t){return e<<t|e>>>32-t}function r(e,t,n,i){return e<20?t&n|~t&i:e<40?t^n^i:e<60?t&n|t&i|n&i:t^n^i}function a(e){return e<20?1518500249:e<40?1859775393:e<60?-1894007588:-899497514}var s="0123456789abcdef";return function(e){for(var s=n(e),u=new Array(80),l=1732584193,c=-271733879,d=-1732584194,f=271733878,p=-1009589776,g=0;g<s.length;g+=16){for(var h=l,m=c,v=d,b=f,S=p,O=0;O<80;O++){u[O]=O<16?s[g+O]:o(u[O-3]^u[O-8]^u[O-14]^u[O-16],1);var _=i(i(o(l,5),r(O,c,d,f)),i(i(p,u[O]),a(O)));p=f,f=d,d=o(c,30),c=l,l=_}l=i(l,h),c=i(c,m),d=i(d,v),f=i(f,b),p=i(p,S)}return t(l)+t(c)+t(d)+t(f)+t(p)}(e)}Object.defineProperty(t,"__esModule",{value:!0});var F=n(0),G=n(2),q=n(9),K=n(3),z=n(6),Y=n(5);t.isArray=i;var J=null;t.decodeHtmlEntities=o,t.isPushNotificationsSupported=r,t.removeDomElement=a,t.awaitOneSignalInitAndSupported=s,t.stringify=u,t.executeCallback=l,t.logMethodCall=c,t.isValidEmail=d,t.addDomElement=f,t.clearDomElementChildren=p,t.addCssClass=g,t.removeCssClass=h,t.hasCssClass=m;var Q={CHROME:5,SAFARI:7,FIREFOX:8};t.getDeviceTypeForBrowser=v,t.getConsoleStyle=b,t.delay=S,t.nothing=O,t.executeAndTimeoutPromiseAfter=_,t.when=E,t.guid=y,t.contains=w,t.trimUndefined=P,t.isValidUuid=I,t.normalizeSubdomain=T,t.getUrlQueryParam=N,t.wipeIndexedDb=C,t.capitalize=R,t.unsubscribeFromPush=A,t.wipeServiceWorker=M,t.wipeServiceWorkerAndUnsubscribe=k,t.wait=D,t.substringAfter=x,t.once=U,t.getSdkLoadCount=H,t.awaitSdkEvent=L,t.incrementSdkLoadCount=W,t.prepareEmailForHashing=B,t.md5=j,t.sha1=V}).call(t,n(18))},function(e,t,n){var i,o;!function(r,a){"use strict";i=a,void 0!==(o="function"==typeof i?i.call(t,n,t,e):i)&&(e.exports=o)}(0,function(){"use strict";function e(e){return typeof console!==s&&(void 0!==console[e]?t(console,e):void 0!==console.log?t(console,"log"):a)}function t(e,t){var n=e[t];if("function"==typeof n.bind)return n.bind(e);try{return Function.prototype.bind.call(n,e)}catch(t){return function(){return Function.prototype.apply.apply(n,[e,arguments])}}}function n(e,t,n){return function(){typeof console!==s&&(i.call(this,t,n),this[e].apply(this,arguments))}}function i(e,t){for(var n=0;n<u.length;n++){var i=u[n];this[i]=n<e?a:this.methodFactory(i,e,t)}}function o(t,i,o){return e(t)||n.apply(this,arguments)}function r(e,t,n){function r(e){var t=(u[e]||"silent").toUpperCase();try{return void(window.localStorage[d]=t)}catch(e){}try{window.document.cookie=encodeURIComponent(d)+"="+t+";"}catch(e){}}function a(){var e;try{e=window.localStorage[d]}catch(e){}if(typeof e===s)try{var t=window.document.cookie,n=t.indexOf(encodeURIComponent(d)+"=");n&&(e=/^([^;]+)/.exec(t.slice(n))[1])}catch(e){}return void 0===c.levels[e]&&(e=void 0),e}var l,c=this,d="loglevel";e&&(d+=":"+e),c.levels={TRACE:0,DEBUG:1,INFO:2,WARN:3,ERROR:4,SILENT:5},c.methodFactory=n||o,c.getLevel=function(){return l},c.setLevel=function(t,n){if("string"==typeof t&&void 0!==c.levels[t.toUpperCase()]&&(t=c.levels[t.toUpperCase()]),!("number"==typeof t&&t>=0&&t<=c.levels.SILENT))throw"log.setLevel() called with invalid level: "+t;if(l=t,n!==!1&&r(t),i.call(c,t,e),typeof console===s&&t<c.levels.SILENT)return"No console available for logging"},c.setDefaultLevel=function(e){a()||c.setLevel(e,!1)},c.enableAll=function(e){c.setLevel(c.levels.TRACE,e)},c.disableAll=function(e){c.setLevel(c.levels.SILENT,e)};var f=a();null==f&&(f=null==t?"WARN":t),c.setLevel(f,!1)}var a=function(){},s="undefined",u=["trace","debug","info","warn","error"],l=new r,c={};l.getLogger=function(e){if("string"!=typeof e||""===e)throw new TypeError("You must supply a name when creating a logger.");var t=c[e];return t||(t=c[e]=new r(e,l.getLevel(),l.methodFactory)),t};var d=typeof window!==s?window.log:void 0;return l.noConflict=function(){return typeof window!==s&&window.log===l&&(window.log=d),l},l})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return Object.defineProperty(e,"SERVICE_WORKER",{get:function(){return"ServiceWorker"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"HOST",{get:function(){return"host"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"POPUP",{get:function(){return"popup"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"IFRAME",{get:function(){return"iFrame"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TEST",{get:function(){return"test"},enumerable:!0,configurable:!0}),e.getEnv=function(){return"undefined"!=typeof window?window===window.top?location.href.indexOf("initOneSignal")!==-1||"/subscribe"===location.pathname&&""===location.search&&(location.hostname.endsWith(".onesignal.com")||location.hostname.indexOf(".localhost")!==-1&&e.isDev())?e.POPUP:e.HOST:"/webPushIframe"===location.pathname||"/webPushModal"===location.pathname?e.IFRAME:e.CUSTOM_SUBDOMAIN:"undefined"!=typeof self&&void 0!==self.registration?e.SERVICE_WORKER:void 0},e.isServiceWorker=function(){return e.getEnv()===e.SERVICE_WORKER},e.isHost=function(){return e.getEnv()===e.HOST},e.isPopup=function(){return e.getEnv()===e.POPUP},Object.defineProperty(e,"CUSTOM_SUBDOMAIN",{get:function(){return"custom_subdomain"},enumerable:!0,configurable:!0}),e.isIframe=function(){return e.getEnv()===e.IFRAME},e.isBrowser=function(){return"undefined"!=typeof window},e.isStaging=function(){return!1},e.isDev=function(){return!1},e.isTest=function(){return!1},e.version=function(){return"130020"},e.isCustomSubdomain=function(){return e.getEnv()===e.CUSTOM_SUBDOMAIN},Object.defineProperty(e,"TRADITIONAL_CHINESE_LANGUAGE_TAG",{get:function(){return["tw","hant"]},enumerable:!0,configurable:!0}),Object.defineProperty(e,"SIMPLIFIED_CHINESE_LANGUAGE_TAG",{get:function(){return["cn","hans"]},enumerable:!0,configurable:!0}),e.getLanguage=function(t){var n=t||navigator.language;if(n){n=n.toLowerCase();var i=n.split("-");if("zh"==i[0]){for(var o=0,r=e.TRADITIONAL_CHINESE_LANGUAGE_TAG;o<r.length;o++){var a=r[o];if(i.indexOf(a)!==-1)return"zh-Hant"}for(var s=0,u=e.SIMPLIFIED_CHINESE_LANGUAGE_TAG;s<u.length;s++){var l=u[s];if(i.indexOf(l)!==-1)return"zh-Hans"}return"zh-Hant"}return i[0].substring(0,2)}return"en"},e.supportsServiceWorkers=function(){return"undefined"!=typeof navigator&&"serviceWorker"in navigator},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(2),o=n(3),r=n(1),a=["notifyButtonHovering","notifyButtonHover","notifyButtonButtonClick","notifyButtonLauncherClick","animatedElementHiding","animatedElementHidden","animatedElementShowing","animatedElementShown","activeAnimatedElementActivating","activeAnimatedElementActive","activeAnimatedElementInactivating","activeAnimatedElementInactive","dbRetrieved","dbSet","testEvent"],s=["onesignal.prompt.custom.clicked","onesignal.prompt.native.permissionchanged","onesignal.subscription.changed","onesignal.internal.subscriptionset","dbRebuilt","initialize","subscriptionSet","sendWelcomeNotification","subscriptionChange","notificationPermissionChange","dbSet","register","notificationDisplay","notificationDismiss","notificationClick","permissionPromptDisplay","testWouldDisplay","testInitOptionDisabled","popupWindowTimeout"],u={notificationPermissionChange:"onesignal.prompt.native.permissionchanged",subscriptionChange:"onesignal.subscription.changed",customPromptClick:"onesignal.prompt.custom.clicked"},l=function(){function e(){}return e.trigger=function(t,n,l){if(void 0===l&&(l=null),!r.contains(a,t)){var c=n;if(l)var d=r.capitalize(o.default.getEnv())+" ⬸ "+r.capitalize(l);else var d=r.capitalize(o.default.getEnv());c||c===!1?i.debug("("+d+") » %c"+t+":",r.getConsoleStyle("event"),c):i.debug("("+d+") » %c"+t,r.getConsoleStyle("event"))}if(o.default.isBrowser()){if(t===OneSignal.EVENTS.SDK_INITIALIZED){if(OneSignal.initialized)return;OneSignal.initialized=!0}OneSignal.emit(t,n)}if(u.hasOwnProperty(t)){var f=u[t];e._triggerLegacy(f,n)}if(o.default.isBrowser()&&(o.default.isPopup()||o.default.isIframe())){opener||parent?r.contains(s,t)&&(o.default.isPopup()?OneSignal.popupPostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT,{eventName:t,eventData:n}):OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT,{eventName:t,eventData:n})):i.error("Could not send event '"+t+"' back to host page because no creator (opener or parent) found!")}},e._triggerLegacy=function(e,t){var n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:t});window.dispatchEvent(n)},e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(3),r=n(2),a=n(4),s=n(6),u=n(9),l=n(1),c=n(10),d=n(17),f=n(13),p=n(30),g=n(21),h=function(){function e(){}return e.registerForW3CPush=function(e){return r.debug("Called %cregisterForW3CPush("+JSON.stringify(e)+")",l.getConsoleStyle("code")),s.default.get("Ids","registrationId").then(function(t){t&&e.fromRegisterFor&&"granted"==window.Notification.permission&&null!=navigator.serviceWorker.controller||navigator.serviceWorker.getRegistration().then(function(e){var t="";if(OneSignal.config.path&&(t=OneSignal.config.path),void 0===e)d.default.registerServiceWorker(t+OneSignal.SERVICE_WORKER_PATH);else if(e.active){var n=e.active.scriptURL;l.contains(n,t+OneSignal.SERVICE_WORKER_PATH)?s.default.get("Ids","WORKER1_ONE_SIGNAL_SW_VERSION").then(function(e){e?e!=OneSignal._VERSION?(r.info("Installing new service worker ("+e+" -> "+OneSignal._VERSION+")"),d.default.registerServiceWorker(t+OneSignal.SERVICE_WORKER_UPDATER_PATH)):d.default.registerServiceWorker(t+OneSignal.SERVICE_WORKER_PATH):d.default.registerServiceWorker(t+OneSignal.SERVICE_WORKER_UPDATER_PATH)}):l.contains(n,t+OneSignal.SERVICE_WORKER_UPDATER_PATH)?s.default.get("Ids","WORKER2_ONE_SIGNAL_SW_VERSION").then(function(e){e?e!=OneSignal._VERSION?(r.info("Installing new service worker ("+e+" -> "+OneSignal._VERSION+")"),d.default.registerServiceWorker(t+OneSignal.SERVICE_WORKER_PATH)):d.default.registerServiceWorker(t+OneSignal.SERVICE_WORKER_UPDATER_PATH):d.default.registerServiceWorker(t+OneSignal.SERVICE_WORKER_PATH)}):(r.info("Unregistering previous service worker:",e),e.unregister().then(function(e){r.info("Result of unregistering:",e),d.default.registerServiceWorker(t+OneSignal.SERVICE_WORKER_PATH)}))}else null==e.installing&&d.default.registerServiceWorker(t+OneSignal.SERVICE_WORKER_PATH)})})},e.enableNotifications=function(t){return r.debug("Called %cenableNotifications()",l.getConsoleStyle("code")),"PushManager"in window?"denied"===window.Notification.permission?void r.warn("The user has blocked notifications."):(r.debug("Calling %cnavigator.serviceWorker.ready() ...",l.getConsoleStyle("code")),void navigator.serviceWorker.ready.then(function(t){r.debug("Finished calling %cnavigator.serviceWorker.ready",l.getConsoleStyle("code")),c.default.establishServiceWorkerChannel(t),e.subscribeForPush(t)})):(r.info("Push messaging is not supported. No PushManager."),void c.default.beginTemporaryBrowserSession())},e.isUsingSubscriptionWorkaround=function(){if(!OneSignal.config)throw new Error("("+o.default.getEnv()+") isUsingSubscriptionWorkaround() cannot be called until OneSignal.config exists.");return!u.safari&&(!(e.isLocalhostAllowedAsSecureOrigin()&&"localhost"===location.hostname||"127.0.0.1"===location.hostname)&&(o.default.isHost()&&(!!OneSignal.config.subdomainName||"http:"===location.protocol)))},e.hasInsecureParentOrigin=function(){return i.__awaiter(this,void 0,void 0,function(){var e;return i.__generator(this,function(t){switch(t.label){case 0:if(window===window.top||!("serviceWorker"in navigator)||void 0===navigator.serviceWorker.getRegistration)return[2,!1];t.label=1;case 1:return t.trys.push([1,3,,4]),[4,navigator.serviceWorker.getRegistration()];case 2:return t.sent(),[2,!1];case 3:return e=t.sent(),[2,!0];case 4:return[2]}})})},e.isLocalhostAllowedAsSecureOrigin=function(){return OneSignal.config&&OneSignal.config.allowLocalhostAsSecureOrigin===!0},e.subscribeForPush=function(e){r.debug("Called %c_subscribeForPush()",l.getConsoleStyle("code"));var t="";OneSignal.getNotificationPermission().then(function(e){t=e}).then(function(){return r.debug("Calling %cServiceWorkerRegistration.pushManager.subscribe()",l.getConsoleStyle("code")),a.default.trigger(OneSignal.EVENTS.PERMISSION_PROMPT_DISPLAYED),c.default.requestNotificationPermissionPromise()}).then(function(t){if("granted"!==t)throw new p.default;return l.executeAndTimeoutPromiseAfter(e.pushManager.subscribe({userVisibleOnly:!0}),15e3,"A possible Chrome bug (https://bugs.chromium.org/p/chromium/issues/detail?id=623062) is preventing this subscription from completing.")}).then(function(e){r.debug("Finished calling %cServiceWorkerRegistration.pushManager.subscribe()",l.getConsoleStyle("code")),r.debug("Subscription details:",e),OneSignal._sessionInitAlreadyRunning=!1,sessionStorage.setItem("ONE_SIGNAL_NOTIFICATION_PERMISSION",window.Notification.permission),c.default.getAppId().then(function(t){r.debug("Finished subscribing for push via pushManager.subscribe().");var n={};if(e){if(void 0!==e.subscriptionId?n.endpointOrToken=e.subscriptionId:n.endpointOrToken=e.endpoint,e.getKey){var i=null;try{i=e.getKey("p256dh")}catch(e){}var o=null;try{o=e.getKey("auth")}catch(e){}if(i){var a=btoa(String.fromCharCode.apply(null,new Uint8Array(i)));n.p256dh=a}if(o){var s=btoa(String.fromCharCode.apply(null,new Uint8Array(o)));n.auth=s}}}else r.warn("Could not subscribe your browser for push notifications.");OneSignal._thisIsThePopup?OneSignal.popupPostmam.message(OneSignal.POSTMAM_COMMANDS.FINISH_REMOTE_REGISTRATION,{subscriptionInfo:n},function(e){if(e.data.progress===!0){r.debug("Got message from host page that remote reg. is in progress, closing popup.");opener||parent;opener&&window.close()}else r.debug("Got message from host page that remote reg. could not be finished.")}):c.default.registerWithOneSignal(t,n)})}).catch(function(e){if(OneSignal._sessionInitAlreadyRunning=!1,"Registration failed - no sender id provided"===e.message||"Registration failed - manifest empty or missing"===e.message){if(document.querySelector("link[rel=manifest]")){var t=document.querySelector("link[rel=manifest]").parentNode.tagName.toLowerCase(),n=document.querySelector("link[rel=manifest]").outerHTML,i=document.querySelector("link[rel=manifest]").href;if("head"!==t)r.warn("OneSignal: Your manifest %c"+n,l.getConsoleStyle("code"),"must be referenced in the <head> tag to be detected properly. It is currently referenced in <${manifestParentTagname}>. Please see step 3.1 at https://documentation.onesignal.com/docs/web-push-sdk-setup-https.");else{var o=new URL(i).origin,a=location.origin;a!==o?r.warn("OneSignal: Your manifest is being served from "+o+", which is different from the current page's origin of "+a+". Please serve your manifest from the same origin as your page's. If you are using a content delivery network (CDN), please add an exception so that the manifest is not served by your CDN. WordPress users, please see https://documentation.onesignal.com/docs/troubleshooting-web-push#section-wordpress-cdn-support."):r.warn("OneSignal: Please check your manifest at "+i+". The %cgcm_sender_id",l.getConsoleStyle("code"),"field is missing or invalid, and a valid value is required. Please see step 2 at https://documentation.onesignal.com/docs/web-push-sdk-setup-https.")}}else"https:"===location.protocol&&r.warn("OneSignal: You must reference a %cmanifest.json",l.getConsoleStyle("code"),"in the <head> of your page. Please see step 2 at https://documentation.onesignal.com/docs/web-push-sdk-setup-https.")}else e instanceof p.default||r.error("Error while subscribing for push:",e);OneSignal.getNotificationPermission().then(function(e){"default"===e&&(f.default.triggerNotificationPermissionChanged(!0),g.default.markHttpsNativePromptDismissed()),OneSignal._usingNativePermissionHook||f.default.triggerNotificationPermissionChanged(),opener&&OneSignal._thisIsThePopup&&window.close()}),opener&&OneSignal._thisIsThePopup&&window.close()})},e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(0),r=n(34),a=n(3),s=n(52),u=n(57),l=n(51),c=n(55),d=n(56),f=n(5),p=n(32);!function(e){e[e.SET=0]="SET"}(i||(i={}));var g=function(){function e(e){this.databaseName=e,this.emitter=new p.default,this.database=new r.default(this.databaseName)}return e.applyDbResultFilter=function(e,t,n){switch(e){case"Options":return n&&t?n.value:n&&!t?n:null;case"Ids":return n&&t?n.id:n&&!t?n:null;case"NotificationOpened":return n&&t?{data:n.data,timestamp:n.timestamp}:n&&!t?n:null;default:return n?n:null}},e.prototype.get=function(t,n){return o.__awaiter(this,void 0,void 0,function(){var i=this;return o.__generator(this,function(r){switch(r.label){case 0:return[4,new Promise(function(r){return o.__awaiter(i,void 0,void 0,function(){var i,s;return o.__generator(this,function(o){switch(o.label){case 0:return a.default.isServiceWorker()||!f.default.isUsingSubscriptionWorkaround()||a.default.isTest()?[3,1]:(OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_GET,[{table:t,key:n}],function(e){var t=e.data[0];r(t)}),[3,3]);case 1:return[4,this.database.get(t,n)];case 2:i=o.sent(),s=e.applyDbResultFilter(t,n,i),r(s),o.label=3;case 3:return[2]}})})})];case 1:return[2,r.sent()]}})})},e.prototype.put=function(t,n){return o.__awaiter(this,void 0,void 0,function(){var i=this;return o.__generator(this,function(r){switch(r.label){case 0:return[4,new Promise(function(e,r){return o.__awaiter(i,void 0,void 0,function(){return o.__generator(this,function(i){switch(i.label){case 0:return a.default.isServiceWorker()||!f.default.isUsingSubscriptionWorkaround()||a.default.isTest()?[3,1]:(OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_PUT,[{table:t,keypath:n}],function(i){i.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE?e():r("(Database) Attempted remote IndexedDB put("+t+", "+n+"), but did not get success response.")}),[3,3]);case 1:return[4,this.database.put(t,n)];case 2:i.sent(),e(),i.label=3;case 3:return[2]}})})})];case 1:return r.sent(),this.emitter.emit(e.EVENTS.SET,n),[2]}})})},e.prototype.remove=function(e,t){return a.default.isServiceWorker()||!f.default.isUsingSubscriptionWorkaround()||a.default.isTest()?this.database.remove(e,t):new Promise(function(n,i){OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_REMOVE,[{table:e,keypath:t}],function(o){o.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE?n():i("(Database) Attempted remote IndexedDB remove("+e+", "+t+"), but did not get success response.")})})},e.prototype.getAppConfig=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t,n,i,r;return o.__generator(this,function(o){switch(o.label){case 0:return e=new l.AppConfig,t=e,[4,this.get("Ids","appId")];case 1:return t.appId=o.sent(),n=e,[4,this.get("Options","subdomain")];case 2:return n.subdomain=o.sent(),i=e,[4,this.get("Options","autoRegister")];case 3:return i.autoRegister=o.sent(),r=e,[4,this.get("Options","serviceWorkerConfig")];case 4:return r.serviceWorkerConfig=o.sent(),[2,e]}})})},e.prototype.setAppConfig=function(e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return e.appId?[4,this.put("Ids",{type:"appId",id:e.appId})]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.subdomain?[4,this.put("Options",{key:"subdomain",value:e.subdomain})]:[3,4];case 3:t.sent(),t.label=4;case 4:return e.autoRegister?[4,this.put("Options",{key:"autoRegister",value:e.autoRegister})]:[3,6];case 5:t.sent(),t.label=6;case 6:return e.serviceWorkerConfig?[4,this.put("Options",{key:"serviceWorkerConfig",value:e.serviceWorkerConfig})]:[3,8];case 7:t.sent(),t.label=8;case 8:return[2]}})})},e.prototype.getAppState=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t,n,i,r;return o.__generator(this,function(o){switch(o.label){case 0:return e=new s.AppState,t=e,[4,this.get("Options","defaultUrl")];case 1:return t.defaultNotificationUrl=o.sent(),n=e,[4,this.get("Options","defaultTitle")];case 2:return n.defaultNotificationTitle=o.sent(),i=e,[4,this.get("Options","isPushEnabled")];case 3:return i.lastKnownPushEnabled=o.sent(),r=e,[4,this.get("NotificationOpened")];case 4:return r.clickedNotifications=o.sent(),[2,e]}})})},e.prototype.setAppState=function(e){return o.__awaiter(this,void 0,void 0,function(){var t,n,i,r,a;return o.__generator(this,function(o){switch(o.label){case 0:return e.defaultNotificationUrl?[4,this.put("Options",{key:"defaultUrl",value:e.defaultNotificationUrl})]:[3,2];case 1:o.sent(),o.label=2;case 2:return e.defaultNotificationTitle||""===e.defaultNotificationTitle?[4,this.put("Options",{key:"defaultTitle",value:e.defaultNotificationTitle})]:[3,4];case 3:o.sent(),o.label=4;case 4:return null==e.lastKnownPushEnabled?[3,6]:[4,this.put("Options",{key:"isPushEnabled",value:e.lastKnownPushEnabled})];case 5:o.sent(),o.label=6;case 6:if(!e.clickedNotifications)return[3,12];t=Object.keys(e.clickedNotifications),n=0,i=t,o.label=7;case 7:return n<i.length?(r=i[n],a=e.clickedNotifications[r],a?[4,this.put("NotificationOpened",{url:r,data:a.data,timestamp:a.timestamp})]:[3,9]):[3,12];case 8:return o.sent(),[3,11];case 9:return null!==a?[3,11]:[4,this.remove("NotificationOpened",r)];case 10:o.sent(),o.label=11;case 11:return n++,[3,7];case 12:return[2]}})})},e.prototype.getServiceWorkerConfig=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t,n,i,r;return o.__generator(this,function(o){switch(o.label){case 0:return e=new c.ServiceWorkerConfig,t=e,[4,this.get("Options","workerScope")];case 1:return t.scope=o.sent(),n=e,[4,this.get("Options","workerName")];case 2:return n.workerName=o.sent(),i=e,[4,this.get("Options","updaterWorkerName")];case 3:return i.updaterWorkerName=o.sent(),r=e,[4,this.get("Options","workerFilePath")];case 4:return r.workerFilePath=o.sent(),[2,e]}})})},e.prototype.setServiceWorkerConfig=function(e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return e.scope?[4,this.put("Options",{key:"workerScope",value:e.scope})]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.workerName?[4,this.put("Options",{key:"workerName",value:e.workerName})]:[3,4];case 3:t.sent(),t.label=4;case 4:return e.updaterWorkerName?[4,this.put("Options",{key:"updaterWorkerName",value:e.updaterWorkerName})]:[3,6];case 5:t.sent(),t.label=6;case 6:return e.workerFilePath?[4,this.put("Options",{key:"workerFilePath",value:e.workerFilePath})]:[3,8];case 7:t.sent(),t.label=8;case 8:return[2]}})})},e.prototype.getServiceWorkerState=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t,n,i;return o.__generator(this,function(o){switch(o.label){case 0:return e=new d.ServiceWorkerState,t=e,[4,this.get("Ids","WORKER1_ONE_SIGNAL_SW_VERSION")];case 1:return t.workerVersion=o.sent(),n=e,[4,this.get("Ids","WORKER2_ONE_SIGNAL_SW_VERSION")];case 2:return n.updaterWorkerVersion=o.sent(),i=e,[4,this.get("Ids","backupNotification")];case 3:return i.backupNotification=o.sent(),[2,e]}})})},e.prototype.setServiceWorkerState=function(e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return e.workerVersion?[4,this.put("Ids",{type:"WORKER1_ONE_SIGNAL_SW_VERSION",id:e.workerVersion})]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.updaterWorkerVersion?[4,this.put("Ids",{type:"WORKER2_ONE_SIGNAL_SW_VERSION",id:e.updaterWorkerVersion})]:[3,4];case 3:t.sent(),t.label=4;case 4:return e.backupNotification?[4,this.put("Ids",{type:"backupNotification",id:e.backupNotification})]:[3,6];case 5:t.sent(),t.label=6;case 6:return[2]}})})},e.prototype.getSubscription=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t,n,i,r,a;return o.__generator(this,function(o){switch(o.label){case 0:return e=new u.Subscription,t=e,[4,this.get("Ids","userId")];case 1:return t.deviceId=o.sent(),n=e,[4,this.get("Options","subscriptionEndpoint")];case 2:return n.pushEndpoint=o.sent(),i=e,[4,this.get("Ids","registrationId")];case 3:return i.pushToken=o.sent(),[4,this.get("Options","optedOut")];case 4:return r=o.sent(),[4,this.get("Options","subscription")];case 5:return a=o.sent(),e.optedOut=null!=r?r:null!=a&&!a,[2,e]}})})},e.prototype.setSubscription=function(e){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(t){switch(t.label){case 0:return e.deviceId?[4,this.put("Ids",{type:"userId",id:e.deviceId})]:[3,2];case 1:t.sent(),t.label=2;case 2:return e.pushEndpoint?[4,this.put("Options",{key:"subscriptionEndpoint",value:e.pushEndpoint})]:[3,4];case 3:t.sent(),t.label=4;case 4:return e.pushToken?[4,this.put("Ids",{type:"registrationId",id:e.pushToken})]:[3,6];case 5:t.sent(),t.label=6;case 6:return null==e.optedOut?[3,8]:[4,this.put("Options",{key:"optedOut",value:e.optedOut})];case 7:t.sent(),t.label=8;case 8:return[2]}})})},e.prototype.rebuild=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(e){return[2,Promise.all([this.remove("Ids"),this.remove("NotificationOpened"),this.remove("Options")])]})})},e.prototype.printIds=function(){return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(e){return[2,Promise.all([this.get("Ids","appId"),this.get("Ids","registrationId"),this.get("Ids","userId")]).then(function(e){var t=e[0],n=e[1],i=e[2];console.table?console.table({"OneSignal Database IDs":{"App ID":t,"Registration ID":n,"User ID":i}}):(log.info("App ID:",t),log.info("Registration ID:",n),log.info("User ID:",i))})]})})},e.ensureSingletonInstance=function(){e.databaseInstanceName||(e.databaseInstanceName="ONE_SIGNAL_SDK_DB"),e.databaseInstance||(e.databaseInstance=new e(e.databaseInstanceName))},e.on=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.emitter.on.apply(e.databaseInstance.emitter,t)]})})},e.setSubscription=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.setSubscription.apply(e.databaseInstance,t)]})})},e.getSubscription=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.getSubscription.apply(e.databaseInstance,t)]})})},e.setServiceWorkerState=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.setServiceWorkerState.apply(e.databaseInstance,t)]})})},e.getServiceWorkerState=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.getServiceWorkerState.apply(e.databaseInstance,t)]})})},e.setServiceWorkerConfig=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.setServiceWorkerConfig.apply(e.databaseInstance,t)]})})},e.getServiceWorkerConfig=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.getServiceWorkerConfig.apply(e.databaseInstance,t)]})})},e.setAppState=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.setAppState.apply(e.databaseInstance,t)]})})},e.getAppState=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.getAppState.apply(e.databaseInstance,t)]})})},e.setAppConfig=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.setAppConfig.apply(e.databaseInstance,t)]})})},e.getAppConfig=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.getAppConfig.apply(e.databaseInstance,t)]})})},e.remove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.remove.apply(e.databaseInstance,t)]})})},e.put=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.put.apply(e.databaseInstance,t)]})})},e.get=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return o.__awaiter(this,void 0,void 0,function(){return o.__generator(this,function(n){return e.ensureSingletonInstance(),[2,e.databaseInstance.get.apply(e.databaseInstance,t)]})})},e}();g.EVENTS=i,t.default=g},function(e,t,n){"use strict";function i(e){if(null===e||void 0===e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}var o=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},n=0;n<10;n++)t["_"+String.fromCharCode(n)]=n;if("0123456789"!==Object.getOwnPropertyNames(t).map(function(e){return t[e]}).join(""))return!1;var i={};return"abcdefghijklmnopqrst".split("").forEach(function(e){i[e]=e}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},i)).join("")}catch(e){return!1}}()?Object.assign:function(e,t){for(var n,a,s=i(e),u=1;u<arguments.length;u++){n=Object(arguments[u]);for(var l in n)o.call(n,l)&&(s[l]=n[l]);if(Object.getOwnPropertySymbols){a=Object.getOwnPropertySymbols(n);for(var c=0;c<a.length;c++)r.call(n,a[c])&&(s[a[c]]=n[a[c]])}}return s}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3);t.DEV_HOST="https://oregon:3001",t.DEV_FRAME_HOST="https://washington.localhost:3001",t.DEV_PREFIX="Dev-",t.PROD_HOST="https://onesignal.com",t.STAGING_HOST="https://onesignal-staging.pw",t.STAGING_FRAME_HOST="https://washington.onesignal-staging.pw",t.STAGING_PREFIX="Staging-";var o;t.HOST_URL=o;var r;t.API_URL=r,i.default.isDev()?(t.HOST_URL=o=t.DEV_HOST,t.API_URL=r=t.DEV_HOST+"/api/v1/"):i.default.isStaging()?(t.HOST_URL=o=t.STAGING_HOST,t.API_URL=r=t.STAGING_HOST+"/api/v1/"):(t.HOST_URL=o=t.PROD_HOST,t.API_URL=r=t.PROD_HOST+"/api/v1/")},function(e,t,n){!function(t,i){void 0!==e&&e.exports?e.exports=i():n(70)("bowser",i)}(0,function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}var n,i=t(/(ipod|iphone|ipad)/i).toLowerCase(),o=/like android/i.test(e),r=!o&&/android/i.test(e),s=/nexus\s*[0-6]\s*/i.test(e),u=!s&&/nexus\s*[0-9]+/i.test(e),l=/CrOS/.test(e),c=/silk/i.test(e),d=/sailfish/i.test(e),f=/tizen/i.test(e),p=/(web|hpw)os/i.test(e),g=/windows phone/i.test(e),h=(/SamsungBrowser/i.test(e),!g&&/windows/i.test(e)),m=!i&&!c&&/macintosh/i.test(e),v=!r&&!d&&!f&&!p&&/linux/i.test(e),b=t(/edge\/(\d+(\.\d+)?)/i),S=t(/version\/(\d+(\.\d+)?)/i),O=/tablet/i.test(e),_=!O&&/[^-]mobi/i.test(e),E=/xbox/i.test(e);/opera/i.test(e)?n={name:"Opera",opera:a,version:S||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr|opios/i.test(e)?n={name:"Opera",opera:a,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||S}:/SamsungBrowser/i.test(e)?n={name:"Samsung Internet for Android",samsungBrowser:a,version:S||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?n={name:"Opera Coast",coast:a,version:S||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?n={name:"Yandex Browser",yandexbrowser:a,version:S||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?n={name:"UC Browser",ucbrowser:a,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?n={name:"Maxthon",maxthon:a,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?n={name:"Epiphany",epiphany:a,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?n={name:"Puffin",puffin:a,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?n={name:"Sleipnir",sleipnir:a,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?n={name:"K-Meleon",kMeleon:a,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:g?(n={name:"Windows Phone",windowsphone:a},b?(n.msedge=a,n.version=b):(n.msie=a,n.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?n={name:"Internet Explorer",msie:a,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:l?n={name:"Chrome",chromeos:a,chromeBook:a,chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/chrome.+? edge/i.test(e)?n={name:"Microsoft Edge",msedge:a,version:b}:/vivaldi/i.test(e)?n={name:"Vivaldi",vivaldi:a,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||S}:d?n={name:"Sailfish",sailfish:a,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?n={name:"SeaMonkey",seamonkey:a,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(n={name:"Firefox",firefox:a,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(n.firefoxos=a)):c?n={name:"Amazon Silk",silk:a,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?n={name:"PhantomJS",phantom:a,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?n={name:"SlimerJS",slimer:a,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?n={name:"BlackBerry",blackberry:a,version:S||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:p?(n={name:"WebOS",webos:a,version:S||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(n.touchpad=a)):/bada/i.test(e)?n={name:"Bada",bada:a,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:f?n={name:"Tizen",tizen:a,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||S}:/qupzilla/i.test(e)?n={name:"QupZilla",qupzilla:a,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||S}:/chromium/i.test(e)?n={name:"Chromium",chromium:a,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||S}:/chrome|crios|crmo/i.test(e)?n={name:"Chrome",chrome:a,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:r?n={name:"Android",version:S}:/safari|applewebkit/i.test(e)?(n={name:"Safari",safari:a},S&&(n.version=S)):i?(n={name:"iphone"==i?"iPhone":"ipad"==i?"iPad":"iPod"},S&&(n.version=S)):n=/googlebot/i.test(e)?{name:"Googlebot",googlebot:a,version:t(/googlebot\/(\d+(\.\d+))/i)||S}:{name:t(/^(.*)\/(.*) /),version:function(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}(/^(.*)\/(.*) /)},!n.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(n.name=n.name||"Blink",n.blink=a):(n.name=n.name||"Webkit",n.webkit=a),!n.version&&S&&(n.version=S)):!n.opera&&/gecko\//i.test(e)&&(n.name=n.name||"Gecko",n.gecko=a,n.version=n.version||t(/gecko\/(\d+(\.\d+)?)/i)),n.msedge||!r&&!n.silk?i?(n[i]=a,n.ios=a):m?n.mac=a:E?n.xbox=a:h?n.windows=a:v&&(n.linux=a):n.android=a;var y="";n.windowsphone?y=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):i?(y=t(/os (\d+([_\s]\d+)*) like mac os x/i),y=y.replace(/[_\s]/g,".")):r?y=t(/android[ \/-](\d+(\.\d+)*)/i):n.webos?y=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):n.blackberry?y=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):n.bada?y=t(/bada\/(\d+(\.\d+)*)/i):n.tizen&&(y=t(/tizen[\/\s](\d+(\.\d+)*)/i)),y&&(n.osversion=y);var w=y.split(".")[0];return O||u||"ipad"==i||r&&(3==w||w>=4&&!_)||n.silk?n.tablet=a:(_||"iphone"==i||"ipod"==i||r||s||n.blackberry||n.webos||n.bada)&&(n.mobile=a),n.msedge||n.msie&&n.version>=10||n.yandexbrowser&&n.version>=15||n.vivaldi&&n.version>=1||n.chrome&&n.version>=20||n.samsungBrowser&&n.version>=4||n.firefox&&n.version>=20||n.safari&&n.version>=6||n.opera&&n.version>=10||n.ios&&n.osversion&&n.osversion.split(".")[0]>=6||n.blackberry&&n.version>=10.1||n.chromium&&n.version>=20?n.a=a:n.msie&&n.version<10||n.chrome&&n.version<20||n.firefox&&n.version<20||n.safari&&n.version<6||n.opera&&n.version<10||n.ios&&n.osversion&&n.osversion.split(".")[0]<6||n.chromium&&n.version<20?n.c=a:n.x=a,n}function t(e){return e.split(".").length}function n(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)i.push(t(e[n]));return i}function i(e){for(var i=Math.max(t(e[0]),t(e[1])),o=n(e,function(e){var o=i-t(e);return e+=new Array(o+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--i>=0;){if(o[0][i]>o[1][i])return 1;if(o[0][i]!==o[1][i])return-1;if(0===i)return 0}}function o(t,n,o){var r=s;"string"==typeof n&&(o=n,n=void 0),void 0===n&&(n=!1),o&&(r=e(o));var a=""+r.version;for(var u in t)if(t.hasOwnProperty(u)&&r[u])return i([a,t[u]])<0;return n}function r(e,t,n){return!o(e,t,n)}var a=!0,s=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return s.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in s)return!0}return!1},s.isUnsupportedBrowser=o,s.compareVersions=i,s.check=r,s._detect=e,s})},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(8),r=n(3),a=n(15),s=n(2),u=n(4),l=n(6),c=n(9),d=n(1),f=n(7),p=n(25),g=n(24),h=n(50),m=n(16),v=n(5),b=n(13),S=n(12),O=function(){function t(){}return t.fixWordpressManifestIfMisplaced=function(){var e=document.querySelectorAll("link[rel=manifest]");if(e&&!(e.length<=1))for(var t=0;t<e.length;t++){var n=e[t],i=n.href;d.contains(i,"gcm_sender_id")&&(document.querySelector("head").insertBefore(n,document.querySelector("head").children[0]),s.info("OneSignal: Moved the WordPress push <manifest> to the first element in <head>."))}},t.getNotificationTypeFromOptIn=function(e){return 1==e||null==e?1:-2},t.getNotificationPermission=function(e){return d.awaitOneSignalInitAndSupported().then(function(){return new Promise(function(t,n){v.default.isUsingSubscriptionWorkaround()?OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION,{safariWebId:e},function(e){var n=e.data;t(n)}):c.safari?e?t(window.safari.pushNotification.permission(e).permission):s.debug("OneSignal: Invalid init option safari_web_id %c"+e,d.getConsoleStyle("code"),". Please pass in a valid safari_web_id to OneSignal init."):t(window.Notification.permission)})})},t.beginTemporaryBrowserSession=function(){if(s.debug("OneSignal: Marking browser session as continuing."),sessionStorage.setItem("ONE_SIGNAL_SESSION","true"),r.default.isPopup()){if(!OneSignal.popupPostmam)return;OneSignal.popupPostmam.message(OneSignal.POSTMAM_COMMANDS.BEGIN_BROWSING_SESSION)}},t.isUsingHttpPermissionRequest=function(){return OneSignal.config.httpPermissionRequest&&1==OneSignal.config.httpPermissionRequest.enable&&(r.default.isIframe()||r.default.isHost()&&v.default.isUsingSubscriptionWorkaround())},t.isUsingCustomHttpPermissionRequestPostModal=function(){return OneSignal.config.httpPermissionRequest&&1==OneSignal.config.httpPermissionRequest.useCustomModal},t.wasHttpsNativePromptDismissed=function(){return"dismissed"===g.get("onesignal-notification-prompt")},t.markHttpPopoverShown=function(){sessionStorage.setItem("ONESIGNAL_HTTP_PROMPT_SHOWN","true")},t.isHttpPromptAlreadyShown=function(){return"true"==sessionStorage.getItem("ONESIGNAL_HTTP_PROMPT_SHOWN")},t.isContinuingBrowserSession=function(){return"true"==sessionStorage.getItem("ONE_SIGNAL_SESSION")},t.registerWithOneSignal=function(e,n){var i=d.getDeviceTypeForBrowser();return Promise.all([OneSignal.getUserId(),OneSignal.getSubscription()]).then(function(o){var s=o[0],u=o[1],d=s?"players/"+s+"/on_session":"players",f={app_id:e,device_type:i,language:r.default.getLanguage(),timezone:(new Date).getTimezoneOffset()*-60,device_model:navigator.platform+" "+c.name,device_os:c.version,sdk:OneSignal._VERSION,notification_types:t.getNotificationTypeFromOptIn(u)};if(n){f.identifier=n.endpointOrToken;var p=n.endpointOrToken.replace(new RegExp("^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)"),"");l.default.put("Ids",{type:"registrationId",id:p}),n.auth&&(f.web_auth=n.auth),n.p256dh&&(f.web_p256=n.p256dh)}return a.default.post(d,f)}).then(function(e){var n=e.id;if(t.beginTemporaryBrowserSession(),n)return l.default.put("Ids",{type:"userId",id:n})}).then(function(){u.default.trigger(OneSignal.EVENTS.REGISTERED),v.default.isUsingSubscriptionWorkaround()||b.default.checkAndTriggerSubscriptionChanged()})},t.checkAndTriggerNotificationPermissionChanged=function(){Promise.all([l.default.get("Options","notificationPermission"),OneSignal.getNotificationPermission()]).then(function(e){var t=e[0],n=e[1];t!==n&&b.default.triggerNotificationPermissionChanged().then(function(){return l.default.put("Options",{key:"notificationPermission",value:n})})})},t.requestNotificationPermissionPromise=function(){return new Promise(function(e){return window.Notification.requestPermission(e)})},t.showNotifyButton=function(){r.default.isBrowser()&&!OneSignal.notifyButton&&(OneSignal.config.notifyButton=OneSignal.config.notifyButton||{},OneSignal.config.bell&&(f(OneSignal.config.bell,OneSignal.config.notifyButton),f(OneSignal.config.notifyButton,OneSignal.config.bell)),OneSignal.config.notifyButton.displayPredicate&&"function"==typeof OneSignal.config.notifyButton.displayPredicate?Promise.resolve(OneSignal.config.notifyButton.displayPredicate()).then(function(e){e!==!1?(OneSignal.notifyButton=new m.default(OneSignal.config.notifyButton),OneSignal.notifyButton.create()):s.debug("Notify button display predicate returned false so not showing the notify button.")}):(OneSignal.notifyButton=new m.default(OneSignal.config.notifyButton),OneSignal.notifyButton.create()))},t.getPrefixedServiceWorkerNameForEnv=function(){r.default.isDev()?(OneSignal.SERVICE_WORKER_PATH=o.DEV_PREFIX+"OneSignalSDKWorker.js",OneSignal.SERVICE_WORKER_UPDATER_PATH=o.DEV_PREFIX+"OneSignalSDKUpdaterWorker.js"):r.default.isStaging()&&(OneSignal.SERVICE_WORKER_PATH=o.STAGING_PREFIX+"OneSignalSDKWorker.js",OneSignal.SERVICE_WORKER_UPDATER_PATH=o.STAGING_PREFIX+"OneSignalSDKUpdaterWorker.js")},t.checkAndDoHttpPermissionRequest=function(){var e=this;s.debug("Called %ccheckAndDoHttpPermissionRequest()",d.getConsoleStyle("code")),this.isUsingHttpPermissionRequest()&&(OneSignal.config.autoRegister?OneSignal.showHttpPermissionRequest({_sdkCall:!0}).then(function(t){"granted"!==t||e.isUsingCustomHttpPermissionRequestPostModal()||(s.debug("Showing built-in post HTTP permission request in-page modal because permission is granted and not using custom modal."),e.showHttpPermissionRequestPostModal(OneSignal.config.httpPermissionRequest))}):u.default.trigger(OneSignal.EVENTS.TEST_INIT_OPTION_DISABLED))},t.getNotificationIcons=function(){return i.__awaiter(this,void 0,void 0,function(){var n,o,r,a;return i.__generator(this,function(i){switch(i.label){case 0:return[4,t.getAppId()];case 1:if(!(n=i.sent()))throw new S.InvalidStateError(S.InvalidStateReason.MissingAppId);return o=OneSignal._API_URL+"apps/"+n+"/icon",[4,e(o)];case 2:return r=i.sent(),[4,r.json()];case 3:if(a=i.sent(),a.errors)throw s.error("API call %c"+o,d.getConsoleStyle("code"),"failed with:",a.errors),new Error("Failed to get notification icons.");return[2,a]}})})},t.establishServiceWorkerChannel=function(e){OneSignal._channel&&(OneSignal._channel.off("data"),OneSignal._channel.off("notification.displayed"),OneSignal._channel.off("notification.clicked")),OneSignal._channel=p.at(e?e.active:null),OneSignal._channel.on("data",function(e,t){s.debug("%c"+d.capitalize(r.default.getEnv())+" ⬸ ServiceWorker:",d.getConsoleStyle("serviceworkermessage"),t,e)}),OneSignal._channel.on("notification.displayed",function(e,t){u.default.trigger(OneSignal.EVENTS.NOTIFICATION_DISPLAYED,t)}),OneSignal._channel.on("notification.clicked",function(e,t){return i.__awaiter(this,void 0,void 0,function(){var e;return i.__generator(this,function(n){switch(n.label){case 0:return 0!==OneSignal.getListeners(OneSignal.EVENTS.NOTIFICATION_CLICKED).length?[3,2]:(s.debug("notification.clicked event received, but no event listeners; storing event in IndexedDb for later retrieval."),e=t.url,t.url||(e=location.href),[4,l.default.put("NotificationOpened",{url:e,data:t,timestamp:Date.now()})]);case 1:return n.sent(),[3,3];case 2:u.default.trigger(OneSignal.EVENTS.NOTIFICATION_CLICKED,t),n.label=3;case 3:return[2]}})})}),OneSignal._channel.on("command.redirect",function(e,t){s.debug(r.default.getEnv()+" Picked up command.redirect to "+t+", forwarding to host page.",OneSignal.iframePostmam),OneSignal.iframePostmam&&OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.SERVICEWORKER_COMMAND_REDIRECT,t)}),OneSignal._channel.on("notification.dismissed",function(e,t){u.default.trigger(OneSignal.EVENTS.NOTIFICATION_DISMISSED,t)})},t.getNormalizedSubdomain=function(e){if(e)return d.normalizeSubdomain(e)},t.getPromptOptionsQueryString=function(){var e=OneSignal.config.promptOptions,n="";if(e)for(var i=t.getPromptOptionsPostHash(),o=0,r=Object.keys(i);o<r.length;o++){var a=r[o],s=i[a];n+="&"+a+"="+s}return n},t.showHttpPermissionRequestPostModal=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return[4,OneSignal.context.dynamicResourceLoader.loadSdkStylesheet()];case 1:return 0!==(t=n.sent())?(s.debug("Not showing HTTP permission request post-modal because styles failed to load."),[2]):(OneSignal.httpPermissionRequestPostModal=new h.default(e),OneSignal.httpPermissionRequestPostModal.create(),[2])}})})},t.getPromptOptionsPostHash=function(){var e=OneSignal.config.promptOptions;if(e){for(var t={exampleNotificationTitleDesktop:"exampleNotificationTitle",exampleNotificationMessageDesktop:"exampleNotificationMessage",exampleNotificationTitleMobile:"exampleNotificationTitle",exampleNotificationMessageMobile:"exampleNotificationMessage"},n=0,i=Object.keys(t);n<i.length;n++){var o=i[n],r=t[o];e[o]&&(e[r]=e[o])}for(var a=["autoAcceptTitle","siteName","autoAcceptTitle","subscribeText","showGraphic","actionMessage","exampleNotificationTitle","exampleNotificationMessage","exampleNotificationCaption","acceptButtonText","cancelButtonText","timeout"],s={},u=0;u<a.length;u++){var l=a[u],c=e[l],d=encodeURIComponent(c);(c||c===!1||""===c)&&(s[l]=d)}}return s},t.triggerCustomPromptClicked=function(e){u.default.trigger(OneSignal.EVENTS.CUSTOM_PROMPT_CLICKED,{result:e})},t.autoCorrectSubdomain=function(e){var n=t.getNormalizedSubdomain(e);return n!==e&&s.info("Auto-corrected subdomain '"+e+"' to '"+n+"'."),n},t.createHiddenDomIFrame=function(e,t){var n=document.createElement("iframe");return n.style.display="none",e||(e="about:blank"),n.src=e,t&&(n.name=t),document.body.appendChild(n),n},t.createHiddenSubscriptionDomModal=function(e){var t=document.createElement("div");t.setAttribute("id","OneSignal-iframe-modal"),t.setAttribute("style","display:none !important"),t.innerHTML='<div id="notif-permission" style="background: rgba(0, 0, 0, 0.7); position: fixed; top: 0; left: 0; right: 0; bottom: 0; z-index: 3000000000; display: flex; align-items: center; justify-content: center;"></div>',document.body.appendChild(t);var n=document.createElement("style");n.innerHTML="@media (max-width: 560px) { .OneSignal-permission-iframe { width: 100%; height: 100%;} }",document.getElementsByTagName("head")[0].appendChild(n);var i=document.createElement("iframe");return i.className="OneSignal-permission-iframe",i.setAttribute("frameborder","0"),i.width=OneSignal._windowWidth.toString(),i.height=OneSignal._windowHeight.toString(),i.src=e,document.getElementById("notif-permission").appendChild(i),i},t.showSubscriptionDomModal=function(){document.getElementById("OneSignal-iframe-modal").setAttribute("style","")},t.openWindowViaPost=function(e,t,n){var i=document.createElement("form");i.action=e,i.method="POST",i.target="onesignal-http-popup";var o=void 0!=window.screenLeft?window.screenLeft:screen.left,r=void 0!=window.screenTop?window.screenTop:screen.top,a=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width,s=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height,u=OneSignal._windowWidth,l=OneSignal._windowHeight,c=a/2-u/2+o,d=s/2-l/2+r;n&&(n.childWidth&&(u=n.childWidth),n.childHeight&&(l=n.childHeight),n.left&&(c=n.left),n.top&&(d=n.top));var f=window.open("about:blank","onesignal-http-popup","'scrollbars=yes, width="+u+", height="+l+", top="+d+", left="+c);if(t)for(var p in t){var g=document.createElement("textarea");g.name=p,g.value="object"==typeof t[p]?JSON.stringify(t[p]):t[p],i.appendChild(g)}return i.style.display="none",document.body.appendChild(i),i.submit(),document.body.removeChild(i),f},t.openSubdomainPopup=function(e,n,i){return t.openWindowViaPost(e,n,i)},t.getAppId=function(){return OneSignal.config.appId?Promise.resolve(OneSignal.config.appId):l.default.get("Ids","appId")},t}();t.default=O}).call(t,n(23))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(62),r=function(e){function t(t){return e.call(this,t)||this}return i.__extends(t,e),t}(o);t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(0),r=n(11),a=n(33);!function(e){e[e.MissingAppId=0]="MissingAppId",e[e.RedundantPermissionMessage=1]="RedundantPermissionMessage",e[e.PushPermissionAlreadyGranted=2]="PushPermissionAlreadyGranted",e[e.UnsupportedEnvironment=3]="UnsupportedEnvironment",e[e.MissingDomElement=4]="MissingDomElement"}(i=t.InvalidStateReason||(t.InvalidStateReason={}));var InvalidStateError=function(e){function InvalidStateError(t,n){var o=this;switch(t){case i.MissingAppId:o=e.call(this,"Missing required app ID.")||this;break;case i.RedundantPermissionMessage:var r="";n.permissionPromptType&&(r="("+a.PermissionPromptType[n.permissionPromptType]+")"),o=e.call(this,"Another permission message "+r+" is being displayed.")||this;break;case i.PushPermissionAlreadyGranted:o=e.call(this,"Push permission has already been granted.")||this;break;case i.UnsupportedEnvironment:o=e.call(this,"The current environment does not support this operation.")||this}return o.description=i[t],o.reason=t,o}return o.__extends(InvalidStateError,e),InvalidStateError}(r.default);t.InvalidStateError=InvalidStateError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(15),r=n(2),a=n(14),s=n(4),u=n(6),l=n(1),c=n(10),d=function(){function e(){}return e.onNotificationPermissionChange=function(t){e.checkAndTriggerSubscriptionChanged()},e.onInternalSubscriptionSet=function(e){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(t){return a.default.put("subscription.optedOut",e),[2]})})},e.checkAndTriggerSubscriptionChanged=function(){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,a;return i.__generator(this,function(i){switch(i.label){case 0:return l.logMethodCall("checkAndTriggerSubscriptionChanged"),[4,OneSignal.isPushNotificationsEnabled()];case 1:return t=i.sent(),[4,u.default.getAppState()];case 2:return n=i.sent(),(o=n.lastKnownPushEnabled,a=null===o||t!==o)?(r.info("The user's subscription state changed from "+(null===o?"(not stored)":o)+" ⟶ "+t),n.lastKnownPushEnabled=t,[4,u.default.setAppState(n)]):[2];case 3:return i.sent(),e.triggerSubscriptionChanged(t),[2]}})})},e._onSubscriptionChanged=function(e){if(OneSignal.__doNotShowWelcomeNotification)return void r.debug("Not showing welcome notification because user state was reset.");e===!0&&Promise.all([OneSignal.getUserId(),c.default.getAppId()]).then(function(e){var t=e[0],n=e[1],i=OneSignal.config.welcomeNotification,a=void 0!==i&&i.disable===!0,u=void 0!==i&&void 0!==i.title&&null!==i.title?i.title:"",c=void 0!==i&&void 0!==i.message&&null!==i.message&&i.message.length>0?i.message:"Thanks for subscribing!",d=new URL(location.href).origin+"?_osp=do_not_open",f=i&&i.url&&i.url.length>0?i.url:d;u=l.decodeHtmlEntities(u),c=l.decodeHtmlEntities(c),a||(r.debug("Sending welcome notification."),o.default.sendNotification(n,[t],{en:u},{en:c},f,null,{__isOneSignalWelcomeNotification:!0},void 0),s.default.trigger(OneSignal.EVENTS.WELCOME_NOTIFICATION_SENT,{title:u,message:c,url:f}))})},e.triggerNotificationPermissionChanged=function(e){void 0===e&&(e=!1);var t,n;return Promise.all([OneSignal.getNotificationPermission(),u.default.get("Options","notificationPermission")]).then(function(i){var o=i[0],r=i[1];if(t=o,n=o!==r||e)return u.default.put("Options",{key:"notificationPermission",value:o})}).then(function(){n&&s.default.trigger(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,{to:t})})},e.triggerSubscriptionChanged=function(e){s.default.trigger(OneSignal.EVENTS.SUBSCRIPTION_CHANGED,e)},e.fireStoredNotificationClicks=function(e){return void 0===e&&(e=document.URL),i.__awaiter(this,void 0,void 0,function(){function t(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,r;return i.__generator(this,function(i){switch(i.label){case 0:return[4,u.default.getAppState()];case 1:return t=i.sent(),t.clickedNotifications[e.url]=null,[4,u.default.setAppState(t)];case 2:return i.sent(),(n=e.data,o=e.timestamp,o&&(r=(Date.now()-o)/1e3/60)>5)?[2]:(s.default.trigger(OneSignal.EVENTS.NOTIFICATION_CLICKED,n),[2])}})})}var n,o,r,a,l,c,d,f;return i.__generator(this,function(i){switch(i.label){case 0:return[4,u.default.getAppState()];case 1:return n=i.sent(),[4,u.default.get("Options","notificationClickHandlerMatch")];case 2:if("origin"!==(o=i.sent()))return[3,7];r=0,a=Object.keys(n.clickedNotifications),i.label=3;case 3:return r<a.length?(l=a[r],new URL(l).origin!==location.origin?[3,5]:(c=n.clickedNotifications[l],[4,t(c)])):[3,6];case 4:i.sent(),i.label=5;case 5:return r++,[3,3];case 6:return[3,11];case 7:return d=n.clickedNotifications[e],d?[4,t(d)]:[3,9];case 8:return i.sent(),[3,11];case 9:return d||!e.endsWith("/")?[3,11]:(f=e.substring(0,e.length-1),d=n.clickedNotifications[f],d?[4,t(d)]:[3,11]);case 10:i.sent(),i.label=11;case 11:return[2]}})})},e}();t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.put=function(t,n){return void 0===e.store[t]&&(e.store[t]=[null,null]),e.store[t].push(n),e.store[t].length==e.LIMIT+1&&e.store[t].shift(),e.store[t]},e.get=function(t){return void 0===e.store[t]&&(e.store[t]=[null,null]),e.store[t]},e.getFirst=function(t){return e.get(t)[0]},e.getLast=function(t){return e.get(t)[1]},e.remove=function(t){delete e.store[t]},e.isEmpty=function(t){var n=e.get(t);return null===n[0]&&null===n[1]},e}();i.store={},i.LIMIT=2,t.default=i},function(e,t,n){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),o=n(2),r=n(1),a=n(7),s=n(3),u=function(){function t(){}return t.get=function(e,n,i){return t.call("GET",e,n,i)},t.post=function(e,n,i){return t.call("POST",e,n,i)},t.put=function(e,n,i){return t.call("PUT",e,n,i)},t.delete=function(e,n,i){return t.call("DELETE",e,n,i)},t.call=function(n,o,r,a){var u=new Headers;if(u.append("SDK-Version","onesignal/web/"+s.default.version()),u.append("Content-Type","application/json;charset=UTF-8"),a)for(var l=0,c=Object.keys(a);l<c.length;l++){var d=c[l];u.append(d,a[d])}var f={method:n||"NO_METHOD_SPECIFIED",headers:u,cache:"no-cache"};r&&(f.body=JSON.stringify(r));var p;return e(i.API_URL+o,f).then(function(e){return p=e.status,e.json()}).then(function(e){return p>=200&&p<300?e:"no-user-id-error"!==t.identifyError(e)?Promise.reject(e):void 0})},t.identifyError=function(e){if(!e||!e.errors)return"no-error";var t=e.errors;return r.contains(t,"No user with this id found")||r.contains(t,"Could not find app_id for given player id.")?"no-user-id-error":"unknown-error"},t.getUserIdFromSubscriptionIdentifier=function(e,n,i){return t.post("players",{app_id:e,device_type:n,identifier:i}).then(function(e){return e&&e.id?e.id:null}).catch(function(e){return o.debug("Error getting user ID from subscription identifier:",e),null})},t.getPlayer=function(e,n){return t.get("players/"+n+"?app_id="+e)},t.updatePlayer=function(e,n,i){return t.put("players/"+n,a({app_id:e},i))},t.sendNotification=function(e,n,i,o,a,s,u,l){var c={app_id:e,contents:o,include_player_ids:n,isAnyWeb:!0,data:u,web_buttons:l};return i&&(c.headings=i),a&&(c.url=a),s&&(c.chrome_web_icon=s,c.firefox_icon=s),r.trimUndefined(c),t.post("notifications",c)},t}();t.default=u}).call(t,n(23))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),r=n(2),a=n(4),s=n(9),u=n(10),l=n(45),c=n(42),d=n(43),f=n(44),p=n(27),g=n(5),h=function(){function e(t){var n=void 0===t?{}:t,r=n.enable,a=void 0!==r&&r,s=n.size,l=void 0===s?"medium":s,c=n.position,d=void 0===c?"bottom-right":c,f=n.theme,g=void 0===f?"default":f,h=n.showLauncherAfter,m=void 0===h?10:h,v=n.showBadgeAfter,b=void 0===v?300:v,S=n.text,O=void 0===S?{"tip.state.unsubscribed":"Subscribe to notifications","tip.state.subscribed":"You're subscribed to notifications","tip.state.blocked":"You've blocked notifications","message.prenotify":"Click to subscribe to notifications","message.action.subscribing":"Click <strong>{{prompt.native.grant}}</strong> to receive notifications","message.action.subscribed":"Thanks for subscribing!","message.action.resubscribed":"You're subscribed to notifications","message.action.unsubscribed":"You won't receive notifications again","dialog.main.title":"Manage Site Notifications","dialog.main.button.subscribe":"SUBSCRIBE","dialog.main.button.unsubscribe":"UNSUBSCRIBE","dialog.blocked.title":"Unblock Notifications","dialog.blocked.message":"Follow these instructions to allow notifications:"}:S,_=n.prenotify,E=void 0===_||_,y=n.showCredit,w=void 0===y||y,P=n.colors,I=void 0===P?null:P,T=n.offset,N=void 0===T?null:T,C=n.launcher,R=void 0===C?null:C,A=this;if(this.options={enable:a,size:l,position:d,theme:g,showLauncherAfter:m,showBadgeAfter:b,text:O,prenotify:E,showCredit:w,colors:I,offset:N},this.options.enable){if(!o.contains(["small","medium","large"],this.options.size))throw new Error("Invalid size "+this.options.size+" for notify button. Choose among 'small', 'medium', or 'large'.");if(!o.contains(["bottom-left","bottom-right"],this.options.position))throw new Error("Invalid position "+this.options.position+" for notify button. Choose either 'bottom-left', or 'bottom-right'.");if(!o.contains(["default","inverse"],this.options.theme))throw new Error("Invalid theme "+this.options.theme+" for notify button. Choose either 'default', or 'inverse'.");if(this.options.showLauncherAfter<0)throw new Error("Invalid delay duration of "+this.options.showLauncherAfter+" for showing the notify button. Choose a value above 0.");if(this.options.showBadgeAfter<0)throw new Error("Invalid delay duration of "+this.options.showBadgeAfter+" for showing the notify button's badge. Choose a value above 0.");this.size=this.options.size,this.position=this.options.position,this.text=this.options.text,this.text["tip.state.unsubscribed"]||(this.text["tip.state.unsubscribed"]="Subscribe to notifications"),this.text["tip.state.subscribed"]||(this.text["tip.state.subscribed"]="You're subscribed to notifications"),this.text["tip.state.blocked"]||(this.text["tip.state.blocked"]="You've blocked notifications"),this.text["message.prenotify"]||(this.text["message.prenotify"]="Click to subscribe to notifications"),this.text["message.action.subscribed"]||(this.text["message.action.subscribed"]="Thanks for subscribing!"),this.text["message.action.resubscribed"]||(this.text["message.action.resubscribed"]="You're subscribed to notifications"),this.text["message.action.subscribing"]||(this.text["message.action.subscribing"]="Click <strong>{{prompt.native.grant}}</strong> to receive notifications"),this.text["message.action.unsubscribed"]||(this.text["message.action.unsubscribed"]="You won't receive notifications again"),this.text["dialog.main.title"]||(this.text["dialog.main.title"]="Manage Site Notifications"),this.text["dialog.main.button.subscribe"]||(this.text["dialog.main.button.subscribe"]="SUBSCRIBE"),this.text["dialog.main.button.unsubscribe"]||(this.text["dialog.main.button.unsubscribe"]="UNSUBSCRIBE"),this.text["dialog.blocked.title"]||(this.text["dialog.blocked.title"]="Unblock Notifications"),this.text["dialog.blocked.message"]||(this.text["dialog.blocked.message"]="Follow these instructions to allow notifications:"),this._launcher=R,this.substituteText(),this.state=e.STATES.UNINITIALIZED,this._ignoreSubscriptionState=!1,OneSignal.on(e.EVENTS.SUBSCRIBE_CLICK,function(){A.dialog.subscribeButton.disabled=!0,A._ignoreSubscriptionState=!0,OneSignal.setSubscription(!0).then(function(){return A.dialog.subscribeButton.disabled=!1,A.dialog.hide()}).then(function(){return A.message.display(p.default.TYPES.MESSAGE,A.text["message.action.resubscribed"],p.default.TIMEOUT)}).then(function(){return A._ignoreSubscriptionState=!1,A.launcher.clearIfWasInactive(),A.launcher.inactivate()}).then(function(){return A.updateState()})}),OneSignal.on(e.EVENTS.UNSUBSCRIBE_CLICK,function(){A.dialog.unsubscribeButton.disabled=!0,OneSignal.setSubscription(!1).then(function(){return A.dialog.unsubscribeButton.disabled=!1,A.dialog.hide()}).then(function(){return A.launcher.clearIfWasInactive(),A.launcher.activate()}).then(function(){return A.message.display(p.default.TYPES.MESSAGE,A.text["message.action.unsubscribed"],p.default.TIMEOUT)}).then(function(){return A.updateState()})}),OneSignal.on(e.EVENTS.HOVERING,function(){return A.hovering=!0,A.launcher.activateIfInactive(),A.message.shown||A.dialog.shown?void(A.hovering=!1):A.message.contentType===p.default.TYPES.MESSAGE?void(A.hovering=!1):void new Promise(function(e,t){if(A.message.queued.length>0)return A.message.dequeue().then(function(t){A.message.content=t,A.message.contentType=p.default.TYPES.QUEUED,e()});A.message.content=o.decodeHtmlEntities(A.message.getTipForState()),A.message.contentType=p.default.TYPES.TIP,e()}).then(function(){return A.message.show()}).then(function(){A.hovering=!1})}),OneSignal.on(e.EVENTS.HOVERED,function(){A.message.contentType!==p.default.TYPES.MESSAGE&&A.dialog.hidden&&(A.hovering&&(A.hovering=!1,A.message.waitUntilShown().then(function(){return o.delay(p.default.TIMEOUT)}).then(function(){return A.message.hide()}).then(function(){A.launcher.wasInactive&&A.dialog.hidden&&(A.launcher.inactivate(),A.launcher.wasInactive=null)})),A.message.shown&&A.message.hide().then(function(){A.launcher.wasInactive&&A.dialog.hidden&&(A.launcher.inactivate(),A.launcher.wasInactive=null)}))}),OneSignal.on(OneSignal.EVENTS.SUBSCRIPTION_CHANGED,function(t){return i.__awaiter(A,void 0,void 0,function(){var n,o=this;return i.__generator(this,function(i){switch(i.label){case 0:return 1!=t?[3,2]:(this.badge.shown&&this.options.prenotify&&this.badge.hide(),null!==this.dialog.notificationIcons?[3,2]:[4,u.default.getNotificationIcons()]);case 1:n=i.sent(),this.dialog.notificationIcons=n,i.label=2;case 2:return OneSignal.getNotificationPermission(function(n){o.setState(t?e.STATES.SUBSCRIBED:"denied"===n?e.STATES.BLOCKED:e.STATES.UNSUBSCRIBED,o._ignoreSubscriptionState)}),[2]}})})}),OneSignal.on(e.EVENTS.STATE_CHANGED,function(t){A.launcher.element&&(t.to===e.STATES.SUBSCRIBED?A.launcher.inactivate():(t.to===e.STATES.UNSUBSCRIBED||e.STATES.BLOCKED)&&A.launcher.activate())}),OneSignal.on(OneSignal.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,function(e,t){A.updateState()}),this.updateState()}}return Object.defineProperty(e,"EVENTS",{get:function(){return{STATE_CHANGED:"notifyButtonStateChange",LAUNCHER_CLICK:"notifyButtonLauncherClick",BELL_CLICK:"notifyButtonButtonClick",SUBSCRIBE_CLICK:"notifyButtonSubscribeClick",UNSUBSCRIBE_CLICK:"notifyButtonUnsubscribeClick",HOVERING:"notifyButtonHovering",HOVERED:"notifyButtonHover"}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"STATES",{get:function(){return{UNINITIALIZED:"uninitialized",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed",BLOCKED:"blocked"}},enumerable:!0,configurable:!0}),Object.defineProperty(e,"TEXT_SUBS",{get:function(){return{"prompt.native.grant":{default:"Allow",chrome:"Allow",firefox:"Always Receive Notifications",safari:"Allow"}}},enumerable:!0,configurable:!0}),e.prototype.substituteText=function(){for(var t in this.text)if(this.text.hasOwnProperty(t)){var n=this.text[t],i=s.name.toLowerCase();for(var r in e.TEXT_SUBS)if(e.TEXT_SUBS.hasOwnProperty(r)){var a=e.TEXT_SUBS[r],u=a[i];n&&o.contains(n,"{{")&&(this.text[t]=n.replace("{{"+r+"}}",void 0!==u?u:a.default))}}},e.prototype.showDialogProcedure=function(){var e=this;this.dialog.shown||this.dialog.show().then(function(){o.once(document,"click",function(t,n){e.dialog.element.contains(t.target)||(n(),e.dialog.shown&&e.dialog.hide().then(function(t){e.launcher.inactivateIfWasInactive()}))},!0)})},e.prototype.create=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t,n,a,s,l=this;return i.__generator(this,function(i){switch(i.label){case 0:return this.options.enable?[4,OneSignal.context.dynamicResourceLoader.loadSdkStylesheet()]:[2];case 1:return 0!==(e=i.sent())?(r.debug("Not showing notify button because styles failed to load."),[2]):(this.container&&o.removeDomElement("#onesignal-bell-container"),o.addDomElement("body","beforeend",'<div id="onesignal-bell-container" class="onesignal-bell-container onesignal-reset"></div>'),o.addDomElement(this.container,"beforeend",'<div id="onesignal-bell-launcher" class="onesignal-bell-launcher"></div>'),o.addDomElement(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-button"></div>'),o.addDomElement(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-badge"></div>'),o.addDomElement(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-message"></div>'),o.addDomElement(this.message.selector,"beforeend",'<div class="onesignal-bell-launcher-message-body"></div>'),o.addDomElement(this.launcher.selector,"beforeend",'<div class="onesignal-bell-launcher-dialog"></div>'),o.addDomElement(this.dialog.selector,"beforeend",'<div class="onesignal-bell-launcher-dialog-body"></div>'),o.addDomElement(this.button.selector,"beforeEnd",'<svg class="onesignal-bell-svg" xmlns="http://www.w3.org/2000/svg" width="99.7" height="99.7" viewBox="0 0 99.7 99.7"><circle class="background" cx="49.9" cy="49.9" r="49.9"/><path class="foreground" d="M50.1 66.2H27.7s-2-.2-2-2.1c0-1.9 1.7-2 1.7-2s6.7-3.2 6.7-5.5S33 52.7 33 43.3s6-16.6 13.2-16.6c0 0 1-2.4 3.9-2.4 2.8 0 3.8 2.4 3.8 2.4 7.2 0 13.2 7.2 13.2 16.6s-1 11-1 13.3c0 2.3 6.7 5.5 6.7 5.5s1.7.1 1.7 2c0 1.8-2.1 2.1-2.1 2.1H50.1zm-7.2 2.3h14.5s-1 6.3-7.2 6.3-7.3-6.3-7.3-6.3z"/><ellipse class="stroke" cx="49.9" cy="49.9" rx="37.4" ry="36.9"/></svg>'),[4,OneSignal.isPushNotificationsEnabled()]);case 2:return t=i.sent(),[4,OneSignal.getSubscription()];case 3:return n=i.sent(),[4,u.default.wasHttpsNativePromptDismissed()];case 4:return a=i.sent(),s=t?"small":this.options.size,[4,this.launcher.resize(s)];case 5:if(i.sent(),"bottom-left"===this.options.position)o.addCssClass(this.container,"onesignal-bell-container-bottom-left"),o.addCssClass(this.launcher.selector,"onesignal-bell-launcher-bottom-left");else{if("bottom-right"!==this.options.position)throw new Error("Invalid OneSignal notify button position "+this.options.position);o.addCssClass(this.container,"onesignal-bell-container-bottom-right"),o.addCssClass(this.launcher.selector,"onesignal-bell-launcher-bottom-right")}if("default"===this.options.theme)o.addCssClass(this.launcher.selector,"onesignal-bell-launcher-theme-default");else{if("inverse"!==this.options.theme)throw new Error("Invalid OneSignal notify button theme "+this.options.theme);o.addCssClass(this.launcher.selector,"onesignal-bell-launcher-theme-inverse")}return this.applyOffsetIfSpecified(),this.setCustomColorsIfSpecified(),this.patchSafariSvgFilterBug(),r.info("Showing the notify button."),[4,(t?this.launcher.inactivate():o.nothing()).then(function(){return OneSignal.getSubscription()}).then(function(e){return!t&&e||null!==l.dialog.notificationIcons?o.nothing():u.default.getNotificationIcons().then(function(e){l.dialog.notificationIcons=e})}).then(function(){return o.delay(l.options.showLauncherAfter)}).then(function(){return!g.default.isUsingSubscriptionWorkaround()||!n||a===!0||t||OneSignal.config.autoRegister!==!0||u.default.isHttpPromptAlreadyShown()||u.default.isUsingHttpPermissionRequest()?l.launcher.show():(r.debug("Not showing notify button because popover will be shown."),o.nothing())}).then(function(){return o.delay(l.options.showBadgeAfter)}).then(function(){return l.options.prenotify&&!t&&OneSignal._isNewVisitor?l.message.enqueue(l.text["message.prenotify"]).then(function(){return l.badge.show()}):o.nothing()}).then(function(){return l.initialized=!0})];case 6:return i.sent(),[2]}})})},e.prototype.patchSafariSvgFilterBug=function(){if(!(s.safari&&Number(s.version)>=9.1)){var e="drop-shadow(0 2px 4px rgba(34,36,38,0.35));",t="drop-shadow(0 2px 4px rgba(34,36,38,0));",n="drop-shadow(0px 2px 2px rgba(34,36,38,.15));";this.graphic.setAttribute("style","filter: "+e+"; -webkit-filter: "+e+";"),this.badge.element.setAttribute("style","filter: "+t+"; -webkit-filter: "+t+";"),this.dialog.element.setAttribute("style","filter: "+n+"; -webkit-filter: "+n+";")}s.safari&&this.badge.element.setAttribute("style","display: none;")},e.prototype.applyOffsetIfSpecified=function(){var e=this.options.offset;e&&(this.launcher.element.style.cssText="",e.bottom&&(this.launcher.element.style.cssText+="bottom: "+e.bottom+";"),"bottom-right"===this.options.position?e.right&&(this.launcher.element.style.cssText+="right: "+e.right+";"):"bottom-left"===this.options.position&&e.left&&(this.launcher.element.style.cssText+="left: "+e.left+";"))},e.prototype.setCustomColorsIfSpecified=function(){var e=this.dialog.element.querySelector("button.action"),t=this.button.element.querySelector(".pulse-ring");this.graphic.querySelector(".background").style.cssText="";for(var n=this.graphic.querySelectorAll(".foreground"),i=0;i<n.length;i++){var o=n[i];o.style.cssText=""}if(this.graphic.querySelector(".stroke").style.cssText="",this.badge.element.style.cssText="",e&&(e.style.cssText="",e.style.cssText=""),t&&(t.style.cssText=""),this.options.colors){var r=this.options.colors;if(r["circle.background"]&&(this.graphic.querySelector(".background").style.cssText+="fill: "+r["circle.background"]),r["circle.foreground"]){for(var a=this.graphic.querySelectorAll(".foreground"),i=0;i<a.length;i++){var o=a[i];o.style.cssText+="fill: "+r["circle.foreground"]}this.graphic.querySelector(".stroke").style.cssText+="stroke: "+r["circle.foreground"]}r["badge.background"]&&(this.badge.element.style.cssText+="background: "+r["badge.background"]),r["badge.bordercolor"]&&(this.badge.element.style.cssText+="border-color: "+r["badge.bordercolor"]),r["badge.foreground"]&&(this.badge.element.style.cssText+="color: "+r["badge.foreground"]),e&&(r["dialog.button.background"]&&(this.dialog.element.querySelector("button.action").style.cssText+="background: "+r["dialog.button.background"]),r["dialog.button.foreground"]&&(this.dialog.element.querySelector("button.action").style.cssText+="color: "+r["dialog.button.foreground"]),r["dialog.button.background.hovering"]&&this.addCssToHead("onesignal-background-hover-style","#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:hover { background: "+r["dialog.button.background.hovering"]+" !important; }"),r["dialog.button.background.active"]&&this.addCssToHead("onesignal-background-active-style","#onesignal-bell-container.onesignal-reset .onesignal-bell-launcher .onesignal-bell-launcher-dialog button.action:active { background: "+r["dialog.button.background.active"]+" !important; }")),t&&r["pulse.color"]&&(this.button.element.querySelector(".pulse-ring").style.cssText="border-color: "+r["pulse.color"])}},e.prototype.addCssToHead=function(e,t){if(!document.getElementById(e)){var n=document.createElement("style");n.id=e,n.type="text/css",n.appendChild(document.createTextNode(t)),document.head.appendChild(n)}},e.prototype.updateState=function(){var t=this;Promise.all([OneSignal.isPushNotificationsEnabled(),OneSignal.getNotificationPermission()]).then(function(n){var i=n[0],o=n[1];t.setState(i?e.STATES.SUBSCRIBED:e.STATES.UNSUBSCRIBED),"denied"===o&&t.setState(e.STATES.BLOCKED)})},e.prototype.setState=function(t,n){void 0===n&&(n=!1);var i=this.state;this.state=t,i===t||n||a.default.trigger(e.EVENTS.STATE_CHANGED,{from:i,to:t})},Object.defineProperty(e.prototype,"container",{get:function(){return document.querySelector("#onesignal-bell-container")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"graphic",{get:function(){return this.button.element.querySelector("svg")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"launcher",{get:function(){return this._launcher||(this._launcher=new l.default(this)),this._launcher},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"button",{get:function(){return this._button||(this._button=new d.default(this)),this._button},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"badge",{get:function(){return this._badge||(this._badge=new c.default),this._badge},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"message",{get:function(){return this._message||(this._message=new p.default(this)),this._message},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialog",{get:function(){return this._dialog||(this._dialog=new f.default(this)),this._dialog},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"subscribed",{get:function(){return this.state===e.STATES.SUBSCRIBED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"unsubscribed",{get:function(){return this.state===e.STATES.UNSUBSCRIBED},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"blocked",{get:function(){return this.state===e.STATES.BLOCKED},enumerable:!0,configurable:!0}),e}();t.default=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(8),o=n(3),r=n(2),a=n(6),s=n(1),u=n(5),l=function(){function e(){}return e.applyServiceWorkerEnvPrefixes=function(){o.default.isDev()?(OneSignal.SERVICE_WORKER_PATH=i.DEV_PREFIX+"OneSignalSDKWorker.js",OneSignal.SERVICE_WORKER_UPDATER_PATH=i.DEV_PREFIX+"OneSignalSDKUpdaterWorker.js"):o.default.isStaging()&&(OneSignal.SERVICE_WORKER_PATH=i.STAGING_PREFIX+"OneSignalSDKWorker.js",OneSignal.SERVICE_WORKER_UPDATER_PATH=i.STAGING_PREFIX+"OneSignalSDKUpdaterWorker.js")},e.closeNotifications=function(){navigator.serviceWorker&&!u.default.isUsingSubscriptionWorkaround()&&navigator.serviceWorker.getRegistration().then(function(e){if(void 0===e||!e.active)throw new Error("There is no active service worker.");OneSignal._channel&&OneSignal._channel.emit("data","notification.closeall")})},e.updateServiceWorker=function(){var e=sessionStorage.getItem("onesignal-update-serviceworker-completed");if(!navigator.serviceWorker||!o.default.isHost()||"https:"!==location.protocol||"true"==e)return void r.debug("Skipping service worker update for existing session.");try{sessionStorage.setItem("onesignal-update-serviceworker-completed","true")}catch(e){r.error(e)}return navigator.serviceWorker.getRegistration().then(function(e){var t="";if(OneSignal.config.path&&(t=OneSignal.config.path),e&&e.active){var n=e.active.scriptURL;if(s.contains(n,t+OneSignal.SERVICE_WORKER_PATH))return r.debug("(Service Worker Update)","The main service worker is active."),a.default.get("Ids","WORKER1_ONE_SIGNAL_SW_VERSION").then(function(e){return e?(r.debug("(Service Worker Update)","Stored service worker version v"+e+"."),e!=OneSignal._VERSION?(r.debug("(Service Worker Update)","New service worker version exists:",OneSignal._VERSION),r.info("Upgrading service worker (v"+e+" -> v"+OneSignal._VERSION+")"),navigator.serviceWorker.register(t+OneSignal.SERVICE_WORKER_UPDATER_PATH,OneSignal.SERVICE_WORKER_PARAM)):(r.debug("(Service Worker Update)","You already have the latest service worker version."),null)):(r.debug("(Service Worker Update)","No stored service worker version. Reinstalling the service worker."),navigator.serviceWorker.register(t+OneSignal.SERVICE_WORKER_UPDATER_PATH,OneSignal.SERVICE_WORKER_PARAM))});if(s.contains(n,t+OneSignal.SERVICE_WORKER_UPDATER_PATH))return r.debug("(Service Worker Update)","The alternate service worker is active."),a.default.get("Ids","WORKER2_ONE_SIGNAL_SW_VERSION").then(function(e){return e?(r.debug("(Service Worker Update)","Stored service worker version v"+e+"."),e!=OneSignal._VERSION?(r.debug("(Service Worker Update)","New service worker version exists:",OneSignal._VERSION),r.info("Upgrading new service worker (v"+e+" -> v"+OneSignal._VERSION+")"),navigator.serviceWorker.register(t+OneSignal.SERVICE_WORKER_PATH,OneSignal.SERVICE_WORKER_PARAM)):(r.debug("(Service Worker Update)","You already have the latest service worker version."),null)):(r.debug("(Service Worker Update)","No stored service worker version. Reinstalling the service worker."),navigator.serviceWorker.register(t+OneSignal.SERVICE_WORKER_PATH,OneSignal.SERVICE_WORKER_PARAM))})}})},e.registerServiceWorker=function(t){r.debug("Called %cregisterServiceWorker("+JSON.stringify(t,null,4)+")",s.getConsoleStyle("code")),navigator.serviceWorker.register(t,OneSignal.SERVICE_WORKER_PARAM).then(u.default.enableNotifications,e.registerError)},e.registerError=function(e){r.error("ServiceWorker registration",e)},e.isServiceWorkerActive=function(e){function t(e){return e&&e.active&&"activated"===e.active.state&&(s.contains(e.active.scriptURL,"OneSignalSDKWorker")||s.contains(e.active.scriptURL,"OneSignalSDKUpdaterWorker"))}return"serviceWorker"in navigator&&new Promise(function(n,i){if(u.default.isUsingSubscriptionWorkaround()||o.default.isIframe())e&&e(!1),n(!1);else{var r=!1;navigator.serviceWorker.getRegistrations?navigator.serviceWorker.getRegistrations().then(function(i){for(var o=0,a=i;o<a.length;o++){t(a[o])&&(r=!0)}e&&e(r),n(r)}):navigator.serviceWorker.ready.then(function(i){t(i)&&(r=!0),e&&e(r),n(r)})}})},e}();t.default=l},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),r=n(2),a=n(4),s=n(20),u=n(7),l=function(e){function t(t,n,i,o,r,a,s,u,l){void 0===a&&(a="shown"),void 0===s&&(s="active"),void 0===u&&(u=["opacity","transform"]),void 0===l&&(l=null);var c=e.call(this,t,n,i,a,u)||this;return c.selector=t,c.showClass=n,c.hideClass=i,c.activeClass=o,c.inactiveClass=r,c.state=a,c.activeState=s,c.targetTransitionEvents=u,c.nestedContentSelector=l,c}return i.__extends(t,e),t.prototype.activate=function(){var e=this;return this.inactive&&this.shown?new Promise(function(n){if(e.activeState="activating",a.default.trigger(t.EVENTS.ACTIVATING,e),e.inactiveClass&&o.removeCssClass(e.element,e.inactiveClass),e.activeClass&&o.addCssClass(e.element,e.activeClass),!e.shown)return r.debug("Ending activate() transition (alternative)."),e.activeState="active",a.default.trigger(t.EVENTS.ACTIVE,e),n(e);if(0==e.targetTransitionEvents.length)return n(e);var i=setTimeout(function(){r.debug("Element did not completely activate (state: "+e.state+", activeState: "+e.activeState+").")},e.transitionCheckTimeout);o.once(e.element,"transitionend",function(r,s){if(r.target===e.element&&o.contains(e.targetTransitionEvents,r.propertyName))return clearTimeout(i),s(),e.activeState="active",a.default.trigger(t.EVENTS.ACTIVE,e),n(e)},!0)}):Promise.resolve(this)},t.prototype.inactivate=function(){var e=this;return this.active?new Promise(function(n){if(e.activeState="inactivating",a.default.trigger(t.EVENTS.INACTIVATING,e),e.activeClass&&o.removeCssClass(e.element,e.activeClass),e.inactiveClass&&o.addCssClass(e.element,e.inactiveClass),!e.shown)return e.activeState="inactive",a.default.trigger(t.EVENTS.INACTIVE,e),n(e);if(0==e.targetTransitionEvents.length)return n(e);var i=setTimeout(function(){r.debug("Element did not completely inactivate (state: "+e.state+", activeState: "+e.activeState+").")},e.transitionCheckTimeout);o.once(e.element,"transitionend",function(r,s){if(r.target===e.element&&o.contains(e.targetTransitionEvents,r.propertyName))return clearTimeout(i),s(),e.activeState="inactive",a.default.trigger(t.EVENTS.INACTIVE,e),n(e)},!0)}):Promise.resolve(this)},t.prototype.waitUntilActive=function(){var e=this;return this.active?Promise.resolve(this):new Promise(function(n){OneSignal.once(t.EVENTS.ACTIVE,function(t){if(t===e)return n(e)},!0)})},t.prototype.waitUntilInactive=function(){var e=this;return this.inactive?Promise.resolve(this):new Promise(function(n){OneSignal.once(t.EVENTS.INACTIVE,function(t){if(t===e)return n(e)},!0)})},Object.defineProperty(t,"EVENTS",{get:function(){return u({},s.default.EVENTS,{ACTIVATING:"activeAnimatedElementActivating",ACTIVE:"activeAnimatedElementActive",INACTIVATING:"activeAnimatedElementInactivating",INACTIVE:"activeAnimatedElementInactive"})},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"activating",{get:function(){return"activating"===this.activeState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"active",{get:function(){return"active"===this.activeState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inactivating",{get:function(){return"inactivating"===this.activeState},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"inactive",{get:function(){return"inactive"===this.activeState},enumerable:!0,configurable:!0}),t}(s.default);t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(2),r=n(4),a=function(){function e(e,t,n,i,o,r,a){void 0===i&&(i="shown"),void 0===o&&(o=["opacity","transform"]),void 0===r&&(r=null),void 0===a&&(a=500),this.selector=e,this.showClass=t,this.hideClass=n,this.state=i,this.targetTransitionEvents=o,this.nestedContentSelector=r,this.transitionCheckTimeout=a}return e.prototype.show=function(){var t=this;return this.hidden?new Promise(function(n){if(t.state="showing",r.default.trigger(e.EVENTS.SHOWING,t),t.hideClass&&i.removeCssClass(t.element,t.hideClass),t.showClass&&i.addCssClass(t.element,t.showClass),0==t.targetTransitionEvents.length)return n(t);var a=setTimeout(function(){o.debug("Element did not completely show (state: "+t.state+").")},t.transitionCheckTimeout);i.once(t.element,"transitionend",function(o,s){if(o.target===t.element&&i.contains(t.targetTransitionEvents,o.propertyName))return clearTimeout(a),s(),t.state="shown",r.default.trigger(e.EVENTS.SHOWN,t),n(t)},!0)}):Promise.resolve(this)},e.prototype.hide=function(){var t=this;return this.shown?new Promise(function(n){if(t.state="hiding",r.default.trigger(e.EVENTS.HIDING,t),t.showClass&&i.removeCssClass(t.element,t.showClass),t.hideClass&&i.addCssClass(t.element,t.hideClass),0==t.targetTransitionEvents.length)return n(t);i.once(t.element,"transitionend",function(a,s){var u=setTimeout(function(){o.debug("Element did not completely hide (state: "+t.state+").")},t.transitionCheckTimeout);if(a.target===t.element&&i.contains(t.targetTransitionEvents,a.propertyName))return clearTimeout(u),s(),t.state="hidden",r.default.trigger(e.EVENTS.HIDDEN,t),n(t)},!0)}):Promise.resolve(this)},e.prototype.waitUntilShown=function(){var t=this;return"shown"===this.state?Promise.resolve(this):new Promise(function(n){OneSignal.once(e.EVENTS.SHOWN,function(e){if(e===t)return n(t)},!0)})},e.prototype.waitUntilHidden=function(){var t=this;return"hidden"===this.state?Promise.resolve(this):new Promise(function(n){OneSignal.once(e.EVENTS.HIDDEN,function(e){if(e===t)return n(t)},!0)})},Object.defineProperty(e,"EVENTS",{get:function(){return{SHOWING:"animatedElementShowing",SHOWN:"animatedElementShown",HIDING:"animatedElementHiding",HIDDEN:"animatedElementHidden"}},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"content",{get:function(){return this.nestedContentSelector?this.element.querySelector(this.nestedContentSelector).innerHTML:this.element.innerHTML},set:function(e){this.nestedContentSelector?this.element.querySelector(this.nestedContentSelector).innerHTML=e:this.element.innerHTML=e},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"element",{get:function(){return document.querySelector(this.selector)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"showing",{get:function(){return"showing"===this.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"shown",{get:function(){return"shown"===this.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hiding",{get:function(){return"hiding"===this.state},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"hidden",{get:function(){return"hidden"===this.state},enumerable:!0,configurable:!0}),e}();t.default=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(3),r=n(2),a=n(6),s=n(24),u=n(5),l=function(){function e(){}return e.unmarkHttpsNativePromptDismissed=function(){s.remove("onesignal-notification-prompt")?r.debug("OneSignal: Removed the native notification prompt dismissed cookie."):r.debug("OneSignal: Cookie not marked.")},e.markHttpsNativePromptDismissed=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t;return i.__generator(this,function(n){switch(n.label){case 0:return u.default.isUsingSubscriptionWorkaround()?[4,new Promise(function(e,t){OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.MARK_PROMPT_DISMISSED,{},function(n){n.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE?e():t()})})]:[3,2];case 1:n.sent(),n.label=2;case 2:return[4,a.default.get("Options","promptDismissCount")];case 3:return e=n.sent(),console.log("("+o.default.getEnv()+") dismissCount: "+e),e||(e=0),u.default.isUsingSubscriptionWorkaround()||(e+=1),t=3,2==e?t=7:e>2&&(t=30),r.debug("("+o.default.getEnv()+") OneSignal: User dismissed the native notification prompt; reprompt after "+t+" days."),[4,a.default.put("Options",{key:"promptDismissCount",value:e})];case 4:return n.sent(),[2,s.set("onesignal-notification-prompt","dismissed",{expires:t})]}})})},e}();t.default=l},function(e,t){e.exports=function(e,t){return Array.prototype.slice.call(e,t)}},function(e,t,n){(function(t){(function(){!function(e){"use strict";function t(e){if("string"!=typeof e&&(e=String(e)),/[^a-z0-9\-#$%&'*+.\^_`|~]/i.test(e))throw new TypeError("Invalid character in header field name");return e.toLowerCase()}function n(e){return"string"!=typeof e&&(e=String(e)),e}function i(e){var t={next:function(){var t=e.shift();return{done:void 0===t,value:t}}};return h.iterable&&(t[Symbol.iterator]=function(){return t}),t}function o(e){this.map={},e instanceof o?e.forEach(function(e,t){this.append(t,e)},this):e&&Object.getOwnPropertyNames(e).forEach(function(t){this.append(t,e[t])},this)}function r(e){if(e.bodyUsed)return Promise.reject(new TypeError("Already read"));e.bodyUsed=!0}function a(e){return new Promise(function(t,n){e.onload=function(){t(e.result)},e.onerror=function(){n(e.error)}})}function s(e){var t=new FileReader;return t.readAsArrayBuffer(e),a(t)}function u(e){var t=new FileReader;return t.readAsText(e),a(t)}function l(){return this.bodyUsed=!1,this._initBody=function(e){if(this._bodyInit=e,"string"==typeof e)this._bodyText=e;else if(h.blob&&Blob.prototype.isPrototypeOf(e))this._bodyBlob=e;else if(h.formData&&FormData.prototype.isPrototypeOf(e))this._bodyFormData=e;else if(h.searchParams&&URLSearchParams.prototype.isPrototypeOf(e))this._bodyText=e.toString();else if(e){if(!h.arrayBuffer||!ArrayBuffer.prototype.isPrototypeOf(e))throw new Error("unsupported BodyInit type")}else this._bodyText="";this.headers.get("content-type")||("string"==typeof e?this.headers.set("content-type","text/plain;charset=UTF-8"):this._bodyBlob&&this._bodyBlob.type?this.headers.set("content-type",this._bodyBlob.type):h.searchParams&&URLSearchParams.prototype.isPrototypeOf(e)&&this.headers.set("content-type","application/x-www-form-urlencoded;charset=UTF-8"))},h.blob?(this.blob=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return Promise.resolve(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as blob");return Promise.resolve(new Blob([this._bodyText]))},this.arrayBuffer=function(){return this.blob().then(s)},this.text=function(){var e=r(this);if(e)return e;if(this._bodyBlob)return u(this._bodyBlob);if(this._bodyFormData)throw new Error("could not read FormData body as text");return Promise.resolve(this._bodyText)}):this.text=function(){var e=r(this);return e?e:Promise.resolve(this._bodyText)},h.formData&&(this.formData=function(){return this.text().then(f)}),this.json=function(){return this.text().then(JSON.parse)},this}function c(e){var t=e.toUpperCase();return m.indexOf(t)>-1?t:e}function d(e,t){t=t||{};var n=t.body;if(d.prototype.isPrototypeOf(e)){if(e.bodyUsed)throw new TypeError("Already read");this.url=e.url,this.credentials=e.credentials,t.headers||(this.headers=new o(e.headers)),this.method=e.method,this.mode=e.mode,n||(n=e._bodyInit,e.bodyUsed=!0)}else this.url=e;if(this.credentials=t.credentials||this.credentials||"omit",!t.headers&&this.headers||(this.headers=new o(t.headers)),this.method=c(t.method||this.method||"GET"),this.mode=t.mode||this.mode||null,this.referrer=null,("GET"===this.method||"HEAD"===this.method)&&n)throw new TypeError("Body not allowed for GET or HEAD requests");this._initBody(n)}function f(e){var t=new FormData;return e.trim().split("&").forEach(function(e){if(e){var n=e.split("="),i=n.shift().replace(/\+/g," "),o=n.join("=").replace(/\+/g," ");t.append(decodeURIComponent(i),decodeURIComponent(o))}}),t}function p(e){var t=new o;return(e.getAllResponseHeaders()||"").trim().split("\n").forEach(function(e){var n=e.trim().split(":"),i=n.shift().trim(),o=n.join(":").trim();t.append(i,o)}),t}function g(e,t){t||(t={}),this.type="default",this.status=t.status,this.ok=this.status>=200&&this.status<300,this.statusText=t.statusText,this.headers=t.headers instanceof o?t.headers:new o(t.headers),this.url=t.url||"",this._initBody(e)}if(!e.fetch){var h={searchParams:"URLSearchParams"in e,iterable:"Symbol"in e&&"iterator"in Symbol,blob:"FileReader"in e&&"Blob"in e&&function(){try{return new Blob,!0}catch(e){return!1}}(),formData:"FormData"in e,arrayBuffer:"ArrayBuffer"in e};o.prototype.append=function(e,i){e=t(e),i=n(i);var o=this.map[e];o||(o=[],this.map[e]=o),o.push(i)},o.prototype.delete=function(e){delete this.map[t(e)]},o.prototype.get=function(e){var n=this.map[t(e)];return n?n[0]:null},o.prototype.getAll=function(e){return this.map[t(e)]||[]},o.prototype.has=function(e){return this.map.hasOwnProperty(t(e))},o.prototype.set=function(e,i){this.map[t(e)]=[n(i)]},o.prototype.forEach=function(e,t){Object.getOwnPropertyNames(this.map).forEach(function(n){this.map[n].forEach(function(i){e.call(t,i,n,this)},this)},this)},o.prototype.keys=function(){var e=[];return this.forEach(function(t,n){e.push(n)}),i(e)},o.prototype.values=function(){var e=[];return this.forEach(function(t){e.push(t)}),i(e)},o.prototype.entries=function(){var e=[];return this.forEach(function(t,n){e.push([n,t])}),i(e)},h.iterable&&(o.prototype[Symbol.iterator]=o.prototype.entries);var m=["DELETE","GET","HEAD","OPTIONS","POST","PUT"];d.prototype.clone=function(){return new d(this)},l.call(d.prototype),l.call(g.prototype),g.prototype.clone=function(){return new g(this._bodyInit,{status:this.status,statusText:this.statusText,headers:new o(this.headers),url:this.url})},g.error=function(){var e=new g(null,{status:0,statusText:""});return e.type="error",e};var v=[301,302,303,307,308];g.redirect=function(e,t){if(v.indexOf(t)===-1)throw new RangeError("Invalid status code");return new g(null,{status:t,headers:{location:e}})},e.Headers=o,e.Request=d,e.Response=g,e.fetch=function(e,t){return new Promise(function(n,i){function o(){return"responseURL"in a?a.responseURL:/^X-Request-URL:/m.test(a.getAllResponseHeaders())?a.getResponseHeader("X-Request-URL"):void 0}var r;r=d.prototype.isPrototypeOf(e)&&!t?e:new d(e,t);var a=new XMLHttpRequest;a.onload=function(){var e={status:a.status,statusText:a.statusText,headers:p(a),url:o()},t="response"in a?a.response:a.responseText;n(new g(t,e))},a.onerror=function(){i(new TypeError("Network request failed"))},a.ontimeout=function(){i(new TypeError("Network request failed"))},a.open(r.method,r.url,!0),"include"===r.credentials&&(a.withCredentials=!0),"responseType"in a&&h.blob&&(a.responseType="blob"),r.headers.forEach(function(e,t){a.setRequestHeader(t,e)}),a.send(void 0===r._bodyInit?null:r._bodyInit)})},e.fetch.polyfill=!0}}("undefined"!=typeof self?self:this),e.exports=t.fetch}).call(t)}).call(t,n(18))},function(e,t,n){var i,o;!function(r){var a=!1;if(i=r,void 0!==(o="function"==typeof i?i.call(t,n,t,e):i)&&(e.exports=o),a=!0,e.exports=r(),a=!0,!a){var s=window.Cookies,u=window.Cookies=r();u.noConflict=function(){return window.Cookies=s,u}}}(function(){function e(){for(var e=0,t={};e<arguments.length;e++){var n=arguments[e];for(var i in n)t[i]=n[i]}return t}function t(n){function i(t,o,r){var a;if("undefined"!=typeof document){if(arguments.length>1){if(r=e({path:"/"},i.defaults,r),"number"==typeof r.expires){var s=new Date;s.setMilliseconds(s.getMilliseconds()+864e5*r.expires),r.expires=s}try{a=JSON.stringify(o),/^[\{\[]/.test(a)&&(o=a)}catch(e){}return o=n.write?n.write(o,t):encodeURIComponent(String(o)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent),t=encodeURIComponent(String(t)),t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent),t=t.replace(/[\(\)]/g,escape),document.cookie=[t,"=",o,r.expires?"; expires="+r.expires.toUTCString():"",r.path?"; path="+r.path:"",r.domain?"; domain="+r.domain:"",r.secure?"; secure":""].join("")}t||(a={});for(var u=document.cookie?document.cookie.split("; "):[],l=0;l<u.length;l++){var c=u[l].split("="),d=c.slice(1).join("=");'"'===d.charAt(0)&&(d=d.slice(1,-1));try{var f=c[0].replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent);if(d=n.read?n.read(d,f):n(d,f)||d.replace(/(%[0-9A-Z]{2})+/g,decodeURIComponent),this.json)try{d=JSON.parse(d)}catch(e){}if(t===f){a=d;break}t||(a[f]=d)}catch(e){}}return a}}return i.set=i,i.get=function(e){return i.call(i,e)},i.getJSON=function(){return i.apply({json:!0},[].slice.call(arguments))},i.defaults={},i.remove=function(t,n){i(t,"",e(n,{expires:-1}))},i.withConverter=t,i}return t(function(){})})},function(e,t,n){"use strict";function i(){throw new Error("Swivel couldn't detect ServiceWorker support. Please feature detect before using Swivel in your web pages!")}if("undefined"==typeof navigator);else{var o,r=n(66),a=n(67);o="serviceWorker"in navigator?r():"clients"in self?a():{on:i,once:i,off:i,emit:i,broadcast:i},e.exports=o}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(38),r=n(36),a=n(3),s=n(8),u=n(7),l=n(2),c=function(){function e(e,t,n){if(this.windowReference=e,this.sendToOrigin=t,this.receiveFromOrigin=n,!window||!window.postMessage)throw new Error("Must pass in a valid window reference supporting postMessage():"+e);if(!t||!n)throw new Error("Invalid origin. Must be set.");r.merge(this,new o),this.channel=new MessageChannel,this.messagePort=null,this.isListening=!1,this.isConnected=!1,this.replies={}}return Object.defineProperty(e,"HANDSHAKE_MESSAGE",{get:function(){return"onesignal.postmam.handshake"},enumerable:!0,configurable:!0}),Object.defineProperty(e,"CONNECTED_MESSAGE",{get:function(){return"onesignal.postmam.connected"},enumerable:!0,configurable:!0}),e.prototype.listen=function(){if(l.trace("(Postmam) Called listen()."),this.isListening)return void l.debug("(Postmam) Already listening for Postmam connections.");a.default.isBrowser()&&(this.isListening=!0,l.debug("(Postmam) Listening for Postmam connections.",this),window.addEventListener("message",this.onWindowMessagePostmanConnectReceived.bind(this)))},e.prototype.startPostMessageReceive=function(){window.addEventListener("message",this.onWindowPostMessageReceived.bind(this))},e.prototype.stopPostMessageReceive=function(){window.removeEventListener("message",this.onWindowPostMessageReceived)},e.prototype.destroy=function(){this.stopPostMessageReceive(),this.removeEvent()},e.prototype.onWindowPostMessageReceived=function(t){if(this.isSafeOrigin(t.origin)){var n=t.data,i=n.id,o=n.command,r=n.data,a=n.source;if(o===e.CONNECTED_MESSAGE)return this.emit("connect"),void(this.isConnected=!0);var s={id:i,command:o,data:r,source:a},c=u({reply:this.reply.bind(this,s)},s);if(this.replies.hasOwnProperty(i)){l.info("(Postmam) This message is a reply.");this.replies[i].bind(window)(c)===!1&&delete this.replies[i]}else this.emit(o,c)}},e.prototype.onWindowMessagePostmanConnectReceived=function(t){if(l.trace("(Postmam) ("+a.default.getEnv()+") Window postmessage for Postman connect received:",t),this.isSafeOrigin(t.origin)){if(t.data.handshake!==e.HANDSHAKE_MESSAGE)return void l.info("(Postmam) Got a postmam message, but not our expected handshake:",t.data);l.info("(Postmam) Got our expected Postmam handshake message (and connecting...):",t.data),window.removeEventListener("message",this.onWindowMessagePostmanConnectReceived),this.messagePort=t.ports[0],this.messagePort.addEventListener("message",this.onMessageReceived.bind(this),!1),l.info("(Postmam) Removed previous message event listener for handshakes, replaced with main message listener."),this.messagePort.start(),this.isConnected=!0,l.info("(Postmam) ("+a.default.getEnv()+") Connected."),this.message(e.CONNECTED_MESSAGE),this.emit("connect")}},e.prototype.connect=function(){l.info("(Postmam) ("+a.default.getEnv()+") Establishing a connection to "+this.sendToOrigin+"."),this.messagePort=this.channel.port1,this.messagePort.addEventListener("message",this.onMessageReceived.bind(this),!1),this.messagePort.start(),this.windowReference.postMessage({handshake:e.HANDSHAKE_MESSAGE},this.sendToOrigin,[this.channel.port2])},e.prototype.onMessageReceived=function(t){if(!t.data)return void l.debug("("+a.default.getEnv()+") Received an empty Postmam message:",t);var n=t.data,i=n.id,o=n.command,r=n.data,s=n.source;if(o===e.CONNECTED_MESSAGE)return this.emit("connect"),void(this.isConnected=!0);var c={id:i,command:o,data:r,source:s},d=u({reply:this.reply.bind(this,c)},c);if(this.replies.hasOwnProperty(i)){this.replies[i].bind(window)(d)===!1&&delete this.replies[i]}else this.emit(o,d)},e.prototype.reply=function(e,t,n){var i={id:e.id,command:e.command,data:t,source:a.default.getEnv(),isReply:!0};"function"==typeof n&&(this.replies[i.id]=n),this.messagePort.postMessage(i)},e.prototype.postMessage=function(e,t,n){if(!e||""==e)throw new Error("(Postmam) Postmam command must not be empty.");if("function"==typeof t)return void l.debug("You passed a function to data, did you mean to pass null?");var o={id:i.guid(),command:e,data:t,source:a.default.getEnv()};"function"==typeof n&&(this.replies[o.id]=n),this.windowReference.postMessage(o,"*")},e.prototype.message=function(e,t,n){if(!e||""==e)throw new Error("(Postmam) Postmam command must not be empty.");if("function"==typeof t)return void l.debug("You passed a function to data, did you mean to pass null?");var o={id:i.guid(),command:e,data:t,source:a.default.getEnv()};"function"==typeof n&&(this.replies[o.id]=n),this.messagePort.postMessage(o)},e.prototype.generateSafeOrigins=function(e){var t=[e];try{var n=new URL(e),i=n.host.replace("www.","");"https:"===n.protocol?(t.push("https://"+i),t.push("https://www."+i)):"http:"===n.protocol&&(t.push("http://"+i),t.push("http://www."+i),t.push("https://"+i),t.push("https://www."+i))}catch(e){}return t},e.prototype.isSafeOrigin=function(e){if(OneSignal.config)var t=OneSignal.config.subdomainName;else var t="test";var n=this.generateSafeOrigins(this.receiveFromOrigin);return"https://onesignal.com"===e||e==="https://"+(t||"")+".onesignal.com"||a.default.isDev()&&e===s.DEV_FRAME_HOST||a.default.isStaging()&&e===s.STAGING_FRAME_HOST||"*"===this.receiveFromOrigin||i.contains(n,e)},e}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),r=n(2),a=n(20),s=n(16),u=function(e){function t(t){var n=e.call(this,".onesignal-bell-launcher-message","onesignal-bell-launcher-message-opened",null,"hidden",["opacity","transform"],".onesignal-bell-launcher-message-body")||this;return n.bell=t,n.contentType="",n.queued=[],n}return i.__extends(t,e),Object.defineProperty(t,"TIMEOUT",{get:function(){return 2500},enumerable:!0,configurable:!0}),Object.defineProperty(t,"TYPES",{get:function(){return{TIP:"tip",MESSAGE:"message",QUEUED:"queued"}},enumerable:!0,configurable:!0}),t.prototype.display=function(e,t,n){var i=this;return void 0===n&&(n=0),r.debug("Calling %cdisplay("+e+", "+t+", "+n+").",o.getConsoleStyle("code")),(this.shown?this.hide():o.nothing()).then(function(){i.content=o.decodeHtmlEntities(t),i.contentType=e}).then(function(){return i.show()}).then(function(){return o.delay(n)}).then(function(){return i.hide()}).then(function(){i.content=i.getTipForState(),i.contentType="tip"})},t.prototype.getTipForState=function(){return this.bell.state===s.default.STATES.UNSUBSCRIBED?this.bell.text["tip.state.unsubscribed"]:this.bell.state===s.default.STATES.SUBSCRIBED?this.bell.text["tip.state.subscribed"]:this.bell.state===s.default.STATES.BLOCKED?this.bell.text["tip.state.blocked"]:void 0},t.prototype.enqueue=function(e,t){var n=this;return void 0===t&&(t=!1),this.queued.push(o.decodeHtmlEntities(e)),new Promise(function(e){n.bell.badge.shown?n.bell.badge.hide().then(function(){return n.bell.badge.increment()}).then(function(){return n.bell.badge.show()}).then(e):(n.bell.badge.increment(),n.bell.initialized?n.bell.badge.show().then(e):e())})},t.prototype.dequeue=function(e){var t=this,n=this.queued.pop(e);return new Promise(function(e){t.bell.badge.shown?t.bell.badge.hide().then(function(){return t.bell.badge.decrement()}).then(function(e){return e>0?t.bell.badge.show():Promise.resolve(t)}).then(e(n)):(t.bell.badge.decrement(),e(n))})},t}(a.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(11),AlreadySubscribedError=function(e){function AlreadySubscribedError(){return e.call(this,"This operation can only be performed when the user is not subscribed.")||this}return i.__extends(AlreadySubscribedError,e),AlreadySubscribedError}(o.default);t.default=AlreadySubscribedError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(11),PermissionMessageDismissedError=function(e){function PermissionMessageDismissedError(){return e.call(this,"The permission message was previously dismissed.")||this}return i.__extends(PermissionMessageDismissedError,e),PermissionMessageDismissedError}(o.default);t.default=PermissionMessageDismissedError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(11),PushPermissionNotGrantedError=function(e){function PushPermissionNotGrantedError(){return e.call(this,"The push permission was not granted.")||this}return i.__extends(PushPermissionNotGrantedError,e),PushPermissionNotGrantedError}(o.default);t.default=PushPermissionNotGrantedError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(8),r=n(3),a=n(2),s=n(14),u=n(4),l=n(6),c=n(9),d=n(1),f=n(26),p=n(10),g=n(17),h=n(5),m=n(13),v=n(12),b=n(28),S=n(29),O=function(){function e(){}return e.storeInitialValues=function(){return Promise.all([OneSignal.isPushNotificationsEnabled(),OneSignal.getNotificationPermission(),OneSignal.getUserId(),OneSignal.isOptedOut()]).then(function(e){var t=e[0],n=e[1],i=(e[2],e[3]);return s.default.put("subscription.optedOut",i),Promise.all([l.default.put("Options",{key:"isPushEnabled",value:t}),l.default.put("Options",{key:"notificationPermission",value:n})])})},e.onSdkInitialized=function(){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return e.storeInitialValues(),e.installNativePromptPermissionChangedHook(),t=navigator.serviceWorker&&"https:"===window.location.protocol,t?[4,h.default.hasInsecureParentOrigin()]:[3,2];case 1:t=!n.sent(),n.label=2;case 2:return t&&navigator.serviceWorker.getRegistration().then(function(e){e&&e.active&&p.default.establishServiceWorkerChannel(e)}).catch(function(e){9===e.code?("http:"===location.protocol||r.default.isIframe())&&a.debug("Expected error getting service worker registration on "+location.href+":",e):a.error("Error getting Service Worker registration on "+location.href+":",e)}),p.default.showNotifyButton(),c.safari&&OneSignal.config.autoRegister===!1&&OneSignal.isPushNotificationsEnabled(function(t){t&&e.sessionInit({__sdkCall:!0})}),h.default.isUsingSubscriptionWorkaround()&&!p.default.isContinuingBrowserSession()&&(a.debug("("+r.default.getEnv()+") Updating session info for HTTP site."),OneSignal.isPushNotificationsEnabled(function(e){if(e)return p.default.getAppId().then(function(e){return p.default.registerWithOneSignal(e,null)})})),p.default.checkAndDoHttpPermissionRequest(),[2]}})})},e.installNativePromptPermissionChangedHook=function(){!navigator.permissions||c.firefox&&Number(c.version)<=45||(OneSignal._usingNativePermissionHook=!0,navigator.permissions.query({name:"notifications"}).then(function(e){e.onchange=function(){m.default.triggerNotificationPermissionChanged()}}))},e.saveInitOptions=function(){var e=[];OneSignal.config.persistNotification===!1?e.push(l.default.put("Options",{key:"persistNotification",value:!1})):e.push(l.default.put("Options",{key:"persistNotification",value:!0}));var t=OneSignal.config.webhooks;return["notification.displayed","notification.clicked","notification.dismissed"].forEach(function(n){t&&t[n]?e.push(l.default.put("Options",{key:"webhooks."+n,value:t[n]})):e.push(l.default.put("Options",{key:"webhooks."+n,value:!1}))}),t&&t.cors?e.push(l.default.put("Options",{key:"webhooks.cors",value:!0})):e.push(l.default.put("Options",{key:"webhooks.cors",value:!1})),OneSignal.config.notificationClickHandlerMatch?e.push(l.default.put("Options",{key:"notificationClickHandlerMatch",value:OneSignal.config.notificationClickHandlerMatch})):e.push(l.default.put("Options",{key:"notificationClickHandlerMatch",value:"exact"})),OneSignal.config.notificationClickHandlerAction?e.push(l.default.put("Options",{key:"notificationClickHandlerAction",value:OneSignal.config.notificationClickHandlerAction})):e.push(l.default.put("Options",{key:"notificationClickHandlerAction",value:"navigate"})),OneSignal.config.serviceWorkerRefetchRequests===!1?e.push(l.default.put("Options",{key:"serviceWorkerRefetchRequests",value:!1})):e.push(l.default.put("Options",{key:"serviceWorkerRefetchRequests",value:!0})),Promise.all(e)},e.internalInit=function(){a.debug("Called %cinternalInit()",d.getConsoleStyle("code")),l.default.get("Ids","appId").then(function(t){return!sessionStorage.getItem("ONE_SIGNAL_SESSION")||OneSignal.config.subdomainName||"denied"!=window.Notification.permission&&sessionStorage.getItem("ONE_SIGNAL_NOTIFICATION_PERMISSION")!=window.Notification.permission?(sessionStorage.setItem("ONE_SIGNAL_NOTIFICATION_PERMISSION",window.Notification.permission),c.safari&&OneSignal.config.autoRegister===!1?(a.debug("On Safari and autoregister is false, skipping sessionInit()."),void(h.default.isUsingSubscriptionWorkaround()||u.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED))):OneSignal.config.autoRegister!==!1||OneSignal.config.subdomainName?"visible"!==document.visibilityState?void d.once(document,"visibilitychange",function(t,n){"visible"===document.visibilityState&&(n(),e.sessionInit({__sdkCall:!0}))},!0):void e.sessionInit({__sdkCall:!0}):(a.debug("Skipping internal init. Not auto-registering and no subdomain."),OneSignal.isPushNotificationsEnabled().then(function(e){e&&!h.default.isUsingSubscriptionWorkaround()?(a.info("Because the user is already subscribed and has enabled notifications, we will re-register their GCM token."),h.default.registerForW3CPush({})):g.default.updateServiceWorker()}),void u.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED))):void u.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED)})},e.initSaveState=function(){return i.__awaiter(this,void 0,void 0,function(){var e,t;return i.__generator(this,function(n){switch(n.label){case 0:return[4,p.default.getAppId()];case 1:return e=n.sent(),[4,l.default.put("Ids",{type:"appId",id:e})];case 2:return n.sent(),t=document.title||"Notification",[4,l.default.put("Options",{key:"pageTitle",value:t})];case 3:return n.sent(),a.info("OneSignal: Set pageTitle to be '"+t+"'."),[2]}})})},e.sessionInit=function(e){if(a.debug("Called %csessionInit("+JSON.stringify(e)+")",d.getConsoleStyle("code")),OneSignal._sessionInitAlreadyRunning)return void a.debug("Returning from sessionInit because it has already been called.");OneSignal._sessionInitAlreadyRunning=!0;location.protocol;c.safari?OneSignal.config.safari_web_id&&p.default.getAppId().then(function(e){window.safari.pushNotification.requestPermission(OneSignal._API_URL+"safari",OneSignal.config.safari_web_id,{app_id:e},function(t){if(a.info("Safari Registration Result:",t),t.deviceToken){var n={endpointOrToken:t.deviceToken.toLowerCase()};p.default.registerWithOneSignal(e,n)}else p.default.beginTemporaryBrowserSession();m.default.triggerNotificationPermissionChanged()})}):e.modalPrompt&&e.fromRegisterFor?Promise.all([p.default.getAppId(),OneSignal.isPushNotificationsEnabled(),OneSignal.getNotificationPermission()]).then(function(t){var n=t[0],i=t[1],s=t[2],l=OneSignal.modalUrl+"?"+p.default.getPromptOptionsQueryString()+"&id="+n+"&httpsPrompt=true&pushEnabled="+i+"&permissionBlocked="+("denied"===s)+"&promptType=modal";a.info("Opening HTTPS modal prompt:",l);var c=p.default.createHiddenSubscriptionDomModal(l),d="https://onesignal.com";r.default.isDev()&&(d=o.DEV_FRAME_HOST);var g=d;OneSignal.modalPostmam=new f.default(c,d,g),OneSignal.modalPostmam.startPostMessageReceive(),OneSignal.modalPostmam.once(OneSignal.POSTMAM_COMMANDS.MODAL_LOADED,function(e){p.default.showSubscriptionDomModal(),u.default.trigger("modalLoaded")}),OneSignal.modalPostmam.once(OneSignal.POSTMAM_COMMANDS.MODAL_PROMPT_ACCEPTED,function(t){a.debug("User accepted the HTTPS modal prompt."),OneSignal._sessionInitAlreadyRunning=!1;var n=document.getElementById("OneSignal-iframe-modal");n.parentNode.removeChild(n),OneSignal.modalPostmam.destroy(),p.default.triggerCustomPromptClicked("granted"),a.debug("Calling setSubscription(true)"),OneSignal.setSubscription(!0).then(function(){return h.default.registerForW3CPush(e)})}),OneSignal.modalPostmam.once(OneSignal.POSTMAM_COMMANDS.MODAL_PROMPT_REJECTED,function(e){a.debug("User rejected the HTTPS modal prompt."),OneSignal._sessionInitAlreadyRunning=!1;var t=document.getElementById("OneSignal-iframe-modal");t.parentNode.removeChild(t),OneSignal.modalPostmam.destroy(),p.default.triggerCustomPromptClicked("denied")}),OneSignal.modalPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_CLOSING,function(e){a.info("Detected modal is closing."),OneSignal.modalPostmam.destroy()})}):"serviceWorker"in navigator&&!h.default.isUsingSubscriptionWorkaround()?e.__sdkCall&&!p.default.wasHttpsNativePromptDismissed()?h.default.registerForW3CPush(e):e.__sdkCall&&p.default.wasHttpsNativePromptDismissed()?(a.debug("OneSignal: Not automatically showing native HTTPS prompt because the user previously dismissed it."),OneSignal._sessionInitAlreadyRunning=!1):h.default.registerForW3CPush(e):(OneSignal.config.autoRegister!==!0&&a.debug("OneSignal: Not automatically showing popover because autoRegister is not specifically true."),p.default.isHttpPromptAlreadyShown()&&a.debug("OneSignal: Not automatically showing popover because it was previously shown in the same session."),OneSignal.config.autoRegister!==!0||p.default.isHttpPromptAlreadyShown()||OneSignal.showHttpPrompt().catch(function(e){if(!(e instanceof v.InvalidStateError&&e.reason===v.InvalidStateReason[v.InvalidStateReason.RedundantPermissionMessage]||e instanceof S.default||e instanceof b.default))throw e;a.debug("[Prompt Not Showing]",e)})),u.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED)},e}();t.default=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){this._events={}}return e.prototype.on=function(e,t){return this._events[e]=this._events[e]||[],this._events[e].push(t),this},e.prototype.once=function(e,t){function n(){i.off(e,n),t.apply(this,arguments)}var i=this;return n.listener=t,this.on(e,n),this},e.prototype.off=function(e,t){var n=this._events[e];if(void 0!==n){for(var i=0;i<n.length;i+=1)if(n[i]===t||n[i].listener===t){n.splice(i,1);break}0===n.length&&this.removeAllListeners(e)}return this},e.prototype.removeAllListeners=function(e){try{delete this._events[e]}catch(e){}return this},e.prototype.listeners=function(e){try{return this._events[e]}catch(e){}},e.prototype.emit=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];var n=[].slice.call(arguments,0),i=n.shift(),o=this._events[i];if(void 0!==o){o=o.slice(0);for(var r=o.length,a=0;a<r;a+=1)o[a].apply(this,n)}return this},e}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});!function(e){e[e.HttpPermissionRequest="HTTP permission request"]="HttpPermissionRequest",e[e.HttpsPermissionRequest="HTTPS permission request"]="HttpsPermissionRequest",e[e.FullscreenHttpPermissionMessage="fullscreen HTTP permission message"]="FullscreenHttpPermissionMessage",e[e.FullscreenHttpsPermissionMessage="fullscreen HTTPS permission message"]="FullscreenHttpsPermissionMessage",e[e.SlidedownPermissionMessage="slidedown permission message"]="SlidedownPermissionMessage",e[e.SubscriptionBell="subscription bell"]="SubscriptionBell"}(t.PermissionPromptType||(t.PermissionPromptType={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(2),r=n(32),a=n(1),s=function(){function e(e){this.databaseName=e,this.emitter=new r.default}return e.prototype.open=function(e){var t=this;return new Promise(function(n,i){try{var o=indexedDB.open(e,1)}catch(e){}o.onerror=t.onDatabaseOpenError,o.onblocked=t.onDatabaseOpenBlocked,o.onupgradeneeded=t.onDatabaseUpgradeNeeded,o.onsuccess=function(){t.database=o.result,t.database.onerror=t.onDatabaseError,t.database.onversionchange=t.onDatabaseVersionChange,n(t.database)}})},e.prototype.ensureDatabaseOpen=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return this.openLock||(this.openLock=this.open(this.databaseName)),[4,this.openLock];case 1:return e.sent(),[2,this.database]}})})},e.prototype.onDatabaseOpenError=function(e){e.preventDefault();var t=e.target.error;a.contains(t.message,"The operation failed for reasons unrelated to the database itself and not covered by any other error code")||a.contains(t.message,"A mutation operation was attempted on a database that did not allow mutations")?o.warn("OneSignal: IndexedDb web storage is not available on this origin since this profile's IndexedDb schema has been upgraded in a newer version of Firefox. See: https://bugzilla.mozilla.org/show_bug.cgi?id=1236557#c6"):o.warn("OneSignal: Fatal error opening IndexedDb database:",t)},e.prototype.onDatabaseError=function(e){o.debug("IndexedDb: Generic database error",e.target.errorCode)},e.prototype.onDatabaseOpenBlocked=function(){o.debug("IndexedDb: Blocked event")},e.prototype.onDatabaseVersionChange=function(e){o.debug("IndexedDb: versionchange event")},e.prototype.onDatabaseUpgradeNeeded=function(e){o.debug("IndexedDb: Database is being rebuilt or upgraded (upgradeneeded event).");var t=e.target.result;t.createObjectStore("Ids",{keyPath:"type"}),t.createObjectStore("NotificationOpened",{keyPath:"url"}),t.createObjectStore("Options",{keyPath:"key"})},e.prototype.get=function(e,t){return i.__awaiter(this,void 0,void 0,function(){var n=this;return i.__generator(this,function(i){switch(i.label){case 0:return[4,this.ensureDatabaseOpen()];case 1:return i.sent(),t?[4,new Promise(function(i,o){var r=n.database.transaction(e).objectStore(e).get(t);r.onsuccess=function(){i(r.result)},r.onerror=function(e){o(r.error)}})]:[3,3];case 2:return[2,i.sent()];case 3:return[4,new Promise(function(t,i){var o={},r=n.database.transaction(e).objectStore(e).openCursor();r.onsuccess=function(e){var n=e.target.result;if(n){var i=n.key;o[i]=n.value,n.continue()}else t(o)},r.onerror=function(e){i(r.error)}})];case 4:return[2,i.sent()]}})})},e.prototype.put=function(e,t){return i.__awaiter(this,void 0,void 0,function(){var n=this;return i.__generator(this,function(i){switch(i.label){case 0:return[4,this.ensureDatabaseOpen()];case 1:return i.sent(),[4,new Promise(function(i,r){try{var a=n.database.transaction([e],"readwrite").objectStore(e).put(t);a.onsuccess=function(e){i(t)},a.onerror=function(e){o.error("Database PUT Transaction Error:",e),r(e)}}catch(e){o.error("Database PUT Error:",e),r(e)}})];case 2:return[2,i.sent()]}})})},e.prototype.remove=function(e,t){var n=this;if(t)var i="delete";else var i="clear";return new Promise(function(r,a){try{var s=n.database.transaction([e],"readwrite").objectStore(e)[i](t);s.onsuccess=function(e){r(t)},s.onerror=function(e){o.error("Database REMOVE Transaction Error:",e),a(e)}}catch(e){o.error("Database REMOVE Error:",e),a(e)}})},e}();t.default=s},function(e,t,n){"use strict";var i=n(22),o=n(61);e.exports=function(e,t){var n=t||{},r={};return void 0===e&&(e={}),e.on=function(t,n){return r[t]?r[t].push(n):r[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var i=arguments.length;if(1===i)delete r[t];else if(0===i)r={};else{var o=r[t];if(!o)return e;o.splice(o.indexOf(n),1)}return e},e.emit=function(){var t=i(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var a=(r[t]||[]).slice(0);return function(){var r=i(arguments),s=this||e;if("error"===t&&n.throws!==!1&&!a.length)throw 1===r.length?r[0]:r;return a.forEach(function(i){n.async?o(i,r,s):i.apply(s,r),i._once&&e.off(t,i)}),e}},e}},function(e,t,n){var i,o;!function(r,a,s){i=s,void 0!==(o="function"==typeof i?i.call(t,n,t,e):i)&&(e.exports=o)}(0,0,function(){"use strict";var e={inherit:function(t,n,i){(t.prototype=e.createObject(n.prototype)).constructor=t,(i||void 0===i)&&(t._super=n.prototype)},createObject:Object.create||function(e){var t=function(){};return t.prototype=e,new t},mixin:function(t,n){return e.merge(t.prototype,n)},merge:function(e,t){var n;for(n in t)e[n]=t[n]},hasOwn:function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}};return e})},function(e,t,n){"use strict";function i(e){return e?e.toString():null}function o(e){return e?new Error(e):null}function r(e){var t=e.shift();return"error"===t?{error:i(e[0]),type:t,payload:[]}:{error:null,type:t,payload:e}}function a(e,t){function n(n){var i=n.data;"error"===i.type?e.emit.call(null,"error",t,o(i.error)):e.emit.apply(null,[i.type,t].concat(i.payload))}return n}e.exports={parsePayload:r,emission:a}},function(e,t,n){var i;!function(t){"use strict";function o(){}function r(e,t){for(var n=e.length;n--;)if(e[n].listener===t)return n;return-1}function a(e){return function(){return this[e].apply(this,arguments)}}function s(e){return"function"==typeof e||e instanceof RegExp||!(!e||"object"!=typeof e)&&s(e.listener)}var u=o.prototype,l=t.EventEmitter;u.getListeners=function(e){var t,n,i=this._getEvents();if(e instanceof RegExp){t={};for(n in i)i.hasOwnProperty(n)&&e.test(n)&&(t[n]=i[n])}else t=i[e]||(i[e]=[]);return t},u.flattenListeners=function(e){var t,n=[];for(t=0;t<e.length;t+=1)n.push(e[t].listener);return n},u.getListenersAsObject=function(e){var t,n=this.getListeners(e);return n instanceof Array&&(t={},t[e]=n),t||n},u.addListener=function(e,t){if(!s(t))throw new TypeError("listener must be a function");var n,i=this.getListenersAsObject(e),o="object"==typeof t;for(n in i)i.hasOwnProperty(n)&&r(i[n],t)===-1&&i[n].push(o?t:{listener:t,once:!1});return this},u.on=a("addListener"),u.addOnceListener=function(e,t){return this.addListener(e,{listener:t,once:!0})},u.once=a("addOnceListener"),u.defineEvent=function(e){return this.getListeners(e),this},u.defineEvents=function(e){for(var t=0;t<e.length;t+=1)this.defineEvent(e[t]);return this},u.removeListener=function(e,t){var n,i,o=this.getListenersAsObject(e);for(i in o)o.hasOwnProperty(i)&&(n=r(o[i],t))!==-1&&o[i].splice(n,1);return this},u.off=a("removeListener"),u.addListeners=function(e,t){return this.manipulateListeners(!1,e,t)},u.removeListeners=function(e,t){return this.manipulateListeners(!0,e,t)},u.manipulateListeners=function(e,t,n){var i,o,r=e?this.removeListener:this.addListener,a=e?this.removeListeners:this.addListeners;if("object"!=typeof t||t instanceof RegExp)for(i=n.length;i--;)r.call(this,t,n[i]);else for(i in t)t.hasOwnProperty(i)&&(o=t[i])&&("function"==typeof o?r.call(this,i,o):a.call(this,i,o));return this},u.removeEvent=function(e){var t,n=typeof e,i=this._getEvents();if("string"===n)delete i[e];else if(e instanceof RegExp)for(t in i)i.hasOwnProperty(t)&&e.test(t)&&delete i[t];else delete this._events;return this},u.removeAllListeners=a("removeEvent"),u.emitEvent=function(e,t){var n,i,o,r,a=this.getListenersAsObject(e);for(r in a)if(a.hasOwnProperty(r))for(n=a[r].slice(0),o=0;o<n.length;o++)i=n[o],i.once===!0&&this.removeListener(e,i.listener),i.listener.apply(this,t||[])===this._getOnceReturnValue()&&this.removeListener(e,i.listener);return this},u.trigger=a("emitEvent"),u.emit=function(e){var t=Array.prototype.slice.call(arguments,1);return this.emitEvent(e,t)},u.setOnceReturnValue=function(e){return this._onceReturnValue=e,this},u._getOnceReturnValue=function(){return!this.hasOwnProperty("_onceReturnValue")||this._onceReturnValue},u._getEvents=function(){return this._events||(this._events={})},o.noConflict=function(){return t.EventEmitter=l,o},void 0!==(i=function(){return o}.call(t,n,t,e))&&(e.exports=i)}(this||{})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(8),r=n(3),a=n(15),s=n(34),u=n(2),l=n(4),c=n(24),d=n(6),f=n(9),p=n(1),g=n(60),h=n(7),m=n(38),v=n(36),b=n(25),S=n(13),O=n(10),_=n(58),E=n(47),y=n(14),w=n(12),P=n(31),I=n(17),T=n(5),N=n(49),C=n(21),R=n(54),A=n(29),M=n(30),k=n(48),D=n(28),x=n(33),U=n(53),H=function(){function e(){}return e.setDefaultNotificationUrl=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:if(!g.ValidatorUtils.isValidUrl(e,{allowNull:!0}))throw new E.InvalidArgumentError("url",E.InvalidArgumentReason.Malformed);return[4,p.awaitOneSignalInitAndSupported()];case 1:return n.sent(),p.logMethodCall("setDefaultNotificationUrl",e),[4,d.default.getAppState()];case 2:return t=n.sent(),t.defaultNotificationUrl=e,[4,d.default.setAppState(t)];case 3:return n.sent(),[2]}})})},e.setDefaultTitle=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return[4,p.awaitOneSignalInitAndSupported()];case 1:return n.sent(),p.logMethodCall("setDefaultTitle",e),[4,d.default.getAppState()];case 2:return t=n.sent(),t.defaultNotificationTitle=e,[4,d.default.setAppState(t)];case 3:return n.sent(),[2]}})})},e.syncHashedEmail=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,r;return i.__generator(this,function(i){switch(i.label){case 0:if(!e)throw new E.InvalidArgumentError("email",E.InvalidArgumentReason.Empty);if(t=p.prepareEmailForHashing(e),!p.isValidEmail(t))throw new E.InvalidArgumentError("email",E.InvalidArgumentReason.Malformed);return[4,p.awaitOneSignalInitAndSupported()];case 1:return i.sent(),p.logMethodCall("syncHashedEmail",e),[4,d.default.getAppConfig()];case 2:return n=i.sent().appId,[4,d.default.getSubscription()];case 3:if(!(o=i.sent().deviceId))throw new k.NotSubscribedError(k.NotSubscribedReason.NoDeviceId);return[4,a.default.updatePlayer(n,o,{em_m:p.md5(t),em_s:p.sha1(t)})];case 4:if((r=i.sent())&&r.success)return[2,!0];throw r}})})},e.isPushNotificationsSupported=function(){return p.logMethodCall("isPushNotificationsSupported"),!0},e.init=function(t){function n(){if(!e.__initAlreadyCalled){if(e.__initAlreadyCalled=!0,O.default.fixWordpressManifestIfMisplaced(),T.default.isUsingSubscriptionWorkaround()){if(!e.config.subdomainName)return void u.error("OneSignal: Your JavaScript initialization code is missing a required parameter %csubdomainName",p.getConsoleStyle("code"),". HTTP sites require this parameter to initialize correctly. Please see steps 1.4 and 2 at https://documentation.onesignal.com/docs/web-push-sdk-setup-http)");e.config.subdomainName=O.default.autoCorrectSubdomain(e.config.subdomainName),r.default.isDev()?(e.iframeUrl=o.DEV_FRAME_HOST+"/webPushIframe",e.popupUrl=o.DEV_FRAME_HOST+"/subscribe"):(e.iframeUrl="https://"+e.config.subdomainName+".onesignal.com/webPushIframe",e.popupUrl="https://"+e.config.subdomainName+".onesignal.com/subscribe")}else r.default.isDev()?e.modalUrl=o.DEV_FRAME_HOST+"/webPushModal":r.default.isStaging()?e.modalUrl=o.STAGING_FRAME_HOST+"/webPushModal":e.modalUrl="https://onesignal.com/webPushModal";var t=Promise.resolve();T.default.isUsingSubscriptionWorkaround()&&(t=N.default.loadSubdomainIFrame().then(function(){return u.info("Subdomain iFrame loaded")})),e.on(e.EVENTS.NATIVE_PROMPT_PERMISSIONCHANGED,S.default.onNotificationPermissionChange),e.on(e.EVENTS.SUBSCRIPTION_CHANGED,S.default._onSubscriptionChanged),e.on(e.EVENTS.SDK_INITIALIZED,P.default.onSdkInitialized),t.then(function(){if(window.addEventListener("focus",function(e){O.default.checkAndTriggerNotificationPermissionChanged()}),f.safari&&void 0===window.fetch){var t=document.createElement("script");t.setAttribute("src","https://cdnjs.cloudflare.com/ajax/libs/fetch/0.9.0/fetch.js"),document.head.appendChild(t)}P.default.initSaveState().then(function(){return P.default.saveInitOptions()}).then(function(){r.default.isCustomSubdomain()?l.default.trigger(e.EVENTS.SDK_INITIALIZED):P.default.internalInit()})})}}return p.logMethodCall("init",t),I.default.applyServiceWorkerEnvPrefixes(),e._initCalled?(u.error("OneSignal: Please don't call init() more than once. Any extra calls to init() are ignored. The following parameters were not processed: %c"+JSON.stringify(Object.keys(t)),p.getConsoleStyle("code")),"return"):(e._initCalled=!0,e.config=h({path:"/"},t),f.safari&&!e.config.safari_web_id?void u.warn("OneSignal: Required parameter %csafari_web_id",p.getConsoleStyle("code"),"was not passed to OneSignal.init(), skipping SDK initialization."):void("complete"===document.readyState||"interactive"===document.readyState?n():(u.debug("OneSignal: Waiting for DOMContentLoaded or readyStateChange event before continuing initialization..."),window.addEventListener("DOMContentLoaded",function(){n()}),document.onreadystatechange=function(){"complete"!==document.readyState&&"interactive"!==document.readyState||n()})))},e.showHttpPrompt=function(t){return i.__awaiter(this,void 0,void 0,function(){var n,o,r,a,s,l;return i.__generator(this,function(i){switch(i.label){case 0:return t||(t={}),[4,p.awaitOneSignalInitAndSupported()];case 1:if(i.sent(),e.__isPopoverShowing)throw new w.InvalidStateError(w.InvalidStateReason.RedundantPermissionMessage,{permissionPromptType:x.PermissionPromptType.SlidedownPermissionMessage});return[4,e.getNotificationPermission()];case 2:return n=i.sent(),[4,e.isPushNotificationsEnabled()];case 3:return o=i.sent(),[4,e.getSubscription()];case 4:return r=i.sent(),[4,O.default.wasHttpsNativePromptDismissed()];case 5:return a=i.sent(),[4,e.httpHelper.isShowingHttpPermissionRequest()];case 6:if(s=i.sent(),a&&!t.force)throw new A.default;if(n===R.NotificationPermission.Denied)throw new M.default;if(o)throw new D.default;if(!r)throw new k.NotSubscribedError(k.NotSubscribedReason.OptedOut);if(O.default.isUsingHttpPermissionRequest()&&(!t.__sdkCall||!t.__useHttpPermissionRequestStyle))throw u.debug("The slidedown permission message cannot be used while the HTTP perm. req. is enabled."),new w.InvalidStateError(w.InvalidStateReason.RedundantPermissionMessage,{permissionPromptType:x.PermissionPromptType.HttpPermissionRequest});return O.default.markHttpPopoverShown(),[4,e.context.dynamicResourceLoader.loadSdkStylesheet()];case 7:return 0!==(l=i.sent())?(u.debug("Not showing slidedown permission message because styles failed to load."),[2]):(e.popover=new _.default(e.config.promptOptions),e.popover.create(),u.debug("Showing the HTTP popover."),e.notifyButton&&e.notifyButton.options.enable&&"hidden"!==e.notifyButton.launcher.state&&e.notifyButton.launcher.waitUntilShown().then(function(){e.notifyButton.launcher.hide()}),e.once(_.default.EVENTS.SHOWN,function(){e.__isPopoverShowing=!0}),e.once(_.default.EVENTS.CLOSED,function(){e.__isPopoverShowing=!1,e.notifyButton&&e.notifyButton.options.enable&&e.notifyButton.launcher.show()}),e.once(_.default.EVENTS.ALLOW_CLICK,function(){e.popover.close(),u.debug("Setting flag to not show the popover to the user again."),C.default.markHttpsNativePromptDismissed(),t.__sdkCall&&t.__useHttpPermissionRequestStyle?e.registerForPushNotifications({httpPermissionRequest:!0}):e.registerForPushNotifications({autoAccept:!0})}),e.once(_.default.EVENTS.CANCEL_CLICK,function(){u.debug("Setting flag to not show the popover to the user again."),C.default.markHttpsNativePromptDismissed()}),[2])}})})},e.registerForPushNotifications=function(t){function n(){T.default.isUsingSubscriptionWorkaround()?N.default.loadPopup(t):(t||(t={}),t.fromRegisterFor=!0,P.default.sessionInit(t))}if(e.initialized)return n();e.once(e.EVENTS.SDK_INITIALIZED,function(){return n()})},e.showHttpPermissionRequest=function(t){return i.__awaiter(this,void 0,void 0,function(){var n,o;return i.__generator(this,function(i){switch(i.label){case 0:return u.debug("Called showHttpPermissionRequest()."),[4,p.awaitOneSignalInitAndSupported()];case 1:if(i.sent(),f.safari)throw new w.InvalidStateError(w.InvalidStateReason.UnsupportedEnvironment);if(e.__isPopoverShowing)throw new w.InvalidStateError(w.InvalidStateReason.RedundantPermissionMessage,{permissionPromptType:x.PermissionPromptType.SlidedownPermissionMessage});if(e._showingHttpPermissionRequest)throw new w.InvalidStateError(w.InvalidStateReason.RedundantPermissionMessage,{permissionPromptType:x.PermissionPromptType.HttpPermissionRequest});return T.default.isUsingSubscriptionWorkaround()?[4,new Promise(function(n,i){e.iframePostmam.message(e.POSTMAM_COMMANDS.SHOW_HTTP_PERMISSION_REQUEST,t,function(e){var t=e.data,o=t.status,r=t.result;"resolve"===o?n(r):i(r)})})]:[3,3];case 2:return[2,i.sent()];case 3:if(!O.default.isUsingHttpPermissionRequest())return u.debug("Not showing HTTP permission request because its not enabled. Check init option httpPermissionRequest."),[2];if(O.default.wasHttpsNativePromptDismissed()){if(t._sdkCall===!0)return u.debug("The HTTP perm. req. permission was dismissed, so we are not showing the request."),[2];u.debug("The HTTP perm. req. was previously dismissed, but this call was made explicitly.")}return[4,e.getNotificationPermission()];case 4:return(n=i.sent())!==R.NotificationPermission.Default?[3,6]:(u.debug("("+r.default.getEnv()+") Showing HTTP permission request."),e._showingHttpPermissionRequest=!0,[4,new Promise(function(t,n){window.Notification.requestPermission(function(n){e._showingHttpPermissionRequest=!1,t(n),u.debug("HTTP Permission Request Result:",n),"default"===n&&(C.default.markHttpsNativePromptDismissed(),e.iframePostmam.message(e.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION_CHANGED,{permission:n,forceUpdatePermission:!0}))}),l.default.trigger(e.EVENTS.PERMISSION_PROMPT_DISPLAYED)})]);case 5:return[2,i.sent()];case 6:return o=n===R.NotificationPermission.Granted,o?[4,e.isPushNotificationsEnabled()]:[3,8];case 7:o=!i.sent(),i.label=8;case 8:o&&e.iframePostmam.message(e.POSTMAM_COMMANDS.HTTP_PERMISSION_REQUEST_RESUBSCRIBE),i.label=9;case 9:return[2]}})})},e.getNotificationPermission=function(t){return p.awaitOneSignalInitAndSupported().then(function(){var t=null;return e.config&&(t=e.config.safari_web_id),O.default.getNotificationPermission(t)}).then(function(e){return t&&t(e),e})},e.getTags=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o;return i.__generator(this,function(i){switch(i.label){case 0:return[4,p.awaitOneSignalInitAndSupported()];case 1:return i.sent(),p.logMethodCall("getTags",e),[4,d.default.getAppConfig()];case 2:return t=i.sent().appId,[4,d.default.getSubscription()];case 3:return n=i.sent().deviceId,n?[4,a.default.getPlayer(t,n)]:(u.info(new k.NotSubscribedError(k.NotSubscribedReason.NoDeviceId)),[2,null]);case 4:return o=i.sent().tags,p.executeCallback(e,o),[2,o]}})})},e.sendTag=function(t,n,o){return i.__awaiter(this,void 0,void 0,function(){var r;return i.__generator(this,function(i){switch(i.label){case 0:return r={},r[t]=n,[4,e.sendTags(r,o)];case 1:return[2,i.sent()]}})})},e.sendTags=function(t,n){return i.__awaiter(this,void 0,void 0,function(){var o,r,s;return i.__generator(this,function(i){switch(i.label){case 0:return[4,p.awaitOneSignalInitAndSupported()];case 1:return i.sent(),(p.logMethodCall("sendTags",t,n),t&&0!==Object.keys(t).length)?(Object.keys(t).forEach(function(e){t[e]===!1&&(t[e]="false")}),[4,d.default.getAppConfig()]):(u.info(new E.InvalidArgumentError("tags",E.InvalidArgumentReason.Empty)),[2]);case 2:return o=i.sent().appId,[4,d.default.getSubscription()];case 3:return r=i.sent().deviceId,r?[3,5]:[4,p.awaitSdkEvent(e.EVENTS.REGISTERED)];case 4:i.sent(),i.label=5;case 5:return[4,d.default.getSubscription()];case 6:return s=i.sent().deviceId,[4,a.default.updatePlayer(o,s,{tags:t})];case 7:return i.sent(),p.executeCallback(n,t),[2,t]}})})},e.deleteTag=function(t){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(n){switch(n.label){case 0:return[4,e.deleteTags([t])];case 1:return[2,n.sent()]}})})},e.deleteTags=function(t,n){return i.__awaiter(this,void 0,void 0,function(){var o,r,a,s,l,c;return i.__generator(this,function(i){switch(i.label){case 0:return[4,p.awaitOneSignalInitAndSupported()];case 1:if(i.sent(),p.logMethodCall("deleteTags",t,n),!g.ValidatorUtils.isValidArray(t))throw new E.InvalidArgumentError("tags",E.InvalidArgumentReason.Malformed);for(0===t.length&&u.info(new E.InvalidArgumentError("tags",E.InvalidArgumentReason.Empty)),o={},r=0,a=t;r<a.length;r++)s=a[r],o[s]="";return[4,e.sendTags(o)];case 2:return l=i.sent(),c=Object.keys(l),p.executeCallback(n,c),[2,c]}})})},e.addListenerForNotificationOpened=function(t){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(n){switch(n.label){case 0:return[4,p.awaitOneSignalInitAndSupported()];case 1:return n.sent(),p.logMethodCall("addListenerForNotificationOpened",t),e.once(e.EVENTS.NOTIFICATION_CLICKED,function(e){p.executeCallback(t,e)}),S.default.fireStoredNotificationClicks(e.config.pageUrl),[2]}})})},e.getIdsAvailable=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,r;return i.__generator(this,function(i){switch(i.label){case 0:return[4,p.awaitOneSignalInitAndSupported()];case 1:return i.sent(),p.logMethodCall("getIdsAvailable",e),[4,d.default.getSubscription()];case 2:return t=i.sent(),n=t.deviceId,o=t.pushToken,r={userId:n,registrationId:o},p.executeCallback(e,r),[2,r]}})})},e.isPushNotificationsEnabled=function(t){return i.__awaiter(this,void 0,void 0,function(){var n,o,a,s,u,l,c,f,g,h;return i.__generator(this,function(i){switch(i.label){case 0:return[4,p.awaitOneSignalInitAndSupported()];case 1:return i.sent(),p.logMethodCall("isPushNotificationsEnabled",t),[4,T.default.hasInsecureParentOrigin()];case 2:return n=i.sent(),[4,d.default.getSubscription()];case 3:return o=i.sent(),a=o.deviceId,s=o.pushToken,u=o.optedOut,[4,e.getNotificationPermission()];case 4:return l=i.sent(),c=!1,!r.default.supportsServiceWorkers()||T.default.isUsingSubscriptionWorkaround()||r.default.isIframe()||n?[3,9]:[4,I.default.isServiceWorkerActive()];case 5:return f=i.sent(),c=!(!a||!s||l!==R.NotificationPermission.Granted||u||!f),[4,navigator.serviceWorker.getRegistration()];case 6:return g=i.sent(),g?[4,g.pushManager.getSubscription()]:[3,8];case 7:h=i.sent(),h||(c=!1),i.label=8;case 8:return[3,10];case 9:c=!(!a||!s||l!==R.NotificationPermission.Granted||u),i.label=10;case 10:return p.executeCallback(t,c),[2,c]}})})},e.setSubscription=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n,o,r;return i.__generator(this,function(i){switch(i.label){case 0:return[4,p.awaitOneSignalInitAndSupported()];case 1:return i.sent(),p.logMethodCall("setSubscription",e),[4,d.default.getAppConfig()];case 2:return t=i.sent(),n=t.appId,[4,d.default.getSubscription()];case 3:if(o=i.sent(),r=o.deviceId,!t.appId)throw new w.InvalidStateError(w.InvalidStateReason.MissingAppId);if(!g.ValidatorUtils.isValidBoolean(e))throw new E.InvalidArgumentError("newSubscription",E.InvalidArgumentReason.Malformed);return r?(o.optedOut=!e,[4,a.default.updatePlayer(n,r,{notification_types:O.default.getNotificationTypeFromOptIn(e)})]):(u.info(new k.NotSubscribedError(k.NotSubscribedReason.NoDeviceId)),[2]);case 4:return i.sent(),[4,d.default.setSubscription(o)];case 5:return i.sent(),S.default.onInternalSubscriptionSet(o.optedOut),S.default.checkAndTriggerSubscriptionChanged(),[2]}})})},e.isOptedOut=function(e){return i.__awaiter(this,void 0,void 0,function(){var t;return i.__generator(this,function(n){switch(n.label){case 0:return[4,p.awaitOneSignalInitAndSupported()];case 1:return n.sent(),p.logMethodCall("isOptedOut",e),[4,d.default.getSubscription()];case 2:return t=n.sent().optedOut,p.executeCallback(e,t),[2,t]}})})},e.optOut=function(t,n){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(i){switch(i.label){case 0:return[4,p.awaitOneSignalInitAndSupported()];case 1:if(i.sent(),p.logMethodCall("optOut",t,n),!g.ValidatorUtils.isValidBoolean(t))throw new E.InvalidArgumentError("doOptOut",E.InvalidArgumentReason.Malformed);return[4,e.setSubscription(!t)];case 2:return i.sent(),p.executeCallback(n),[2]}})})},e.getUserId=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n;return i.__generator(this,function(i){switch(i.label){case 0:return[4,p.awaitOneSignalInitAndSupported()];case 1:return i.sent(),p.logMethodCall("getUserId",e),[4,d.default.getSubscription()];case 2:return t=i.sent(),n=t.deviceId,p.executeCallback(e,n),[2,n]}})})},e.getRegistrationId=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n;return i.__generator(this,function(i){switch(i.label){case 0:return[4,p.awaitOneSignalInitAndSupported()];case 1:return i.sent(),p.logMethodCall("getRegistrationId",e),[4,d.default.getSubscription()];case 2:return t=i.sent(),n=t.pushToken,p.executeCallback(e,n),[2,n]}})})},e.getSubscription=function(e){return i.__awaiter(this,void 0,void 0,function(){var t,n;return i.__generator(this,function(i){switch(i.label){case 0:return[4,p.awaitOneSignalInitAndSupported()];case 1:return i.sent(),p.logMethodCall("getSubscription",e),[4,d.default.getSubscription()];case 2:return t=i.sent(),n=!t.optedOut,p.executeCallback(e,n),[2,n]}})})},e.sendSelfNotification=function(e,t,n,o,r,s){return void 0===e&&(e="OneSignal Test Message"),void 0===t&&(t="This is an example notification."),void 0===n&&(n=new URL(location.href).origin+"?_osp=do_not_open"),i.__awaiter(this,void 0,void 0,function(){var u,l;return i.__generator(this,function(i){switch(i.label){case 0:return[4,p.awaitOneSignalInitAndSupported()];case 1:return i.sent(),p.logMethodCall("sendSelfNotification",e,t,n,o,r,s),[4,d.default.getAppConfig()];case 2:return u=i.sent(),[4,d.default.getSubscription()];case 3:if(l=i.sent(),!u.appId)throw new w.InvalidStateError(w.InvalidStateReason.MissingAppId);if(!l.deviceId)throw new k.NotSubscribedError(k.NotSubscribedReason.NoDeviceId);if(!g.ValidatorUtils.isValidUrl(n))throw new E.InvalidArgumentError("url",E.InvalidArgumentReason.Malformed);if(!g.ValidatorUtils.isValidUrl(o,{allowEmpty:!0,requireHttps:!0}))throw new E.InvalidArgumentError("icon",E.InvalidArgumentReason.Malformed);return[4,a.default.sendNotification(u.appId,[l.deviceId],{en:e},{en:t},n,o,r,s)];case 4:return[2,i.sent()]}})})},e.push=function(t){if("function"==typeof t)t();else{e[t.shift()].apply(null,t)}},e.on=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.off=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e.once=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t]},e}();H.VERSION=r.default.version(),H._VERSION=r.default.version(),H._API_URL=o.API_URL,H._notificationOpenedCallbacks=[],H._idsAvailable_callback=[],H._defaultLaunchURL=null,H.config=null,H._thisIsThePopup=!1,H.__isPopoverShowing=!1,H._sessionInitAlreadyRunning=!1,H._isNotificationEnabledCallback=[],H._subscriptionSet=!0,H.iframeUrl=null,H.popupUrl=null,H.modalUrl=null,H._sessionIframeAdded=!1,H._windowWidth=650,H._windowHeight=568,H._isNewVisitor=!1,H._channel=null,H.cookie=c,H.initialized=!1,H.notifyButton=null,H.store=y.default,H.environment=r.default,H.database=d.default,H.event=l.default,H.browser=f,H.popover=null,H.log=u,H.swivel=b,H.api=a.default,H.indexedDb=s.default,H.iframePostmam=null,H.popupPostmam=null,H.mainHelper=O.default,H.subscriptionHelper=T.default,H.workerHelper=I.default,H.httpHelper=N.default,H.eventHelper=S.default,H.initHelper=P.default,H.testHelper=C.default,H.objectAssign=h,H.SERVICE_WORKER_UPDATER_PATH="OneSignalSDKUpdaterWorker.js",H.SERVICE_WORKER_PATH="OneSignalSDKWorker.js",H.SERVICE_WORKER_PARAM={scope:"/"},H._LOGGING=!1,H.LOGGING=!1,H._usingNativePermissionHook=!1,H._initCalled=!1,H.__initAlreadyCalled=!1,H.closeNotifications=I.default.closeNotifications,H.isServiceWorkerActive=I.default.isServiceWorkerActive,H._showingHttpPermissionRequest=!1,H.checkAndWipeUserSubscription=function(){},H._initHttp=N.default.initHttp,H._initPopup=N.default.initPopup,H.POSTMAM_COMMANDS={CONNECTED:"connect",REMOTE_NOTIFICATION_PERMISSION:"postmam.remoteNotificationPermission",REMOTE_DATABASE_GET:"postmam.remoteDatabaseGet",REMOTE_DATABASE_PUT:"postmam.remoteDatabasePut",REMOTE_DATABASE_REMOVE:"postmam.remoteDatabaseRemove",REMOTE_OPERATION_COMPLETE:"postman.operationComplete",REMOTE_RETRIGGER_EVENT:"postmam.remoteRetriggerEvent",MODAL_LOADED:"postmam.modalPrompt.loaded",MODAL_PROMPT_ACCEPTED:"postmam.modalPrompt.accepted",MODAL_PROMPT_REJECTED:"postmam.modalPrompt.canceled",POPUP_LOADED:"postmam.popup.loaded",POPUP_ACCEPTED:"postmam.popup.accepted",POPUP_REJECTED:"postmam.popup.canceled",POPUP_CLOSING:"postman.popup.closing",REMOTE_NOTIFICATION_PERMISSION_CHANGED:"postmam.remoteNotificationPermissionChanged",IFRAME_POPUP_INITIALIZE:"postmam.iframePopupInitialize",UNSUBSCRIBE_FROM_PUSH:"postmam.unsubscribeFromPush",BEGIN_BROWSING_SESSION:"postmam.beginBrowsingSession",REQUEST_HOST_URL:"postmam.requestHostUrl",SHOW_HTTP_PERMISSION_REQUEST:"postmam.showHttpPermissionRequest",IS_SHOWING_HTTP_PERMISSION_REQUEST:"postmam.isShowingHttpPermissionRequest",WINDOW_TIMEOUT:"postmam.windowTimeout",FINISH_REMOTE_REGISTRATION:"postmam.finishRemoteRegistration",FINISH_REMOTE_REGISTRATION_IN_PROGRESS:"postmam.finishRemoteRegistrationInProgress",POPUP_BEGIN_MESSAGEPORT_COMMS:"postmam.beginMessagePortComms",SERVICEWORKER_COMMAND_REDIRECT:"postmam.command.redirect",HTTP_PERMISSION_REQUEST_RESUBSCRIBE:"postmam.httpPermissionRequestResubscribe",MARK_PROMPT_DISMISSED:"postmam.markPromptDismissed"},H.EVENTS={CUSTOM_PROMPT_CLICKED:"customPromptClick",NATIVE_PROMPT_PERMISSIONCHANGED:"notificationPermissionChange",SUBSCRIPTION_CHANGED:"subscriptionChange",WELCOME_NOTIFICATION_SENT:"sendWelcomeNotification",NOTIFICATION_DISPLAYED:"notificationDisplay",NOTIFICATION_DISMISSED:"notificationDismiss",NOTIFICATION_CLICKED:"notificationClick",SDK_INITIALIZED:"initialize",REGISTERED:"register",POPUP_CLOSING:"popupClose",PERMISSION_PROMPT_DISPLAYED:"permissionPromptDisplay",TEST_INIT_OPTION_DISABLED:"testInitOptionDisabled",TEST_WOULD_DISPLAY:"testWouldDisplay",POPUP_WINDOW_TIMEOUT:"popupWindowTimeout"},H.NOTIFICATION_TYPES={SUBSCRIBED:1,UNSUBSCRIBED:-2},t.default=H,Object.defineProperty(H,"LOGGING",{get:function(){return H._LOGGING},set:function(e){e?(u.setDefaultLevel(u.levels.TRACE),H._LOGGING=!0):(u.setDefaultLevel(u.levels.WARN),H._LOGGING=!1)},enumerable:!0,configurable:!0}),H.context=new U.default,v.merge(H,new m),H.LOGGING?u.setDefaultLevel(u.levels.TRACE):u.setDefaultLevel(u.levels.WARN),u.info("%cOneSignal Web SDK loaded (version "+H._VERSION+", "+r.default.getEnv()+" environment).",p.getConsoleStyle("bold")),u.debug("Current Page URL: "+("undefined"==typeof location?"NodeJS":location.href)),u.debug("Browser Environment: "+f.name+" "+f.version)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.promiseStub=function(){return{then:e.promiseStub,catch:e.promiseStub}},Object.defineProperty(e,"log",{get:function(){return{setLevel:function(){}}},enumerable:!0,configurable:!0}),e.isPushNotificationsSupported=function(){return!1},e.push=function(e){if("function"==typeof e)e();else{var t=e.shift();OneSignal[t].apply(null,e)}},e}();t.default=i;var o=i;o.init=o.showHttpPrompt=o.registerForPushNotifications=o.showHttpPermissionRequest=o.getNotificationPermission=o.on=o.off=o.once=o.config=o.SERVICE_WORKER_PATH=o.SERVICE_WORKER_UPDATER_PATH=o.checkAndWipeUserSubscription=o.subscriptionBell=o.notifyButton=function(){},o.setDefaultNotificationUrl=o.setDefaultTitle=o.syncHashedEmail=o.getTags=o.sendTag=o.sendTags=o.deleteTag=o.deleteTags=o.addListenerForNotificationOpened=o.getIdsAvailable=o.isPushNotificationsEnabled=o.setSubscription=o.getUserId=o.getRegistrationId=o.getSubscription=o.sendSelfNotification=o.promiseStub},function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0});var o=n(0),r=n(8),a=n(3),s=n(15),u=n(2),l=n(1),c=n(7),d=n(25),f=n(9),p=n(6),g=function(){function t(){}return Object.defineProperty(t,"VERSION",{get:function(){return"130020"},enumerable:!0,configurable:!0}),Object.defineProperty(t,"environment",{get:function(){return a.default},enumerable:!0,configurable:!0}),Object.defineProperty(t,"log",{get:function(){return u},enumerable:!0,configurable:!0}),Object.defineProperty(t,"swivel",{get:function(){return d},enumerable:!0,configurable:!0}),Object.defineProperty(t,"database",{get:function(){return p.default},enumerable:!0,configurable:!0}),Object.defineProperty(t,"apiUrl",{get:function(){return r.API_URL},enumerable:!0,configurable:!0}),Object.defineProperty(t,"browser",{get:function(){return f},enumerable:!0,configurable:!0}),t.run=function(){self.addEventListener("push",t.onPushReceived),self.addEventListener("notificationclose",t.onNotificationClosed),self.addEventListener("notificationclick",function(e){return e.waitUntil(t.onNotificationClicked(e))}),self.addEventListener("install",t.onServiceWorkerInstalled),self.addEventListener("activate",t.onServiceWorkerActivated),self.addEventListener("pushsubscriptionchange",t.onPushSubscriptionChange),d.on("data",t.onMessageReceived),f.firefox&&f.version&&l.contains(f.version,"44")&&p.default.get("Options","serviceWorkerRefetchRequests").then(function(e){1==e?(u.info("Detected Firefox v44; installing fetch handler to refetch all requests."),t.REFETCH_REQUESTS=!0,self.addEventListener("fetch",t.onFetch)):(t.SKIP_REFETCH_REQUESTS=!0,u.info("Detected Firefox v44 but not refetching requests because option is set to false."))}).catch(function(e){u.error(e),t.REFETCH_REQUESTS=!0,self.addEventListener("fetch",t.onFetch)})},t.onMessageReceived=function(e,n){if(u.debug("%c"+l.capitalize(a.default.getEnv())+" ⬸ Host:",l.getConsoleStyle("serviceworkermessage"),n,e),!n)return void u.debug("Returning from empty data message.");"notification.closeall"===n?self.registration.getNotifications(null).then(function(e){for(var t=0,n=e;t<n.length;t++){n[t].close()}}):n.query&&t.processQuery(n.query,n.response)},t.processQuery=function(e,n){return t.queries||u.debug("queryClient() was not called before processQuery(). ServiceWorker.queries is empty."),t.queries[e]?t.queries[e].promise?void t.queries[e].promiseResolve(n):void u.debug("Expected ServiceWorker.queries["+e+"].promise value to be a Promise: "+t.queries[e]):void u.debug("Received query "+e+" response "+n+". Expected ServiceWorker.queries to be preset to a hash.")},t.queryClient=function(e,n){return t.queries||(t.queries={}),t.queries[n]||(t.queries[n]={}),t.queries[n].promise=new Promise(function(i,o){t.queries[n].promiseResolve=i,t.queries[n].promiseReject=o,d.emit(e.id,n)}),t.queries[n].promise},t.onPushReceived=function(e){u.debug("Called %conPushReceived("+JSON.stringify(e,null,4)+"):",l.getConsoleStyle("code"),e),e.waitUntil(t.parseOrFetchNotifications(e).then(function(e){if(!e||0==e.length)return u.debug("Because no notifications were retrieved, we'll display the last known notification, so long as it isn't the welcome notification."),t.displayBackupNotification();for(var n=[],i=0,o=e;i<o.length;i++){var r=o[i];u.debug("Raw Notification from OneSignal:",r);var a=t.buildStructuredNotificationObject(r);n.push(function(e){return t.displayNotification(e).then(function(){return t.updateBackupNotification(e).catch(function(e){return u.error(e)})}).then(function(){d.broadcast("notification.displayed",e)}).then(function(){return t.executeWebhooks("notification.displayed",e).catch(function(e){return u.error(e)})})}.bind(null,a))}return n.reduce(function(e,t){return e=e.then(t)},Promise.resolve())}).catch(function(e){if(u.debug("Failed to display a notification:",e),!t.UNSUBSCRIBED_FROM_NOTIFICATIONS)return u.debug("Because a notification failed to display, we'll display the last known notification, so long as it isn't the welcome notification."),t.displayBackupNotification();u.debug("Because we have just unsubscribed from notifications, we will not show anything.")}))},t.executeWebhooks=function(t,n){return o.__awaiter(this,void 0,void 0,function(){var i,r,a,s,c;return o.__generator(this,function(o){switch(o.label){case 0:return[4,p.default.getSubscription()];case 1:return i=o.sent().deviceId,[4,p.default.get("Options","webhooks.cors")];case 2:return r=o.sent(),[4,p.default.get("Options","webhooks."+t)];case 3:return(a=o.sent())?(s={event:t,id:n.id,userId:i,action:n.action,buttons:n.buttons,heading:n.heading,content:n.content,url:n.url,icon:n.icon,data:n.data},c={method:"post",mode:"no-cors",body:JSON.stringify(s)},r&&(c.mode="cors",c.headers={"X-OneSignal-Event":t,"Content-Type":"application/json"}),u.debug("Executing "+t+" webhook "+(r?"with":"without")+" CORS %cPOST "+a,l.getConsoleStyle("code"),":",s),[4,e(a,c)]):[3,5];case 4:return[2,o.sent()];case 5:return[2]}})})},t.getActiveClients=function(){return o.__awaiter(this,void 0,void 0,function(){var e,t,n,i,s;return o.__generator(this,function(o){switch(o.label){case 0:return[4,self.clients.matchAll({type:"window",includeUncontrolled:!0})];case 1:for(e=o.sent(),t=[],n=0,i=e;n<i.length;n++){if(s=i[n],s.frameType&&"nested"===s.frameType){if(a.default.isDev()&&!l.contains(s.url,r.DEV_FRAME_HOST)||!a.default.isDev()&&!l.contains(s.url,".onesignal.com")||a.default.isStaging()&&!l.contains(s.url,r.STAGING_FRAME_HOST))continue;s.isSubdomainIframe=!0}t.push(s)}return[2,t]}})})},t.buildStructuredNotificationObject=function(e){var t={id:e.custom.i,heading:e.title,content:e.alert,data:e.custom.a,url:e.custom.u,icon:e.icon,image:e.image,tag:e.tag};if(e.o){t.buttons=[];for(var n=0,i=e.o;n<i.length;n++){var o=i[n];t.buttons.push({action:o.i,title:o.n,icon:o.p,url:o.u})}}return l.trimUndefined(t)},t.ensureImageResourceHttps=function(e){if(!e)return null;try{var t=new URL(e);if("localhost"===t.hostname||t.hostname.indexOf("192.168")!==-1||"127.0.0.1"===t.hostname||"https:"===t.protocol)return e;if("i0.wp.com"===t.hostname||"i1.wp.com"===t.hostname||"i2.wp.com"===t.hostname||"i3.wp.com"===t.hostname)return"https://"+t.hostname+t.pathname;return"https://i0.wp.com/"+(t.host+t.pathname)}catch(e){}},t.ensureNotificationResourcesHttps=function(e){if(e&&(e.icon&&(e.icon=t.ensureImageResourceHttps(e.icon)),e.image&&(e.image=t.ensureImageResourceHttps(e.image)),e.buttons&&e.buttons.length>0))for(var n=0,i=e.buttons;n<i.length;n++){var o=i[n];o.icon&&(o.icon=t.ensureImageResourceHttps(o.icon))}},t.displayNotification=function(e,n){return u.debug("Called %cdisplayNotification("+JSON.stringify(e,null,4)+"):",l.getConsoleStyle("code"),e),Promise.all([t._getTitle(),p.default.get("Options","defaultIcon"),p.default.get("Options","persistNotification"),p.default.get("Ids","appId")]).then(function(i){var o=i[0],r=i[1],a=i[2],s=i[3];e.heading=e.heading?e.heading:o,e.icon=e.icon?e.icon:r?r:void 0;var u={};u.tag=e.tag||s,u.persistNotification=a,n||(n={}),e=c(e,n),t.ensureNotificationResourcesHttps(e);var l={body:e.content,icon:e.icon,image:e.image,data:e,actions:e.buttons,tag:u.tag,requireInteraction:u.persistNotification,renotify:!0};return self.registration.showNotification(e.heading,l)})},t.updateBackupNotification=function(e){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(n){switch(n.label){case 0:return t=e.data&&e.data.__isOneSignalWelcomeNotification,t?[2]:[4,p.default.put("Ids",{type:"backupNotification",id:e})];case 1:return n.sent(),[2]}})})},t.displayBackupNotification=function(){return p.default.get("Ids","backupNotification").then(function(e){var n={persistNotification:!1,data:{__isOneSignalBackupNotification:!0}};return e?t.displayNotification(e,n):t.displayNotification({content:"You have new updates."},n)})},t.shouldOpenNotificationUrl=function(e){return"javascript:void(0);"!==e&&"do_not_open"!==e&&!l.contains(e,"_osp=do_not_open")},t.onNotificationClosed=function(e){u.debug("Called %conNotificationClosed("+JSON.stringify(e,null,4)+"):",l.getConsoleStyle("code"),e);var n=e.notification.data;d.broadcast("notification.dismissed",n),e.waitUntil(t.executeWebhooks("notification.dismissed",n))},t.getNotificationUrlToOpen=function(e){return o.__awaiter(this,void 0,void 0,function(){var t,n,i,r,a;return o.__generator(this,function(o){switch(o.label){case 0:return t=self.registration.scope,[4,p.default.getAppState()];case 1:if(n=o.sent().defaultNotificationUrl,n&&(t=n),e.action)for(i=0,r=e.buttons;i<r.length;i++)a=r[i],a.action===e.action&&a.url&&""!==a.url&&(t=a.url);else e.url&&""!==e.url&&(t=e.url);return[2,t]}})})},t.onNotificationClicked=function(e){return o.__awaiter(this,void 0,void 0,function(){var n,i,r,a,c,f,g,h,m,v,b,S,O,_,E,y,w,P,I,T,N,C;return o.__generator(this,function(o){switch(o.label){case 0:return u.debug("Called %conNotificationClicked("+JSON.stringify(e,null,4)+"):",l.getConsoleStyle("code"),e),e.notification.close(),n=e.notification.data,e.action&&(n.action=e.action),i="exact",r="navigate",[4,p.default.get("Options","notificationClickHandlerMatch")];case 1:return a=o.sent(),a&&(i=a),[4,this.database.get("Options","notificationClickHandlerAction")];case 2:return c=o.sent(),c&&(r=c),[4,t.getActiveClients()];case 3:return f=o.sent(),[4,t.getNotificationUrlToOpen(n)];case 4:g=o.sent(),h=t.shouldOpenNotificationUrl(g),m=!1,v=0,b=f,o.label=5;case 5:return v<b.length?(S=b[v],O=S.url,S.isSubdomainIframe?[4,p.default.get("Options","lastKnownHostUrl")]:[3,8]):[3,37];case 6:return _=o.sent(),O=_,_?[3,8]:[4,p.default.get("Options","defaultUrl")];case 7:O=o.sent(),o.label=8;case 8:E="";try{E=new URL(O).origin}catch(e){u.error("Failed to get the HTTP site's actual origin:",e)}y=null;try{y=new URL(g).origin}catch(e){}if(!("exact"===i&&O===g||"origin"===i&&E===y))return[3,36];if(!(S.isSubdomainIframe&&O===g||!S.isSubdomainIframe&&S.url===g||"focus"===r&&E===y))return[3,13];d.emit(S.id,"notification.clicked",n),o.label=9;case 9:return o.trys.push([9,11,,12]),[4,S.focus()];case 10:return o.sent(),[3,12];case 11:return w=o.sent(),u.error("Failed to focus:",S,w),[3,12];case 12:return[3,35];case 13:if(!S.isSubdomainIframe)return[3,21];o.label=14;case 14:return o.trys.push([14,16,,17]),u.debug("Client is subdomain iFrame. Attempting to focus() client."),[4,S.focus()];case 15:return o.sent(),[3,17];case 16:return P=o.sent(),u.error("Failed to focus:",S,P),[3,17];case 17:return h?(u.debug("Redirecting HTTP site to "+g+"."),[4,p.default.put("NotificationOpened",{url:g,data:n,timestamp:Date.now()})]):[3,19];case 18:return o.sent(),d.emit(S.id,"command.redirect",g),[3,20];case 19:u.debug("Not navigating because link is special."),o.label=20;case 20:return[3,35];case 21:if(!S.navigate)return[3,32];o.label=22;case 22:return o.trys.push([22,24,,25]),u.debug("Client is standard HTTPS site. Attempting to focus() client."),[4,S.focus()];case 23:return o.sent(),[3,25];case 24:return I=o.sent(),u.error("Failed to focus:",S,I),[3,25];case 25:return o.trys.push([25,30,,31]),h?(u.debug("Redirecting HTTPS site to ("+g+")."),[4,p.default.put("NotificationOpened",{url:g,data:n,timestamp:Date.now()})]):[3,28];case 26:return o.sent(),[4,S.navigate(g)];case 27:return o.sent(),[3,29];case 28:u.debug("Not navigating because link is special."),o.label=29;case 29:return[3,31];case 30:return T=o.sent(),u.error("Failed to navigate:",S,g,T),[3,31];case 31:return[3,35];case 32:return[4,p.default.put("NotificationOpened",{url:g,data:n,timestamp:Date.now()})];case 33:return o.sent(),[4,t.openUrl(g)];case 34:o.sent(),o.label=35;case 35:return m=!0,[3,37];case 36:return v++,[3,5];case 37:return!h||m?[3,40]:[4,p.default.put("NotificationOpened",{url:g,data:n,timestamp:Date.now()})];case 38:return o.sent(),[4,t.openUrl(g)];case 39:o.sent(),o.label=40;case 40:return[4,p.default.getAppConfig()];case 41:return N=o.sent().appId,[4,p.default.getSubscription()];case 42:return C=o.sent().deviceId,N&&C?[4,s.default.put("notifications/"+n.id,{app_id:N,player_id:C,opened:!0})]:[3,44];case 43:o.sent(),o.label=44;case 44:return[4,t.executeWebhooks("notification.clicked",n)];case 45:return[2,o.sent()]}})})},t.openUrl=function(e){return o.__awaiter(this,void 0,void 0,function(){var t;return o.__generator(this,function(n){switch(n.label){case 0:u.debug("Opening notification URL:",e),n.label=1;case 1:return n.trys.push([1,3,,4]),[4,self.clients.openWindow(e)];case 2:return[2,n.sent()];case 3:return t=n.sent(),u.warn("Failed to open the URL '"+e+"':",t),[3,4];case 4:return[2]}})})},t.onServiceWorkerInstalled=function(e){if(u.debug("Called %conServiceWorkerInstalled("+JSON.stringify(e,null,4)+"):",l.getConsoleStyle("code"),e),u.info("Installing service worker: %c"+self.location.pathname,l.getConsoleStyle("code"),"(version 130020)"),l.contains(self.location.pathname,"OneSignalSDKWorker"))var t="WORKER1_ONE_SIGNAL_SW_VERSION";else var t="WORKER2_ONE_SIGNAL_SW_VERSION";e.waitUntil(p.default.put("Ids",{type:t,id:"130020"}).then(function(){return self.skipWaiting()}))},t.onServiceWorkerActivated=function(e){u.debug("Called %conServiceWorkerActivated("+JSON.stringify(e,null,4)+"):",l.getConsoleStyle("code"),e);var n=self.clients.claim().then(function(){return p.default.get("Ids","userId")}).then(function(e){if(self.registration&&e)return t._subscribeForPush(self.registration).catch(function(e){return u.error(e)})});e.waitUntil(n)},t.onFetch=function(t){t.respondWith(e(t.request))},t.onPushSubscriptionChange=function(e){u.debug("Called %conPushSubscriptionChange("+JSON.stringify(e,null,4)+"):",l.getConsoleStyle("code"),e),e.waitUntil(t._subscribeForPush(self.registration))},t.simulateEvent=function(e){self.dispatchEvent(new ExtendableEvent(e))},t._subscribeForPush=function(e){u.debug("Called %c_subscribeForPush()",l.getConsoleStyle("code"));var n=null;return p.default.get("Ids","appId").then(function(t){return n=t,e.pushManager.getSubscription()}).then(function(t){return u.debug("Resubscribing old subscription",t,"within the service worker ..."),t&&t.options?e.pushManager.subscribe(t.options):Promise.resolve()}).then(function(e){var i=null;if(e){if(i={},u.debug("Finished resubscribing for push:",e),void 0!==e.subscriptionId?i.endpointOrToken=e.subscriptionId:i.endpointOrToken=e.endpoint,e.getKey){var o=null;try{o=e.getKey("p256dh")}catch(e){}var r=null;try{r=e.getKey("auth")}catch(e){}if(o){var a=btoa(String.fromCharCode.apply(null,new Uint8Array(o)));i.p256dh=a}if(r){var s=btoa(String.fromCharCode.apply(null,new Uint8Array(r)));i.auth=s}}}else u.info("Could not subscribe your browser for push notifications.");return t.registerWithOneSignal(n,i)})},t.registerWithOneSignal=function(e,n){var i=l.getDeviceTypeForBrowser();return Promise.all([p.default.get("Ids","userId")]).then(function(o){var r=o[0];o[1];if(!r)return Promise.reject("No user ID found; cannot update existing player info");var u="players/"+r,l={app_id:e,device_type:i,language:a.default.getLanguage(),timezone:(new Date).getTimezoneOffset()*-60,device_model:navigator.platform+" "+f.name,device_os:f.version,sdk:t.VERSION};if(n){l.identifier=n.endpointOrToken;var c=n.endpointOrToken.replace(new RegExp("^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)"),"");p.default.put("Ids",{type:"registrationId",id:c}),n.auth&&(l.web_auth=n.auth),n.p256dh&&(l.web_p256=n.p256dh)}return s.default.put(u,l)}).then(function(e){if(e){e.success||u.error("Resubscription registration with OneSignal failed:",e);var t=e.id;t&&p.default.put("Ids",{type:"userId",id:t})}else u.debug("Resubscription registration failed because no user ID found.")})},t._getTitle=function(){return new Promise(function(e,t){Promise.all([p.default.get("Options","defaultTitle"),p.default.get("Options","pageTitle")]).then(function(t){var n=t[0],i=t[1];e(null!==n?n:null!=i?i:"")})})},t.parseOrFetchNotifications=function(e){if(e.data){return t.isValidPushPayload(e.data)?(u.debug("Received a valid encrypted push payload."),Promise.resolve([e.data.json()])):Promise.reject("Unexpected push message payload received: "+e.data.text())}return t.retrieveNotifications()},t.isValidPushPayload=function(e){try{var t=e.json();return!!(t&&t.custom&&t.custom.i&&l.isValidUuid(t.custom.i))||(u.debug("isValidPushPayload: Valid JSON but missing notification UUID:",t),!1)}catch(e){return u.debug("isValidPushPayload: Parsing to JSON failed with:",e),!1}},t.retrieveNotifications=function(){return new Promise(function(e,n){var i=[];p.default.get("Ids","userId").then(function(e){return e?(u.debug("Legacy push signal received, retrieving contents from players/"+e+"/chromeweb_notification"),s.default.get("players/"+e+"/chromeweb_notification")):(u.debug("Tried to get notification contents, but IndexedDB is missing user ID info."),Promise.all([p.default.get("Ids","appId"),self.registration.pushManager.getSubscription().then(function(e){return e.endpoint})]).then(function(e){var t=e[0],n=e[1],i=l.getDeviceTypeForBrowser();return s.default.getUserIdFromSubscriptionIdentifier(t,i,n).then(function(e){return e?(u.debug("Recovered OneSignal user ID:",e),Promise.all([p.default.put("Ids",{type:"userId",id:e}),p.default.put("Ids",{type:"registrationId",id:n.replace(new RegExp("^(https://android.googleapis.com/gcm/send/|https://updates.push.services.mozilla.com/push/)"),"")})]).then(function(){return u.debug("Attempting to retrieve the notification again now with a recovered user ID."),s.default.get("players/"+e+"/chromeweb_notification")})):Promise.reject("Recovered user ID was null. Unsubscribing from push notifications.")})}).catch(function(e){return u.debug("Unsuccessfully attempted to recover OneSignal user ID:",e),self.registration.pushManager.getSubscription().then(function(e){return e.unsubscribe()}).then(function(e){u.debug("Unsubscribed from push notifications result:",e),t.UNSUBSCRIBED_FROM_NOTIFICATIONS=!0})}))}).then(function(t){for(var n=0;n<t.length;n++)i.push(JSON.parse(t[n]));0==i.length&&u.warn("OneSignal Worker: Received a GCM push signal, but there were no messages to retrieve. Are you using the wrong API URL?",r.API_URL),e(i)})})},t}();"undefined"==typeof self&&void 0!==i?i.OneSignalWorker=g:self.OneSignalWorker=g,u.setDefaultLevel(a.default.isDev()?u.levels.TRACE:u.levels.ERROR),u.info("%cOneSignal Service Worker loaded (version "+a.default.version()+", "+a.default.getEnv()+" environment).",l.getConsoleStyle("bold")),"undefined"!=typeof self&&g.run()}).call(t,n(23),n(18))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(19),r=function(e){function t(){return e.call(this,".onesignal-bell-launcher-badge","onesignal-bell-launcher-badge-opened",null,"onesignal-bell-launcher-badge-active",null,"hidden")||this}return i.__extends(t,e),t.prototype.increment=function(){if(!isNaN(this.content)){var e=+this.content;return e+=1,this.content=e.toString(),e}},t.prototype.decrement=function(){if(!isNaN(this.content)){var e=+this.content;return e-=1,this.content=e>0?e.toString():"",e}},t}(o.default);t.default=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),r=n(4),a=n(19),s=n(16),u=n(14),l=n(27),c=n(5),d=function(e){function t(t){var n=e.call(this,".onesignal-bell-launcher-button",null,null,"onesignal-bell-launcher-button-active",null,"shown","")||this;return n.bell=t,n.events={mouse:"bell.launcher.button.mouse"},n.element.addEventListener("touchstart",function(e){n.onHovering(e),n.onTap(e)}),n.element.addEventListener("mouseenter",function(e){n.onHovering(e)}),n.element.addEventListener("mouseleave",function(e){n.onHovered(e)}),n.element.addEventListener("touchmove",function(e){n.onHovered(e)}),n.element.addEventListener("mousedown",function(e){n.onTap(e)}),n.element.addEventListener("mouseup",function(e){n.onEndTap(e)}),n.element.addEventListener("click",function(e){n.onHovered(e),n.onClick(e)}),n}return i.__extends(t,e),t.prototype.onHovering=function(e){(u.default.isEmpty(this.events.mouse)||"out"===u.default.getLast(this.events.mouse))&&r.default.trigger(s.default.EVENTS.HOVERING),u.default.put(this.events.mouse,"over")},t.prototype.onHovered=function(e){u.default.put(this.events.mouse,"out"),r.default.trigger(s.default.EVENTS.HOVERED)},t.prototype.onTap=function(e){this.pulse(),this.activate(),this.bell.badge.activate()},t.prototype.onEndTap=function(e){this.inactivate(),this.bell.badge.inactivate()},t.prototype.onClick=function(e){var t=this;if(r.default.trigger(s.default.EVENTS.BELL_CLICK),r.default.trigger(s.default.EVENTS.LAUNCHER_CLICK),!this.bell.message.shown||this.bell.message.contentType!=l.default.TYPES.MESSAGE){var n=u.default.getLast("subscription.optedOut");return this.bell.unsubscribed?n?this.bell.launcher.activateIfInactive().then(function(){t.bell.showDialogProcedure()}):(OneSignal.registerForPushNotifications(),this.bell._ignoreSubscriptionState=!0,OneSignal.once(OneSignal.EVENTS.SUBSCRIPTION_CHANGED,function(e){t.bell.message.display(l.default.TYPES.MESSAGE,t.bell.text["message.action.subscribed"],l.default.TIMEOUT).then(function(){t.bell._ignoreSubscriptionState=!1,t.bell.launcher.inactivate()})})):this.bell.subscribed?this.bell.launcher.activateIfInactive().then(function(){t.bell.showDialogProcedure()}):this.bell.blocked&&(c.default.isUsingSubscriptionWorkaround()?OneSignal.registerForPushNotifications():this.bell.launcher.activateIfInactive().then(function(){t.bell.showDialogProcedure()})),this.bell.message.hide()}},t.prototype.pulse=function(){o.removeDomElement(".pulse-ring"),o.addDomElement(this.element,"beforeend",'<div class="pulse-ring"></div>'),this.bell.setCustomColorsIfSpecified()},t}(a.default);t.default=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),r=n(4),a=n(20),s=n(9),u=n(16),l=n(8),c=function(e){function t(t){var n=e.call(this,".onesignal-bell-launcher-dialog","onesignal-bell-launcher-dialog-opened",null,"hidden",["opacity","transform"],".onesignal-bell-launcher-dialog-body")||this;return n.bell=t,n.subscribeButtonId="#onesignal-bell-container .onesignal-bell-launcher #subscribe-button",n.unsubscribeButtonId="#onesignal-bell-container .onesignal-bell-launcher #unsubscribe-button",n.notificationIcons=null,n}return i.__extends(t,e),t.prototype.getPlatformNotificationIcon=function(){return this.notificationIcons?s.chrome||s.firefox?this.notificationIcons.chrome||this.notificationIcons.safari:s.safari?this.notificationIcons.safari||this.notificationIcons.chrome:void 0:null},t.prototype.show=function(){var t=this;return this.updateBellLauncherDialogBody().then(function(){return e.prototype.show.call(t)})},Object.defineProperty(t.prototype,"subscribeButtonSelectorId",{get:function(){return"subscribe-button"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unsubscribeButtonSelectorId",{get:function(){return"unsubscribe-button"},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subscribeButton",{get:function(){return this.element.querySelector("#"+this.subscribeButtonSelectorId)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"unsubscribeButton",{get:function(){return this.element.querySelector("#"+this.unsubscribeButtonSelectorId)},enumerable:!0,configurable:!0}),t.prototype.updateBellLauncherDialogBody=function(){var e=this;return OneSignal.getSubscription().then(function(t){o.clearDomElementChildren(document.querySelector(e.nestedContentSelector));var n="Nothing to show.",i="";if(e.bell.options.showCredit&&(i='<div class="divider"></div><div class="kickback">Powered by <a href="https://onesignal.com" class="kickback" target="_blank">OneSignal</a></div>'),e.bell.state===u.default.STATES.SUBSCRIBED&&t===!0||e.bell.state===u.default.STATES.UNSUBSCRIBED&&t===!1){var a="",c=e.getPlatformNotificationIcon();a=c?'<div class="push-notification-icon"><img src="'+c+'"></div>':'<div class="push-notification-icon push-notification-icon-default"></div>';var d="";d=e.bell.state!==u.default.STATES.SUBSCRIBED?'<button type="button" class="action" id="'+e.subscribeButtonSelectorId+'">'+e.bell.text["dialog.main.button.subscribe"]+"</button>":'<button type="button" class="action" id="'+e.unsubscribeButtonSelectorId+'">'+e.bell.text["dialog.main.button.unsubscribe"]+"</button>",n="<h1>"+e.bell.text["dialog.main.title"]+'</h1><div class="divider"></div><div class="push-notification">'+a+'<div class="push-notification-text-container"><div class="push-notification-text push-notification-text-short"></div><div class="push-notification-text"></div><div class="push-notification-text push-notification-text-medium"></div><div class="push-notification-text"></div><div class="push-notification-text push-notification-text-medium"></div></div></div><div class="action-container">'+d+"</div>"+i}else if(e.bell.state===u.default.STATES.BLOCKED){var c=null;s.chrome?s.mobile||s.tablet||(c=l.HOST_URL+"/bell/chrome-unblock.jpg"):s.firefox?c=l.HOST_URL+"/bell/firefox-unblock.jpg":s.safari&&(c=l.HOST_URL+"/bell/safari-unblock.jpg");var f="";c&&(f='<a href="'+c+'" target="_blank"><img src="'+c+'"></a></div>'),(s.mobile||s.tablet)&&s.chrome&&(f="<ol><li>Access <strong>Settings</strong> by tapping the three menu dots <strong>⋮</strong></li><li>Click <strong>Site settings</strong> under Advanced.</li><li>Click <strong>Notifications</strong>.</li><li>Find and click this entry for this website.</li><li>Click <strong>Notifications</strong> and set it to <strong>Allow</strong>.</li></ol>"),n="<h1>"+e.bell.text["dialog.blocked.title"]+'</h1><div class="divider"></div><div class="instructions"><p>'+e.bell.text["dialog.blocked.message"]+"</p>"+f+"</div>"+i}o.addDomElement(document.querySelector(e.nestedContentSelector),"beforeend",n),e.subscribeButton&&e.subscribeButton.addEventListener("click",function(){return r.default.trigger(u.default.EVENTS.SUBSCRIBE_CLICK)}),e.unsubscribeButton&&e.unsubscribeButton.addEventListener("click",function(){return r.default.trigger(u.default.EVENTS.UNSUBSCRIBE_CLICK)}),e.bell.setCustomColorsIfSpecified()})},t}(a.default);t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),r=n(2),a=n(19),s=n(12),u=function(e){function t(t){var n=e.call(this,".onesignal-bell-launcher","onesignal-bell-launcher-active",null,null,"onesignal-bell-launcher-inactive","hidden","active")||this;return n.bell=t,n.wasInactive=!1,n}return i.__extends(t,e),t.prototype.resize=function(e){return i.__awaiter(this,void 0,void 0,function(){var t=this;return i.__generator(this,function(n){switch(n.label){case 0:if(!this.element)throw new s.InvalidStateError(s.InvalidStateReason.MissingDomElement);if("small"===e&&o.hasCssClass(this.element,"onesignal-bell-launcher-sm")||"medium"===e&&o.hasCssClass(this.element,"onesignal-bell-launcher-md")||"large"===e&&o.hasCssClass(this.element,"onesignal-bell-launcher-lg"))return[2,Promise.resolve(this)];if(o.removeCssClass(this.element,"onesignal-bell-launcher-sm"),o.removeCssClass(this.element,"onesignal-bell-launcher-md"),o.removeCssClass(this.element,"onesignal-bell-launcher-lg"),"small"===e)o.addCssClass(this.element,"onesignal-bell-launcher-sm");else if("medium"===e)o.addCssClass(this.element,"onesignal-bell-launcher-md");else{if("large"!==e)throw new Error("Invalid OneSignal bell size "+e);o.addCssClass(this.element,"onesignal-bell-launcher-lg")}return this.shown?[3,1]:[2,this];case 1:return[4,new Promise(function(e){if(0==t.targetTransitionEvents.length)return e(t);var n=setTimeout(function(){r.debug("Launcher did not completely resize (state: "+t.state+", activeState: "+t.activeState+").")},t.transitionCheckTimeout);o.once(t.element,"transitionend",function(i,r){if(i.target===t.element&&o.contains(t.targetTransitionEvents,i.propertyName))return clearTimeout(n),r(),e(t)},!0)})];case 2:return[2,n.sent()]}})})},t.prototype.activateIfInactive=function(){return this.inactive?(this.wasInactive=!0,this.activate()):o.nothing()},t.prototype.inactivateIfWasInactive=function(){return this.wasInactive?(this.wasInactive=!1,this.inactivate()):o.nothing()},t.prototype.clearIfWasInactive=function(){this.wasInactive=!1},t.prototype.inactivate=function(){var t=this;return this.bell.message.hide().then(function(){return t.bell.badge.content.length>0?t.bell.badge.hide().then(function(){return Promise.all([e.prototype.inactivate.call(t),t.resize("small")])}).then(function(){return t.bell.badge.show()}):Promise.all([e.prototype.inactivate.call(t),t.resize("small")])})},t.prototype.activate=function(){var t=this;return this.bell.badge.content.length>0?this.bell.badge.hide().then(function(){return Promise.all([e.prototype.activate.call(t),t.resize(t.bell.options.size)])}):Promise.all([e.prototype.activate.call(this),this.resize(this.bell.options.size)])},t}(a.default);t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(3),o=n(1),r=n(2);if(i.default.isBrowser())if(o.incrementSdkLoadCount(),o.getSdkLoadCount()>1)r.warn("OneSignal: The web push SDK is included more than once. For optimal performance, please include our SDK only once on your page."),r.debug("OneSignal: Exiting from SDK initialization to prevent double-initialization errors. Occurred "+o.getSdkLoadCount()+" times.");else{if("undefined"!=typeof OneSignal)var a=OneSignal;if(o.isPushNotificationsSupported()?window.OneSignal=n(39).default:(r.debug("OneSignal: Push notifications are not supported. A stubbed version of the SDK will be initialized."),window.OneSignal=n(40).default),a)for(var s=0;s<a.length;s++)OneSignal.push(a[s])}else i.default.isServiceWorker()&&(self.OneSignal=n(41).default)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(0),r=n(11);!function(e){e[e.Empty=0]="Empty",e[e.Malformed=1]="Malformed"}(i=t.InvalidArgumentReason||(t.InvalidArgumentReason={}));var InvalidArgumentError=function(e){function InvalidArgumentError(t,n){var o=this;switch(n){case i.Empty:o=e.call(this,"Supply a non-empty value to '"+t+"'.")||this;break;case i.Malformed:o=e.call(this,"The value for '"+t+"' was malformed.")||this}return o.argument=t,o.reason=i[n],o}return o.__extends(InvalidArgumentError,e),InvalidArgumentError}(r.default);t.InvalidArgumentError=InvalidArgumentError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i,o=n(0),r=n(11);!function(e){e[e.Unknown=0]="Unknown",e[e.NoDeviceId=1]="NoDeviceId",e[e.OptedOut=2]="OptedOut"}(i=t.NotSubscribedReason||(t.NotSubscribedReason={}));var NotSubscribedError=function(e){function NotSubscribedError(t){var n=this;switch(t){case i.Unknown||i.NoDeviceId:n=e.call(this,"This operation can only be performed after the user is subscribed.")||this;break;case i.OptedOut:n=e.call(this,"The user has manually opted out of receiving of notifications. This operation can only be performed after the user is fully resubscribed.")||this}return n.reason=i[t],n}return o.__extends(NotSubscribedError,e),NotSubscribedError}(r.default);t.NotSubscribedError=NotSubscribedError},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(8),r=n(3),a=n(2),s=n(4),u=n(6),l=n(1),c=n(7),d=n(26),f=n(10),p=n(17),g=n(31),h=n(13),m=n(5),v=n(12),b=n(21),S=function(){function e(){}return e.isShowingHttpPermissionRequest=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return m.default.isUsingSubscriptionWorkaround()?[4,new Promise(function(e,t){OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.IS_SHOWING_HTTP_PERMISSION_REQUEST,null,function(t){e(t.data)})})]:[3,2];case 1:return[2,e.sent()];case 2:return[2,OneSignal._showingHttpPermissionRequest]}})})},e.initHttp=function(t){var n=this;if(a.debug("Called %cinitHttp("+JSON.stringify(t,null,4)+")",l.getConsoleStyle("code")),p.default.applyServiceWorkerEnvPrefixes(),(window.opener||window.parent)==window)return void document.write("<span style='font-size: 14px; color: red; font-family: sans-serif;'>OneSignal: This page cannot be directly opened, and\nmust be opened as a result of a subscription call.</span>");OneSignal.config=t||{},OneSignal.initialized=!0;var o=t.origin,h=t.origin,m=Promise.resolve();OneSignal._thisIsThePopup=t.isPopup,(r.default.isPopup()||OneSignal._thisIsThePopup)&&(OneSignal.popupPostmam=new d.default(window.opener,o,h),OneSignal.popupPostmam.postMessage(OneSignal.POSTMAM_COMMANDS.POPUP_BEGIN_MESSAGEPORT_COMMS,null),OneSignal.popupPostmam.listen(),OneSignal.popupPostmam.on("connect",function(e){a.debug("("+r.default.getEnv()+") The host page is now ready to receive commands from the HTTP popup."),s.default.trigger("httpInitialize")})),OneSignal._thisIsTheModal=t.isModal,OneSignal._thisIsTheModal&&(OneSignal.modalPostmam=new d.default(window.parent,o,h)),OneSignal.iframePostmam=new d.default(window,o,h),OneSignal.iframePostmam.listen(),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.CONNECTED,function(e){a.debug("("+r.default.getEnv()+") Fired Postmam connect event!")}),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION,function(e){return OneSignal.getNotificationPermission().then(function(t){return e.reply(t)}),!1}),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_GET,function(e){for(var t=e.data,n=[],i=0,o=t;i<o.length;i++){var r=o[i],a=r.table,s=r.key;n.push(u.default.get(a,s))}return Promise.all(n).then(function(t){return e.reply(t)}),!1}),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_PUT,function(e){for(var t=e.data,n=[],i=0,o=t;i<o.length;i++){var r=o[i],a=r.table,s=r.keypath;n.push(u.default.put(a,s))}return Promise.all(n).then(function(t){return e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE)}),!1}),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_DATABASE_REMOVE,function(e){for(var t=e.data,n=[],i=0,o=t;i<o.length;i++){var r=o[i],a=r.table,s=r.keypath;n.push(u.default.remove(a,s))}return Promise.all(n).then(function(t){return e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE)}),!1}),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.IFRAME_POPUP_INITIALIZE,function(e){a.info("("+r.default.getEnv()+") The iFrame has just received initOptions from the host page!"),m.then(function(){OneSignal.config=c(e.data.hostInitOptions,t,{defaultUrl:e.data.defaultUrl,pageUrl:e.data.pageUrl,pageTitle:e.data.pageTitle}),g.default.installNativePromptPermissionChangedHook();var n=[];t.continuePressed&&n.push(OneSignal.setSubscription(!0)),n.push(u.default.get("Options","defaultUrl").then(function(e){if(!e)return u.default.put("Options",{key:"defaultUrl",value:new URL(OneSignal.config.defaultUrl).origin})})),n.push(u.default.put("Options",{key:"lastKnownHostUrl",value:OneSignal.config.pageUrl})),n.push(g.default.initSaveState()),n.push(g.default.storeInitialValues()),n.push(g.default.saveInitOptions()),Promise.all(n).then(function(){if(navigator.serviceWorker&&"https:"===window.location.protocol)try{f.default.establishServiceWorkerChannel()}catch(e){a.error("Error interacting with Service Worker inside an HTTP-hosted iFrame:",e)}e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE)})})}),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.UNSUBSCRIBE_FROM_PUSH,function(e){a.debug(r.default.getEnv()+" (Expected iFrame) has received the unsubscribe from push method."),l.unsubscribeFromPush().then(function(){return e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE)}).catch(function(e){return a.debug("Failed to unsubscribe from push remotely.",e)})}),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.SHOW_HTTP_PERMISSION_REQUEST,function(e){a.debug(r.default.getEnv()+" Calling showHttpPermissionRequest() inside the iFrame, proxied from host.");var t={};e.data&&(t=e.data),a.debug(r.default.getEnv()+"HTTP permission request showing, message data:",e),OneSignal.showHttpPermissionRequest(t).then(function(t){e.reply({status:"resolve",result:t})}).catch(function(t){t&&t.reason===v.InvalidStateReason[v.InvalidStateReason.PushPermissionAlreadyGranted]||e.reply({status:"reject",result:t})})}),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.IS_SHOWING_HTTP_PERMISSION_REQUEST,function(t){return i.__awaiter(n,void 0,void 0,function(){var n;return i.__generator(this,function(i){switch(i.label){case 0:return[4,e.isShowingHttpPermissionRequest()];case 1:return n=i.sent(),t.reply(n),[2,!1]}})})}),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.MARK_PROMPT_DISMISSED,function(e){return a.debug("(Reposted from iFrame -> Host) Marking prompt as dismissed."),b.default.markHttpsNativePromptDismissed(),e.reply(OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE),!1}),r.default.isIframe()&&s.default.trigger("httpInitialize")},e.initPopup=function(){OneSignal.config={},OneSignal.initialized=!0,p.default.applyServiceWorkerEnvPrefixes(),OneSignal.isPushNotificationsEnabled(function(e){e?window.close():navigator.serviceWorker.register(OneSignal.SERVICE_WORKER_PATH,OneSignal.SERVICE_WORKER_PARAM).then(m.default.enableNotifications,p.default.registerError)})},e.loadSubdomainIFrame=function(){var e=new Promise(function(e,t){a.debug("Called %cloadSubdomainIFrame()",l.getConsoleStyle("code")),a.debug("Loading subdomain iFrame:",OneSignal.iframeUrl);var n=f.default.createHiddenDomIFrame(OneSignal.iframeUrl);n.onload=function(){a.info("iFrame onload event was called for:",n.src);var t="https://"+OneSignal.config.subdomainName+".onesignal.com";r.default.isDev()?t=o.DEV_FRAME_HOST:r.default.isStaging()&&(t=o.STAGING_FRAME_HOST);var i=t;OneSignal.iframePostmam=new d.default(n.contentWindow,t,i),OneSignal.iframePostmam.connect(),OneSignal.iframePostmam.on("connect",function(t){a.debug("("+r.default.getEnv()+") Fired Postmam connect event!"),Promise.all([u.default.get("Options","defaultUrl"),u.default.get("Options","defaultTitle")]).then(function(t){var n=t[0],i=t[1];if(n)var o=n;else var o=location.href;if(i)var r=i;else var r=document.title;OneSignal.iframePostmam.message(OneSignal.POSTMAM_COMMANDS.IFRAME_POPUP_INITIALIZE,{hostInitOptions:JSON.parse(JSON.stringify(OneSignal.config)),defaultUrl:o,pageUrl:window.location.href,pageTitle:r},function(t){return t.data===OneSignal.POSTMAM_COMMANDS.REMOTE_OPERATION_COMPLETE&&(e(),s.default.trigger(OneSignal.EVENTS.SDK_INITIALIZED)),!1})})}),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_RETRIGGER_EVENT,function(e){var t=e.data,n=t.eventName,i=t.eventData;return s.default.trigger(n,i,e.source),!1}),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REMOTE_NOTIFICATION_PERMISSION_CHANGED,function(e){var t=e.data.forceUpdatePermission;return h.default.triggerNotificationPermissionChanged(t),!1}),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.REQUEST_HOST_URL,function(e){return e.reply(location.href),!1}),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.SERVICEWORKER_COMMAND_REDIRECT,function(e){return window.location.href=e.data,!1}),OneSignal.iframePostmam.on(OneSignal.POSTMAM_COMMANDS.HTTP_PERMISSION_REQUEST_RESUBSCRIBE,function(e){return a.debug("(Reposted from iFrame -> Host) User unsubscribed but permission granted. Re-prompting the user for push."),OneSignal.showHttpPrompt({__sdkCall:!0,__useHttpPermissionRequestStyle:!0}).catch(function(e){a.debug("[Resubscribe Prompt Error]",e)}),!1})},OneSignal._sessionIframeAdded=!0});return l.executeAndTimeoutPromiseAfter(e,15e3).catch(function(){return a.warn("OneSignal: Could not load iFrame with URL "+OneSignal.iframeUrl+". Please check that your 'subdomainName' matches that on your OneSignal Chrome platform settings. Also please check that your Site URL on your Chrome platform settings is a valid reachable URL pointing to your site.")})},e.loadPopup=function(e){var t="https://"+OneSignal.config.subdomainName+".onesignal.com";r.default.isDev()&&(t=o.DEV_FRAME_HOST);var n=t,i=c({},f.default.getPromptOptionsPostHash(),{promptType:"popup",parentHostname:encodeURIComponent(location.hostname)});if(e&&e.autoAccept&&(i.autoAccept=!0),a.info("loadPopup(options):",e),e&&e.httpPermissionRequest){i.httpPermissionRequest=!0;var u={childWidth:250,childHeight:150,left:-99999999,top:9999999}}a.info("Opening popup window to "+OneSignal.popupUrl+" with POST data:",OneSignal.popupUrl);var l=f.default.openSubdomainPopup(OneSignal.popupUrl,i,u);OneSignal.popupPostmam=new d.default(l,t,n),OneSignal.popupPostmam.startPostMessageReceive(),OneSignal.popupPostmam.on(OneSignal.POSTMAM_COMMANDS.POPUP_BEGIN_MESSAGEPORT_COMMS,function(e){return a.debug("(Popup Postmam) ("+r.default.getEnv()+") Got direct postMessage() event from popup event to begin MessagePort comms."),OneSignal.popupPostmam.connect(),!1}),OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_LOADED,function(e){s.default.trigger("popupLoad")}),OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_ACCEPTED,function(e){f.default.triggerCustomPromptClicked("granted")}),OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_REJECTED,function(e){f.default.triggerCustomPromptClicked("denied")}),OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.POPUP_CLOSING,function(e){a.info("Detected popup is closing."),s.default.trigger(OneSignal.EVENTS.POPUP_CLOSING),OneSignal.popupPostmam.destroy()}),OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.BEGIN_BROWSING_SESSION,function(e){a.debug(r.default.getEnv()+" Marking current session as a continuing browsing session."),f.default.beginTemporaryBrowserSession()}),OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.WINDOW_TIMEOUT,function(e){a.debug(r.default.getEnv()+" Popup window timed out and was closed."),s.default.trigger(OneSignal.EVENTS.POPUP_WINDOW_TIMEOUT)}),OneSignal.popupPostmam.once(OneSignal.POSTMAM_COMMANDS.FINISH_REMOTE_REGISTRATION,function(e){a.debug(r.default.getEnv()+" Finishing HTTP popup registration inside the iFrame, sent from popup."),e.reply({progress:!0}),f.default.getAppId().then(function(t){OneSignal.popupPostmam.stopPostMessageReceive(),f.default.registerWithOneSignal(t,e.data.subscriptionInfo).then(function(){return h.default.checkAndTriggerSubscriptionChanged()})})})},e}();t.default=S},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(1),o=n(2),r=n(4),a=n(7),s=function(){function e(e){this.options=e?a({},e):{},this.options.modalTitle&&"string"==typeof this.options.modalTitle||(this.options.modalTitle="Thanks for subscribing"),this.options.modalMessage&&"string"==typeof this.options.modalMessage||(this.options.modalMessage="You're now subscribed to notifications. You can unsubscribe at any time."),this.options.modalButtonText&&"string"==typeof this.options.modalButtonText||(this.options.modalButtonText="Close"),this.options.modalTitle=this.options.modalTitle.substring(0,50),this.options.modalMessage=this.options.modalMessage.substring(0,90),this.options.modalButtonText=this.options.modalButtonText.substring(0,35)}return Object.defineProperty(e,"EVENTS",{get:function(){return{FINISH_CLICK:"httpModalFinishClick",SHOWN:"httpModalShown",CLOSED:"httpModalClosed"}},enumerable:!0,configurable:!0}),e.prototype.create=function(){try{this.container&&i.removeDomElement("#onesignal-modal-container");var t='<div id="onesignal-modal-dialog"><div class="modal-exit">&times;</div><div class="modal-body"><div class="modal-body-title">'+this.options.modalTitle+'</div><div class="modal-body-message">'+this.options.modalMessage+'</div><div class="clearfix"></div></div><div class="modal-footer"><button id="onesignal-modal-finish-button" class="primary modal-button">'+this.options.modalButtonText+'</button><div class="clearfix"></div></div></div>';i.addDomElement("body","beforeend",'<div id="onesignal-modal-container" class="onesignal-modal-container onesignal-reset"></div>'),i.addDomElement(this.container,"beforeend",t),this.container.addEventListener("click",this.onHttpModalFinished.bind(this)),r.default.trigger(e.EVENTS.SHOWN)}catch(e){o.error(e)}},e.prototype.onHttpModalFinished=function(t){OneSignal.registerForPushNotifications({httpPermissionRequest:!0}),r.default.trigger(e.EVENTS.FINISH_CLICK),this.close()},e.prototype.close=function(){i.addCssClass(this.container,"close-modal"),i.removeDomElement("#onesignal-modal-container"),r.default.trigger(e.EVENTS.CLOSED)},Object.defineProperty(e.prototype,"container",{get:function(){return document.querySelector("#onesignal-modal-container")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialog",{get:function(){return document.querySelector("#onesignal-modal-dialog")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"finishButton",{get:function(){return document.querySelector("#onesignal-modal-finish-button")},enumerable:!0,configurable:!0}),e}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e}();t.AppConfig=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e}();t.AppState=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(59),o=function(){function e(){this.dynamicResourceLoader=new i.DynamicResourceLoader}return e}();t.default=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i;!function(e){e[e.Default="default"]="Default",e[e.Granted="granted"]="Granted",e[e.Denied="denied"]="Denied"}(i||(i={})),t.NotificationPermission=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e}();t.ServiceWorkerConfig=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e}();t.ServiceWorkerState=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e}();t.Subscription=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(1),r=n(4),a=n(10),s=n(9),u=n(7),l=function(){function e(e){this.options=e?u({},e):{},this.options.actionMessage&&"string"==typeof this.options.actionMessage||(this.options.actionMessage="We'd like to show you notifications for the latest news and updates."),this.options.acceptButtonText&&"string"==typeof this.options.acceptButtonText||(this.options.acceptButtonText="Allow"),this.options.cancelButtonText&&"string"==typeof this.options.cancelButtonText||(this.options.cancelButtonText="No Thanks"),this.options.actionMessage=this.options.actionMessage.substring(0,90),this.options.acceptButtonText=this.options.acceptButtonText.substring(0,15),this.options.cancelButtonText=this.options.cancelButtonText.substring(0,15),this.notificationIcons=null}return Object.defineProperty(e,"EVENTS",{get:function(){return{ALLOW_CLICK:"popoverAllowClick",CANCEL_CLICK:"popoverCancelClick",SHOWN:"popoverShown",CLOSED:"popoverClosed"}},enumerable:!0,configurable:!0}),e.prototype.create=function(){return i.__awaiter(this,void 0,void 0,function(){var t,n,u,l;return i.__generator(this,function(i){switch(i.label){case 0:return null!==this.notificationIcons?[3,2]:[4,a.default.getNotificationIcons()];case 1:t=i.sent(),this.notificationIcons=t,this.container&&o.removeDomElement("#onesignal-popover-container"),n=this.getPlatformNotificationIcon(),u="data:image/svg+xml;charset=utf-8,%3Csvg%20width%3D%2239.5%22%20height%3D%2240.5%22%20viewBox%3D%220%200%2079%2081%22%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%3E%3Ctitle%3EOneSignal-Bell%3C%2Ftitle%3E%3Cg%20fill%3D%22%23BBB%22%20fill-rule%3D%22evenodd%22%3E%3Cpath%20d%3D%22M39.96%2067.12H4.12s-3.2-.32-3.2-3.36%202.72-3.2%202.72-3.2%2010.72-5.12%2010.72-8.8c0-3.68-1.76-6.24-1.76-21.28%200-15.04%209.6-26.56%2021.12-26.56%200%200%201.6-3.84%206.24-3.84%204.48%200%206.08%203.84%206.08%203.84%2011.52%200%2021.12%2011.52%2021.12%2026.56s-1.6%2017.6-1.6%2021.28c0%203.68%2010.72%208.8%2010.72%208.8s2.72.16%202.72%203.2c0%202.88-3.36%203.36-3.36%203.36H39.96zM27%2070.8h24s-1.655%2010.08-11.917%2010.08S27%2070.8%2027%2070.8z%22%2F%3E%3C%2Fg%3E%3C%2Fsvg%3E",l='<div id="normal-popover"><div class="popover-body"><div class="popover-body-icon '+("default-icon"===n?"default-icon":"")+'" style="background-image: url(\''+("default-icon"===n?u:n)+'\');"></div><div class="popover-body-message">'+this.options.actionMessage+'</div><div class="clearfix"></div></div><div class="popover-footer"><button id="onesignal-popover-allow-button" class="align-right primary popover-button">'+this.options.acceptButtonText+'</button><button id="onesignal-popover-cancel-button" class="align-right secondary popover-button">'+this.options.cancelButtonText+'</button><div class="clearfix"></div></div></div>',o.addDomElement("body","beforeend",'<div id="onesignal-popover-container" class="onesignal-popover-container onesignal-reset"></div>'),o.addDomElement(this.container,"beforeend",'<div id="onesignal-popover-dialog" class="onesignal-popover-dialog">'+l+"</div>"),o.addCssClass(this.container,s.mobile?"slide-up":"slide-down"),this.allowButton.addEventListener("click",this.onPopoverAllowed.bind(this)),this.cancelButton.addEventListener("click",this.onPopoverCanceled.bind(this)),r.default.trigger(e.EVENTS.SHOWN),i.label=2;case 2:return[2]}})})},e.prototype.onPopoverAllowed=function(t){r.default.trigger(e.EVENTS.ALLOW_CLICK)},e.prototype.onPopoverCanceled=function(t){r.default.trigger(e.EVENTS.CANCEL_CLICK),this.close()},e.prototype.close=function(){var t=this;o.addCssClass(this.container,"close-popover"),o.once(this.dialog,"animationend",function(n,i){n.target!==t.dialog||"slideDownExit"!==n.animationName&&"slideUpExit"!==n.animationName||(o.removeDomElement("#onesignal-popover-container"),i(),r.default.trigger(e.EVENTS.CLOSED))},!0)},e.prototype.getPlatformNotificationIcon=function(){return this.notificationIcons?s.chrome||s.firefox?this.notificationIcons.chrome?this.notificationIcons.chrome:this.notificationIcons.firefox?this.notificationIcons.firefox:"default-icon":s.safari?this.notificationIcons.safari?this.notificationIcons.safari:this.notificationIcons.chrome?this.notificationIcons.chrome:"default-icon":void 0:"default-icon"},Object.defineProperty(e.prototype,"container",{get:function(){return document.querySelector("#onesignal-popover-container")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"dialog",{get:function(){return document.querySelector("#onesignal-popover-dialog")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"allowButton",{get:function(){return document.querySelector("#onesignal-popover-allow-button")},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"cancelButton",{get:function(){return document.querySelector("#onesignal-popover-cancel-button")},enumerable:!0,configurable:!0}),e}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=n(0),o=n(7),r=function(){function e(){this.cache={}}return e.prototype.getCache=function(){return o({},this.cache)},e.prototype.loadSdkStylesheet=function(){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(e){switch(e.label){case 0:return[4,this.loadIfNew(0,new URL("https://cdn.onesignal.com/sdks/OneSignalSDKStyles.css"))];case 1:return[2,e.sent()]}})})},e.prototype.loadIfNew=function(t,n){return i.__awaiter(this,void 0,void 0,function(){return i.__generator(this,function(i){switch(i.label){case 0:return this.cache[n.toString()]||(this.cache[n.toString()]=e.load(t,n)),[4,this.cache[n.toString()]];case 1:return[2,i.sent()]}})})},e.load=function(e,t){return i.__awaiter(this,void 0,void 0,function(){var n;return i.__generator(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,new Promise(function(n,i){switch(e){case 1:var o=document.createElement("script");o.setAttribute("type","text/javascript"),o.setAttribute("async","async"),o.setAttribute("src",t.toString());break;case 0:var o=document.createElement("link");o.setAttribute("rel","stylesheet"),o.setAttribute("href",t.toString())}o.onerror=i,o.onload=n,document.querySelector("head").appendChild(o)})];case 1:return i.sent(),[2,0];case 2:return n=i.sent(),[2,1];case 3:return[2]}})})},e}();t.DynamicResourceLoader=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=function(){function e(){}return e.isValidUrl=function(e,t){if(t&&t.allowNull&&null===e)return!0;if(t&&t.allowEmpty&&(null===e||void 0===e))return!0;try{var n=new URL(e);return!t||!t.requireHttps||"https:"===n.protocol}catch(e){return!1}},e.isValidBoolean=function(e,t){return!(!t||!t.allowNull||null!==e)||(e===!0||e===!1)},e.isValidArray=function(e,t){return!(!t||!t.allowNull||null!==e)||(!(!t||!t.allowEmpty||null!==e&&void 0!==e)||e instanceof Array)},e}();t.ValidatorUtils=i},function(e,t,n){"use strict";var i=n(68);e.exports=function(e,t,n){e&&i(function(){e.apply(n||null,t||[])})}},function(e,t,n){"use strict";function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(t,"__esModule",{value:!0});var a=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";i(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.defineProperty(n,"message",{configurable:!0,enumerable:!1,value:e,writable:!0}),Object.defineProperty(n,"name",{configurable:!0,enumerable:!1,value:n.constructor.name,writable:!0}),Error.hasOwnProperty("captureStackTrace")?(Error.captureStackTrace(n,n.constructor),o(n)):(Object.defineProperty(n,"stack",{configurable:!0,enumerable:!1,value:new Error(e).stack,writable:!0}),n)}return r(t,e),t}(function(e){function t(){e.apply(this,arguments)}return t.prototype=Object.create(e.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e,t}(Error));t.default=a,e.exports=t.default},,function(e,t){function n(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function o(e){if(c===setTimeout)return setTimeout(e,0);if((c===n||!c)&&setTimeout)return c=setTimeout,setTimeout(e,0);try{return c(e,0)}catch(t){try{return c.call(null,e,0)}catch(t){return c.call(this,e,0)}}}function r(e){if(d===clearTimeout)return clearTimeout(e);if((d===i||!d)&&clearTimeout)return d=clearTimeout,clearTimeout(e);try{return d(e)}catch(t){try{return d.call(null,e)}catch(t){return d.call(this,e)}}}function a(){h&&p&&(h=!1,p.length?g=p.concat(g):m=-1,g.length&&s())}function s(){if(!h){var e=o(a);h=!0;for(var t=g.length;t;){for(p=g,g=[];++m<t;)p&&p[m].run();m=-1,t=g.length}p=null,h=!1,r(e)}}function u(e,t){this.fun=e,this.array=t}function l(){}var c,d,f=e.exports={};!function(){try{c="function"==typeof setTimeout?setTimeout:n}catch(e){c=n}try{d="function"==typeof clearTimeout?clearTimeout:i}catch(e){d=i}}();var p,g=[],h=!1,m=-1;f.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];g.push(new u(e,t)),1!==g.length||h||o(s)},u.prototype.run=function(){this.fun.apply(null,this.array)},f.title="browser",f.browser=!0,f.env={},f.argv=[],f.version="",f.versions={},f.on=l,f.addListener=l,f.once=l,f.off=l,f.removeListener=l,f.removeAllListeners=l,f.emit=l,f.binding=function(e){throw new Error("process.binding is not supported")},f.cwd=function(){return"/"},f.chdir=function(e){throw new Error("process.chdir is not supported")},f.umask=function(){return 0}},function(e,t,n){(function(e,t){!function(e,n){"use strict";function i(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var i={callback:e,args:t};return l[u]=i,s(u),u++}function o(e){delete l[e]}function r(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}function a(e){if(c)setTimeout(a,0,e);else{var t=l[e];if(t){c=!0;try{r(t)}finally{o(e),c=!1}}}}if(!e.setImmediate){var s,u=1,l={},c=!1,d=e.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(e);f=f&&f.setTimeout?f:e,"[object process]"==={}.toString.call(e.process)?function(){s=function(e){t.nextTick(function(){a(e)})}}():function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?function(){var t="setImmediate$"+Math.random()+"$",n=function(n){n.source===e&&"string"==typeof n.data&&0===n.data.indexOf(t)&&a(+n.data.slice(t.length))};e.addEventListener?e.addEventListener("message",n,!1):e.attachEvent("onmessage",n),s=function(n){e.postMessage(t+n,"*")}}():e.MessageChannel?function(){var e=new MessageChannel;e.port1.onmessage=function(e){a(e.data)},s=function(t){e.port2.postMessage(t)}}():d&&"onreadystatechange"in d.createElement("script")?function(){var e=d.documentElement;s=function(t){var n=d.createElement("script");n.onreadystatechange=function(){a(t),n.onreadystatechange=null,e.removeChild(n),n=null},e.appendChild(n)}}():function(){s=function(e){setTimeout(a,0,e)}}(),f.setImmediate=i,f.clearImmediate=o}}("undefined"==typeof self?void 0===e?this:e:self)}).call(t,n(18),n(64))},function(e,t,n){"use strict";function i(){function e(t){function n(e){return function(){return u[e].apply(null,arguments),l}}function i(){if(!t)return Promise.reject(new Error("ServiceWorker not found."));var e=r.parsePayload(o(arguments)),n=new MessageChannel;return n.port1.addEventListener("message",c),t.postMessage(e,[n.port2])}function s(e){var t=e.data;t&&(t.__broadcast?r.emission(u,{broadcast:!0})(e):r.emission(u,{broadcast:!1})(e))}var u=a(),l={on:n("on"),once:n("once"),off:n("off"),emit:i,at:e},c=r.emission(u,{broadcast:!1});return navigator.serviceWorker.addEventListener("message",s),l}return e(navigator.serviceWorker.controller)}var o=n(22),r=n(37),a=n(35);e.exports=i},function(e,t,n){"use strict";function i(){function e(e){return function(){return l[e].apply(null,arguments),c}}function t(e){var t={reply:s(e)};r.emission(l,t)(e)}function n(e){function t(e){return e.map(n)}function n(t){return t.postMessage({type:e,payload:i,__broadcast:!0})}var i=o(arguments,1);return self.clients.matchAll({includeUncontrolled:!0}).then(t)}function i(e){var t=r.parsePayload(o(arguments,1));return e.postMessage(t)}function s(e){return i.bind(null,e.ports[0])}function u(e){var t=r.parsePayload(o(arguments,1));return self.clients.matchAll({includeUncontrolled:!0}).then(function(n){var i=!1;if(n.forEach(function(n){if(n.id===e)return i=!0,n.postMessage(t)}),!i)return Promise.reject("Could not find service worker client with ID "+e+" to reply to.")})}var l=a(),c={on:e("on"),once:e("once"),off:e("off"),broadcast:n,emit:u};return self.addEventListener("message",t),c}var o=n(22),r=n(37),a=n(35);e.exports=i},function(e,t,n){(function(t){var n,i="function"==typeof t;n=i?function(e){t(e)}:function(e){setTimeout(e,0)},e.exports=n}).call(t,n(69).setImmediate)},function(e,t,n){function i(e,t){this._id=e,this._clearFn=t}var o=Function.prototype.apply;t.setTimeout=function(){return new i(o.call(setTimeout,window,arguments),clearTimeout)},t.setInterval=function(){return new i(o.call(setInterval,window,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},i.prototype.unref=i.prototype.ref=function(){},i.prototype.close=function(){this._clearFn.call(window,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(65),t.setImmediate=setImmediate,t.clearImmediate=clearImmediate},function(e,t){e.exports=function(){throw new Error("define cannot be used indirect")}}]);
//# sourceMappingURL=OneSignalSDK.js.map section to tell people about which versions of your project are


currently being supported with security updates.

| Version | Supported          |
| ------- | ------------------ |
| 5.1.x   | :white_check_mark: |
| 5.0.x   | :x:                |
| 4.0.x   | :white_check_mark: |
| < 4.0   | :x:                |

## Reporting a Vulnerability

Use this section to tell people how to report a vulnerability.

Tell them where to go, how often they can expect to get an update on a
reported vulnerability, what to expect if the vulnerability is accepted or
declined, etc.
